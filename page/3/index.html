<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>Harry Mei&#39;Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta property="og:type" content="website">
<meta property="og:title" content="Harry Mei&#39;Blog">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="Harry Mei&#39;Blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Harry Mei&#39;Blog">
    

    
        <link rel="alternate" href="/" title="Harry Mei&#39;Blog" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Harry Mei&#39;Blog</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/cast.jpg" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Buscar" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Entradas',
            PAGES: 'Pages',
            CATEGORIES: 'Categorias',
            TAGS: 'Etiquetas',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Buscar" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile" class="profile-fixed">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/cast.jpg" />
            <h2 id="name">Harry Mei</h2>
            <h3 id="title">coder</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Shenzhen, China</span>
            <a id="follow" target="_blank" href="https://github.com/HarryMei/">SEGUIR</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                86
                <span>Entradas</span>
            </div>
            <div class="article-info-block">
                130
                <span>Etiquetas</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="http://github.com/HarryMei/" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="http://weibo.com/1503717973/" target="_blank" title="twitter" class=tooltip>
                            <i class="fa fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="facebook" class=tooltip>
                            <i class="fa fa-facebook"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="dribbble" class=tooltip>
                            <i class="fa fa-dribbble"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main">
    <article id="post-使用OpenCV进行相机标定" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/05/23/使用OpenCV进行相机标定/">使用OpenCV进行相机标定</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/05/23/使用OpenCV进行相机标定/">
            <time datetime="2018-05-23T13:11:05.000Z" itemprop="datePublished">2018-05-23</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/机器视觉/">机器视觉</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/opencv/">opencv</a>, <a class="tag-link" href="/tags/双目视觉/">双目视觉</a>, <a class="tag-link" href="/tags/张氏标定/">张氏标定</a>, <a class="tag-link" href="/tags/机器视觉/">机器视觉</a>, <a class="tag-link" href="/tags/相机标定/">相机标定</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>前面我总结过两篇关于双目相机的原理以及张氏标定法理论的介绍，而在本文中将通过使用openCV编写标定代码来标定ZED双目相机，不过在此之前先简单了解一下ZED相机（以下介绍参考取官方网站的内容:<a href="https://www.stereolabs.com/zed/" target="_blank" rel="noopener">stereolabs.com/zed/</a>）。</p>
<ul>
<li>视频流的帧率和分辨率：</li>
</ul>
<table>
<thead>
<tr>
<th>模式</th>
<th>FPS</th>
<th>分辨率</th>
</tr>
</thead>
<tbody>
<tr>
<td>2.2K</td>
<td>15</td>
<td>4416x1242</td>
</tr>
<tr>
<td>1080p</td>
<td>30</td>
<td>3840x1080</td>
</tr>
<tr>
<td>720p</td>
<td>60</td>
<td>2560x720</td>
</tr>
<tr>
<td>WVGA</td>
<td>100</td>
<td>1344x376</td>
</tr>
</tbody>
</table>
<ul>
<li>Stereo Baseline：120 mm</li>
<li>光圈：ƒ/2.0</li>
<li>视角：90° (H) x 60° (V) x 110° (D) max</li>
<li>深度范围：0.5 - 20 m (2.3 to 65 ft)</li>
<li>深度值位数：32-bits</li>
</ul>
<h2 id="获取ZED的图像"><a href="#获取ZED的图像" class="headerlink" title="获取ZED的图像"></a>获取ZED的图像</h2><p>三种方法可以采集ZED相机拍摄的图像：</p>
<ol>
<li>使用SDK中厂商提供的工具</li>
<li>使用SDK提供的接口函数</li>
<li>直接使用OpenCV获取</li>
</ol>
<p>由于ZED的SDK完全依赖Nvidia的cudn，而我没有Nvidia的显卡，所以没法使用。不过ZED相机遵循UVC接口标准，而且仅仅需要采集其双目的原始图像，所以只用OpenCV即可，代码与其他摄像头一样：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">print(sys.version)</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">cap = cv2.VideoCapture(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> cap.isOpened():</span><br><span class="line">    print(<span class="string">'Open Camera fail!'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    ret, frame = cap.read()</span><br></pre></td></tr></table></figure>
<p>检查采集到的图像：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pairImageShow</span><span class="params">(img1, img2, mode11=None, model2=None)</span>:</span></span><br><span class="line">    plt.figure(figsize=(<span class="number">15</span>,<span class="number">15</span>))</span><br><span class="line">    plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> mode11 == <span class="string">'gray'</span>:</span><br><span class="line">        plt.imshow(img1, cmap=<span class="string">'gray'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        plt.imshow(img1)</span><br><span class="line">    plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">if</span> model2 == <span class="string">'gray'</span>:</span><br><span class="line">        plt.imshow(img2, cmap=<span class="string">'gray'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        plt.imshow(img2)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">imgs_l = []</span><br><span class="line">imgs_r = []</span><br><span class="line">image_path = <span class="string">'../stereo_calibration/ZED_stereo_calibration/calib_image'</span></span><br><span class="line">image_list = os.listdir(image_path)</span><br><span class="line"><span class="keyword">for</span> image_name <span class="keyword">in</span> image_list:</span><br><span class="line"><span class="comment">#     print(image_name)</span></span><br><span class="line">    full_path = os.path.join(image_path, image_name)</span><br><span class="line">    img = cv2.imread(full_path)</span><br><span class="line">    half_col = img.shape[<span class="number">1</span>]//<span class="number">2</span></span><br><span class="line">    imgs_l.append(img[:,:half_col,:])</span><br><span class="line">    imgs_r.append(img[:,half_col:,:])</span><br><span class="line">    </span><br><span class="line">img_rgb_l = cv2.cvtColor(imgs_l[<span class="number">0</span>], cv2.COLOR_BGR2RGB)</span><br><span class="line">img_rgb_r = cv2.cvtColor(imgs_r[<span class="number">0</span>], cv2.COLOR_BGR2RGB)</span><br><span class="line">pairImageShow(img_rgb_l, img_rgb_r)</span><br></pre></td></tr></table></figure>
<h2 id="角点检测"><a href="#角点检测" class="headerlink" title="角点检测"></a>角点检测</h2><p>在前面的张氏标定的原理中，我已经介绍过当前广泛使用的张氏标定法通常用棋盘格作为标定物，通过寻找棋盘格的角点作为空间参考坐标点求未知量。利用opencv中的findChessboardCorners函数可以找到棋盘图像中的角点。</p>
<p>在下面的代码中，boardSize定义了角点的总个数和排列，如（7，5）表示为水平方向为7、竖直方向为5的角点阵列。只有当所有的角点都找到后，findChessboardCorners的返回值isFind才为真。findChessboardCorners函数找到的角点的坐标是不精确的，需要再使用cornerSubPix函数，进行亚像素的调整。对角点检查的结果，使用drawChessboardCorners函数画出来。</p>
<p>角点检测的坐标是角点当前姿态投影到照片的坐标</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getChessboardCorners</span><span class="params">(colorimg, boardSize)</span>:</span></span><br><span class="line">    grayimg = cv2.cvtColor(colorimg, cv2.COLOR_RGB2GRAY)    </span><br><span class="line">    isFind, corners = cv2.findChessboardCorners(colorimg, boardSize, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">if</span> isFind:</span><br><span class="line">        criteria = (cv2.TERM_CRITERIA_EPS + cv2.TERM_CRITERIA_MAX_ITER, <span class="number">20</span>, <span class="number">0.1</span>)  <span class="comment"># 阈值</span></span><br><span class="line">        cv2.cornerSubPix(grayimg, corners, (<span class="number">5</span>,<span class="number">5</span>), (<span class="number">-1</span>,<span class="number">-1</span>), criteria)       </span><br><span class="line">        <span class="keyword">return</span> corners</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line">w, h = <span class="number">7</span>, <span class="number">5</span></span><br><span class="line">boardSize = (w, h)</span><br><span class="line">corners_l = []</span><br><span class="line">corners_r = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(image_list)):</span><br><span class="line"><span class="comment">#     print('find corner in image:', i)</span></span><br><span class="line">    corner_l = getChessboardCorners(imgs_l[i], boardSize)</span><br><span class="line">    corner_r = getChessboardCorners(imgs_r[i], boardSize)</span><br><span class="line">    <span class="keyword">if</span> corners <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span> <span class="keyword">and</span> corners <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>: </span><br><span class="line">        corners_l.append(corner_l)</span><br><span class="line">        corners_r.append(corner_r)</span><br><span class="line"></span><br><span class="line">cornerimg = cv2.drawChessboardCorners(imgs_l[<span class="number">0</span>], boardSize, corners_l[<span class="number">0</span>], <span class="keyword">True</span>)</span><br><span class="line">cornerimg_rgb = cv2.cvtColor(cornerimg, cv2.COLOR_BGR2RGB)</span><br><span class="line">plt.figure(figsize=(<span class="number">15</span>,<span class="number">15</span>))</span><br><span class="line">plt.imshow(cornerimg_rgb)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>下图为检查结果的截图：</p>
<p><img src="/markdownImage/corner.jpg" alt="corner detected"></p>
<h2 id="计算角点的空间坐标系"><a href="#计算角点的空间坐标系" class="headerlink" title="计算角点的空间坐标系"></a>计算角点的空间坐标系</h2><p>我们都以左上角的角点的为坐标原点，以棋盘格的横向和竖向方向为空间的两个坐标轴，建立空间坐标系，所以所有角点均有一个坐标值为0，而且不管棋盘怎么移动，角点的空间坐标都不变。使用numpy的mgrid函数生成网格坐标是十分好用的，虽然理解上需要点时间。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">block_w = <span class="number">51</span></span><br><span class="line">block_h = <span class="number">50</span></span><br><span class="line"></span><br><span class="line">corner_real_coord = np.zeros((w*h,<span class="number">3</span>), np.float32)</span><br><span class="line">grid_data = np.mgrid[<span class="number">0</span>:w,<span class="number">0</span>:h]</span><br><span class="line">grid_data[<span class="number">0</span>,:,:] *= block_w</span><br><span class="line">grid_data[<span class="number">1</span>,:,:] *= block_h</span><br><span class="line">corner_real_coord[:,:<span class="number">2</span>] = grid_data.T.reshape(<span class="number">-1</span>,<span class="number">2</span>)</span><br><span class="line">img_pair_num = len(corners_l)</span><br><span class="line">print(img_pair_num)</span><br><span class="line">corner_real_coords = [corner_real_coord <span class="keyword">for</span> i <span class="keyword">in</span> range(img_pair_num)]</span><br></pre></td></tr></table></figure>
<h2 id="计算内参和外参与畸变系数"><a href="#计算内参和外参与畸变系数" class="headerlink" title="计算内参和外参与畸变系数"></a>计算内参和外参与畸变系数</h2><p>前面的张氏标定原理有介绍，一个单应性矩阵有可以表示一个姿态下图像坐标到空间坐标的映射，而一个单应性矩阵有8个未知量，所以在一张棋盘格纸上需要至少超出8个以上的角点才能求得单应性矩阵。而当单应性矩阵求得后，能够提供两个方程来求相机得内参矩阵。在加入了倾斜因子后，内参矩阵中有5个未知量，所以至少需要3个姿态的棋盘照片。</p>
<p>在opencv中提供了calibrateCamera函数对相机进行标定，这个函数将标定结果、相机的内参数矩阵、畸变系数、旋转矩阵和平移向量一步完成并返回。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ret_l, mtx_l, dist_l, rvecs_l, tvecs_l = cv2.calibrateCamera(corner_real_coord, corners_l, (img_rgb_l.shape[<span class="number">1</span>],img_rgb_l.shape[<span class="number">0</span>]), <span class="keyword">None</span>, <span class="keyword">None</span>)</span><br><span class="line">ret_r, mtx_r, dist_r, rvecs_r, tvecs_r = cv2.calibrateCamera(corner_real_coords, corners_r,(img_rgb_l.shape[<span class="number">1</span>],img_rgb_l.shape[<span class="number">0</span>]), <span class="keyword">None</span>, <span class="keyword">None</span>)</span><br><span class="line">print(<span class="string">'error: '</span>,ret_l)</span><br><span class="line">print(<span class="string">'内参：'</span>,mtx_l)</span><br><span class="line">print(<span class="string">'畸变系数：'</span>,dist_l)</span><br><span class="line"><span class="comment"># print('旋转向量：',rvecs_l)</span></span><br><span class="line"><span class="comment"># print('平移向量：',tvecs_l)</span></span><br></pre></td></tr></table></figure>
<h2 id="去畸变"><a href="#去畸变" class="headerlink" title="去畸变"></a>去畸变</h2><p>使用计算得到畸变系数，使用opencv中提供的undistort函数对图像进行去畸变(要注意如果照片少，畸变系数的误差会很大，校正的效果也不好)。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dst_img = cv2.undistort(imgs_r[<span class="number">0</span>], mtx_r, dist_r)</span><br><span class="line">dst_img_rgb = cv2.cvtColor(dst_img, cv2.COLOR_BGR2RGB)</span><br><span class="line">plt.figure(figsize=(<span class="number">15</span>,<span class="number">15</span>))</span><br><span class="line">plt.imshow(dst_img_rgb)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h2 id="立体标定与矫正"><a href="#立体标定与矫正" class="headerlink" title="立体标定与矫正"></a>立体标定与矫正</h2><p>使用opencv的stereoCalibrate函数能够同时对两个镜头进行标定，标定结果可以得到两个摄像头的内外参数矩阵和两个摄像头的相对位置的R和T，有一点要注意的就是：由于我们上面已经分别对每个摄像头求出了他们各自的内参，所以在这里就不用重复做了，需要将stereoCalibrate函数的flags参数设置为CALIB_FIX_INTRINSIC。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">crit = (cv2.TERM_CRITERIA_COUNT + cv2.TERM_CRITERIA_EPS, <span class="number">100</span>, <span class="number">1e-5</span>)</span><br><span class="line">ret = cv2.stereoCalibrate(corner_real_coords, corners_l, corners_r,</span><br><span class="line">        mtx_l, dist_l,</span><br><span class="line">        mtx_r, dist_r,</span><br><span class="line">        (img_rgb_l.shape[<span class="number">1</span>],img_rgb_l.shape[<span class="number">0</span>]),</span><br><span class="line">        flags = cv2.CALIB_FIX_INTRINSIC,</span><br><span class="line">        criteria = crit)</span><br><span class="line">R, T = ret[<span class="number">-4</span>:<span class="number">-2</span>]</span><br></pre></td></tr></table></figure>
<p>在实际矫正中，我们是根据两个相机的相对关系，最终得到其在同以平面对其的图像，因此我们需要先求得两个摄像头得矫正变换矩阵。通过opencv得stereoRectify函数可以得到，左右相机需要得变换矩阵Rl、Rr和投影矩阵Pl、Pr：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ret = cv2.stereoRectify(mtx_l, dist_l, mtx_r, dist_r, (img_rgb_l.shape[<span class="number">1</span>],img_rgb_l.shape[<span class="number">0</span>]), R, T)</span><br><span class="line">Rl, Rr, Pl, Pr = ret[:<span class="number">4</span>]</span><br><span class="line">Rl, Rr, Pl, Pr</span><br></pre></td></tr></table></figure>
<p>经过立体标定后，双目相机的相对位置就知道了，然后就可以进行立体矫正，在opencv中需要分两个步骤完成，通过initUndistortRectifyMap得到映<br>射关系，再使用remap函数完成矫正。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">map_l1, map_l2 = cv2.initUndistortRectifyMap(mtx_l, dist_l, Rl, Pl, (img_rgb_l.shape[<span class="number">1</span>],img_rgb_l.shape[<span class="number">0</span>]), cv2.CV_32FC1)</span><br><span class="line">map_r1, map_r2 = cv2.initUndistortRectifyMap(mtx_r, dist_r, Rr, Pr, (img_rgb_l.shape[<span class="number">1</span>],img_rgb_l.shape[<span class="number">0</span>]), cv2.CV_32FC1)</span><br><span class="line"></span><br><span class="line">reimg_l = cv2.remap(imgs_l[<span class="number">10</span>], map_l1, map_l2, cv2.INTER_LINEAR)</span><br><span class="line">reimg_r = cv2.remap(imgs_r[<span class="number">10</span>], map_r1, map_r2, cv2.INTER_LINEAR)</span><br><span class="line">dst_img_rgb = cv2.cvtColor(reimg_r, cv2.COLOR_BGR2RGB)</span><br><span class="line">plt.figure(figsize=(<span class="number">15</span>,<span class="number">15</span>))</span><br><span class="line">plt.imshow(dst_img_rgb)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>画水平线检查，立体矫正得效果。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">cav_w, cav_h = imgs_l[<span class="number">0</span>].shape[<span class="number">1</span>]//<span class="number">2</span>, imgs_l[<span class="number">0</span>].shape[<span class="number">0</span>]//<span class="number">2</span></span><br><span class="line">cavimg = np.zeros((cav_h, cav_w*<span class="number">2</span>, <span class="number">3</span>), np.uint8)</span><br><span class="line"></span><br><span class="line">reimg_l = cv2.remap(imgs_l[<span class="number">1</span>], map_l1, map_l2, cv2.INTER_LINEAR)</span><br><span class="line">reimg_r = cv2.remap(imgs_r[<span class="number">1</span>], map_r1, map_r2, cv2.INTER_LINEAR)</span><br><span class="line">     </span><br><span class="line">cavimg[:,:cav_w,:] = cv2.resize(reimg_l, (cav_w, cav_h))</span><br><span class="line">cavimg[:,cav_w:,:] = cv2.resize(reimg_r, (cav_w, cav_h))</span><br><span class="line">step = cav_h//<span class="number">10</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    rowval = i*step</span><br><span class="line">    cv2.line(cavimg, (<span class="number">0</span>, rowval), (cav_w*<span class="number">2</span>, rowval), (<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>), <span class="number">1</span>, <span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">dst_img_rgb = cv2.cvtColor(cavimg, cv2.COLOR_BGR2RGB)</span><br><span class="line">plt.figure(figsize=(<span class="number">15</span>,<span class="number">15</span>))</span><br><span class="line">plt.imshow(dst_img_rgb)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>保存和读取校准参数，opencv中有模块FileStorage来保存和读取数据，常用保存格式为yml或xml，FileStorage让矩阵的的保存和读取非常方便。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">saveCaliResult</span><span class="params">(file_name, names, params)</span>:</span></span><br><span class="line">    WRITE = <span class="number">1</span></span><br><span class="line">    f = cv2.FileStorage(file_name, WRITE)</span><br><span class="line">    <span class="keyword">for</span> name, val <span class="keyword">in</span> zip(names, params):</span><br><span class="line">        f.write(name, val)</span><br><span class="line">    f.release() </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">loadCaliResult</span><span class="params">(califile)</span>:</span></span><br><span class="line">    READ = <span class="number">0</span></span><br><span class="line">    fs = cv2.FileStorage(califile, READ)</span><br><span class="line">    mtx_l = fs.getNode(<span class="string">'mtx_l'</span>).mat()</span><br><span class="line">    mtx_r = fs.getNode(<span class="string">'mtx_r'</span>).mat()</span><br><span class="line">    dist_l = fs.getNode(<span class="string">'dist_l'</span>).mat()</span><br><span class="line">    dist_r = fs.getNode(<span class="string">'dist_r'</span>).mat()</span><br><span class="line">    Rl = fs.getNode(<span class="string">'Rl'</span>).mat()</span><br><span class="line">    Rr = fs.getNode(<span class="string">'Rr'</span>).mat()</span><br><span class="line">    Pl = fs.getNode(<span class="string">'Pl'</span>).mat()</span><br><span class="line">    Pr = fs.getNode(<span class="string">'Pr'</span>).mat()</span><br><span class="line">    fs.release()</span><br><span class="line">    <span class="keyword">return</span> mtx_l, mtx_r, dist_l, dist_r, Rl, Rr, Pl, Pr</span><br></pre></td></tr></table></figure>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="https://blog.csdn.net/u010128736/article/details/52875137" target="_blank" rel="noopener">使用OpenCV进行标定（Python）</a></li>
<li><a href="https://www.cnblogs.com/german-iris/p/5199203.html" target="_blank" rel="noopener">双摄像头立体成像(三)-畸变矫正与立体校正</a></li>
</ol>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/05/23/使用OpenCV进行相机标定/" data-id="cjqwdu4nh0033fgvdnmvzydgs" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-JupyterNotebook使用技巧" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/05/19/JupyterNotebook使用技巧/">Jupyter Notebook使用技巧</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/05/19/JupyterNotebook使用技巧/">
            <time datetime="2018-05-19T07:23:05.000Z" itemprop="datePublished">2018-05-19</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/开发工具环境/">开发工具环境</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/jupyter/">jupyter</a>, <a class="tag-link" href="/tags/markdown/">markdown</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本文的目的是总结和记录我自己在使用jupyter notebook过程中，学到的一些非常好用的功能或者容易遗忘小技巧。</p>
<h2 id="模式切换与快捷键"><a href="#模式切换与快捷键" class="headerlink" title="模式切换与快捷键"></a>模式切换与快捷键</h2><p>用了好久的jupyter notebook，才知道原来它还有两种不同的模式：<strong>命令模式</strong>和<strong>编辑模式</strong>，以下列出在模式切换和不同模式下功能的快捷键：</p>
<h4 id="式切换"><a href="#式切换" class="headerlink" title="式切换"></a>式切换</h4><ul>
<li><strong>ESC</strong>：进入命令模式</li>
<li><strong>Enter</strong>：进入编辑模式</li>
</ul>
<h4 id="模式下的常用的快捷键"><a href="#模式下的常用的快捷键" class="headerlink" title="模式下的常用的快捷键"></a>模式下的常用的快捷键</h4><ul>
<li><strong>Ctrl+Enter</strong>：运行本单元</li>
<li><strong>Shift+Enter</strong>：运行本单元，选中下个单元</li>
<li><strong>Y</strong>：转入代码状态</li>
<li><strong>M</strong>：转入makedown状态</li>
<li><strong>R</strong>：转入raw状态</li>
<li><strong>A</strong>：在上方插入新的单元</li>
<li><strong>B</strong>：在下方插入新的单元</li>
<li><strong>DD</strong>：删除单元</li>
<li><strong>Z</strong>：恢复操作</li>
<li><strong>Shift+M</strong>：合并选中的单元</li>
<li><strong>L</strong>：显示或隐藏行号</li>
<li><strong>II</strong>：中断内核</li>
<li><strong>00</strong>：重启内核</li>
</ul>
<h4 id="辑模式下的常用的快捷键"><a href="#辑模式下的常用的快捷键" class="headerlink" title="辑模式下的常用的快捷键"></a>辑模式下的常用的快捷键</h4><p>由于编辑模式下的快捷方式与其他编辑器类似，所以就不特地列出，这里只记录一个拆分单元的功能。</p>
<ul>
<li><strong>Ctrl+Shift+-</strong>：分割单元</li>
</ul>
<h2 id="激活和关闭交互式的matplotlib图标"><a href="#激活和关闭交互式的matplotlib图标" class="headerlink" title="激活和关闭交互式的matplotlib图标"></a>激活和关闭交互式的matplotlib图标</h2><p>在jupyter notebook中使用matplotlib画图，在普通情况下，只能输出图标格式化后静态的的图像，而没有交互的功能。如果我们需要交互功能需要在cell中执行如下命令：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%matplotlib notebook</span><br></pre></td></tr></table></figure>
<p>如果不再需要交互式的输出，则可以需要关闭它：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%matplotlib inline</span><br></pre></td></tr></table></figure>
<p>这种以%或者%%开头的命令叫做magic命令，查询magic命令可以使用%lsmagic来将其打印出来。</p>
<p>除了%符号，jupyter提供“！”作为unix command的前导符合，来运行shell命令，当然只针对部分命令，如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">!python --version</span><br><span class="line">!ls</span><br></pre></td></tr></table></figure>
<h2 id="在jupyter-中执行可执行文件"><a href="#在jupyter-中执行可执行文件" class="headerlink" title="在jupyter 中执行可执行文件"></a>在jupyter 中执行可执行文件</h2><p>尽管jupyter提供magic命令，但是毕竟只是少量的，那么执行第可执行文件或者cmd/bash命令可能需要通过其他方法，如下以一条复合bash命令为例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printfile</span><span class="params">(name)</span>:</span></span><br><span class="line">    lines_str = <span class="string">''</span></span><br><span class="line">    <span class="keyword">with</span> open(name, <span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        lines = f.readlines()</span><br><span class="line">        lines_str = <span class="string">''</span>.join(lines)</span><br><span class="line">    print(lines_str)</span><br><span class="line">    </span><br><span class="line">os.system(<span class="string">'ls | grep model* &gt; test.txt'</span>)</span><br><span class="line">printfile(<span class="string">'test.txt'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="为Jupyter-Notebook添加目录功能"><a href="#为Jupyter-Notebook添加目录功能" class="headerlink" title="为Jupyter Notebook添加目录功能"></a>为Jupyter Notebook添加目录功能</h2><h3 id="在jupyter中添加侧边栏目录"><a href="#在jupyter中添加侧边栏目录" class="headerlink" title="在jupyter中添加侧边栏目录"></a>在jupyter中添加侧边栏目录</h3><p>原始的Jupyter是不支持markdown添加目录功能的，不过我们可以可以利用Jupyter notebook<br>extensions去使得这种功能实现，首先安装jupyter_contrib_nbextensions：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install -c conda-forge jupyter_contrib_nbextensions</span><br></pre></td></tr></table></figure>
<p>当安装好以后就会发现jupyter上方的菜单中多出了一个Nbextensions的菜单如下图：</p>
<p><img src="/markdownImage/Nbextensions.jpg" alt="Nbextensions"></p>
<p>将Tabel of Contents勾选即可，而在Nbextension还有需要有趣的插件可以去探索。</p>
<h3 id="在文本头增目录"><a href="#在文本头增目录" class="headerlink" title="在文本头增目录"></a>在文本头增目录</h3><p>上面是使用插件生成侧边栏目录，如果只需要在文章的头部生成目录则可以用另外的方法。在纯Markdown文本中是能够使用“[TOC]”来自动生成文章头部目录的，但是在jupyter notebook的cell中无法使用，我们只能通过创建文本内部的链接，手动创建目录，如下所示：</p>
<p><img src="/markdownImage/header.jpg" alt="目录链接"></p>
<h2 id="修改jupyter的工作空间"><a href="#修改jupyter的工作空间" class="headerlink" title="修改jupyter的工作空间"></a>修改jupyter的工作空间</h2><p>修改工作空间有两种方法，一是在进入需要修改的目录中，然后在这个目录下打开jupyter，那么打开的jupyter notebook就会将当前目录做工作空间；二是修改配置文件。</p>
<p>第一种放简单灵活，是我们的首选，但是在Window下命令行启用jupyter，有时候修改工作空间是无效的，所以只能修改配置文件了。配置文件为：jupyter_notebook_config.py，如果不存在则需要手动创建，执行如下命令：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook --generate-config</span><br></pre></td></tr></table></figure>
<p>在jupyter_notebook_config.py文件中找到如下内容，并将c.NotebookApp.notebook_dir的值修改为需要指定的目录:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The directory to use for notebooks and kernels.</span></span><br><span class="line">c.NotebookApp.notebook_dir = <span class="string">u'D:\Jupyter'</span></span><br></pre></td></tr></table></figure>
<h2 id="为jupyter添加内核"><a href="#为jupyter添加内核" class="headerlink" title="为jupyter添加内核"></a>为jupyter添加内核</h2><h4 id="添加新python内核"><a href="#添加新python内核" class="headerlink" title="添加新python内核"></a>添加新python内核</h4><p>以python为例，一般可能有两种情况需要增加内核，一是系统中同时安装了不同版本的python，如python2和python3，二是使用conda等工具创建的不同的python运行环境，在这里我假定是第二种情况。</p>
<p>首先需要安装ipykernel，注意是在要添加的环境中，如下我们先创建了一个虚拟环境，然后在其中安装ipykernel：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda create -n py36-test python=<span class="number">3.6</span></span><br><span class="line">source activate py36-test</span><br><span class="line">conda install ipykernel</span><br></pre></td></tr></table></figure>
<p>然后执行如下命令，注意同样是需要在要添加的环境下，下面命令中的python指的就是你要添加的内核，–name是你指定jupyter中添加内核的名字：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m ipykernel install --name py36-test</span><br></pre></td></tr></table></figure>
<p>安装好后就可以在jupyter notebook中Kernel菜单的Change Kernel中看到</p>
<h4 id="查看和删除内核"><a href="#查看和删除内核" class="headerlink" title="查看和删除内核"></a>查看和删除内核</h4><p>查看内核：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter kernelspec list</span><br></pre></td></tr></table></figure>
<p>删除内核：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter kernelspec remove kernelname</span><br></pre></td></tr></table></figure>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/05/19/JupyterNotebook使用技巧/" data-id="cjqwdu4lq0006fgvdcw3viwqw" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-一个简单数据管理python项目教程" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/05/19/一个简单数据管理python项目教程/">一个简单数据管理python项目教程</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/05/19/一个简单数据管理python项目教程/">
            <time datetime="2018-05-19T02:34:38.000Z" itemprop="datePublished">2018-05-19</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/Qt/">Qt</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/MySQL/">MySQL</a>, <a class="tag-link" href="/tags/PyQt/">PyQt</a>, <a class="tag-link" href="/tags/Qt/">Qt</a>, <a class="tag-link" href="/tags/python/">python</a>, <a class="tag-link" href="/tags/多线程/">多线程</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>一年多以前，我在公司有段时间帮忙做过python的新手培训课程（当然是在下班后），虽然我根本就算不上python高手，但是面对对于编程一无所知的初学者我还是绰绰有余的。后面领导希望能做一个样品管理工具作为最终学习的验收成果，而这篇这文章就是我为当时项目提供一个新手教程。</p>
<p>实际上整个项目的基本设计方案也是我提供的，其功能很简单，主要是对样品自身的信息整理分类、以及样品的借入借出做一个管控和信息记录，不过项目有一些强制的要求：</p>
<ol>
<li>需要用python编写</li>
<li>需要有窗口图形界面</li>
<li>需要用数据库管理数据信息</li>
</ol>
<p>于是我也针对性的从以下三点出发做简单的介绍：</p>
<ol>
<li>python的实用基础知识</li>
<li>PyQt的使用</li>
<li>MySQL connector的使用</li>
</ol>
<p>以下就是我当时文章内容了（提到的书是指：《Python语言及其应用(美Lubanovic 2016)》）。</p>
<h2 id="1-Python基础知识"><a href="#1-Python基础知识" class="headerlink" title="1. Python基础知识"></a>1. Python基础知识</h2><h3 id="1-1-模块的导入"><a href="#1-1-模块的导入" class="headerlink" title="1.1 模块的导入"></a>1.1 模块的导入</h3><p>在python的程序中，要使用第三方模块的功能，都需要先导入该模块。关于import的部分详细说明，查看书96页。这里只提示一些注意点：</p>
<ol>
<li>使用自己写的其他python文件中的函数，也要先导入</li>
<li>导入的模块只有放在本目录与python环境中的默认目录，才能导入</li>
<li>如果需要导入其他目录的模块，可以用sys.path.append()，将这个模块的路径添加到查找路径中，就可以导入了。</li>
</ol>
<h3 id="1-2-Python的类"><a href="#1-2-Python的类" class="headerlink" title="1.2 Python的类"></a>1.2 Python的类</h3><p>在书的第6章，有整整一章的内容讲解类的知识点，所以我这里只是提示一些使用时的注意点：</p>
<ul>
<li>类用class定义，它其中的每一个成员函数和每一个成员变量都需要在其参数中加self，当使用这些函数时也需要使用self.的形式来调用：</li>
<li>类的成员变量的作用域存在于整个类，使用self.的形式可以在各个成员函数中使用</li>
<li>类中的__init__函数是类的默认初始化函数（构造函数），在类的对象被创建时自动调用，因此一些类初始操作都放在这个函数中：</li>
</ul>
<h3 id="1-3-用函数返回多个值"><a href="#1-3-用函数返回多个值" class="headerlink" title="1.3 用函数返回多个值"></a>1.3 用函数返回多个值</h3><p>在python中，函数是可以返回多个值的，当函数返回多个值时，实际上时返回的一个元组，当接收这样的返回值时除了用一个参数接收外，还可以用多个参数接收：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">testFuntion</span><span class="params">()</span>:</span></span><br><span class="line">    ret1 = <span class="string">"return data"</span></span><br><span class="line">    ret2 = <span class="number">23</span></span><br><span class="line">    ret3 = [<span class="number">23</span>,<span class="number">65</span>,<span class="number">90</span>]</span><br><span class="line">    <span class="keyword">return</span> ret1, ret2, ret3</span><br><span class="line"></span><br><span class="line">res = testFuntion()</span><br><span class="line">data1,data2,data3 = testFuntion()</span><br></pre></td></tr></table></figure>
<h3 id="1-4-Python中的线程操作"><a href="#1-4-Python中的线程操作" class="headerlink" title="1.4 Python中的线程操作"></a>1.4 Python中的线程操作</h3><p>在项目中，连接数据库可能需要很长的时间，单线程的操作很可能导致程序卡住很长时间无法响应。在这样情况下，我们一般会新创建一个线程，在线程中执行数据库连接的操作。</p>
<p>在Python中创建线程的最基本操作可以固定如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入线程模块</span></span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"></span><br><span class="line"><span class="comment"># 线程开始时执行的函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">connectThread</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'conneting'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建线程</span></span><br><span class="line">th = Thread(target=connectThread)</span><br><span class="line">th.setDaemon(<span class="keyword">True</span>)</span><br><span class="line">th.start()</span><br></pre></td></tr></table></figure>
<h2 id="2-PyQt的使用"><a href="#2-PyQt的使用" class="headerlink" title="2. PyQt的使用"></a>2. PyQt的使用</h2><h3 id="2-1-PyQt简介"><a href="#2-1-PyQt简介" class="headerlink" title="2.1 PyQt简介"></a>2.1 PyQt简介</h3><p>PyQt是Qt的Python版本，一般在Python发布版本（WinPython和Anaconda）中都会有带有，官方原生的Python则需要自己安装。原生的Qt是C++版的，当前主流Qt使用的是两个版本：Qt4和Qt5，对应Python的版本为PyQt4和PyQt5，在我们的项目中使用PyQt5。</p>
<p>使用Qt设计界面有一个很好用的工具，那就是<strong>Qt Designer</strong>。它提供可视化的界面设计环境，让能够让开发者更快速、简单的设计和布局界面。</p>
<h3 id="2-2-PyQt使用基本步骤"><a href="#2-2-PyQt使用基本步骤" class="headerlink" title="2.2 PyQt使用基本步骤"></a>2.2 PyQt使用基本步骤</h3><p>下面，我将使用PyQt生成一个最简单的窗口，通过以下代码我们可以看到，仅仅需要五个简单的步骤就可以完成。这五个步骤可以看成使用PyQt的一个固定的模式，要创建其他更复杂的窗口时，只是在此基础上稍作修改然后增加新窗口的部分代码而已。</p>
<p><em>注：在jupyter环境下，直接运行以下代码，就可以得到一个新的窗口</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一步，导入PyQt5或者它的子库</span></span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication, QMainWindow</span><br><span class="line"><span class="comment"># 第二步，创建一个Qt应用程序</span></span><br><span class="line">app = QApplication(sys.argv)</span><br><span class="line"><span class="comment"># 第三步，创建一个QMainWindow窗口</span></span><br><span class="line">mwind = QMainWindow()</span><br><span class="line"><span class="comment"># 第四步，显示创建的窗口</span></span><br><span class="line">mwind.show()</span><br><span class="line"><span class="comment"># 第五步，开启消息循环</span></span><br><span class="line">app.exec()</span><br></pre></td></tr></table></figure>
<h3 id="2-3-使用Qt-Designer设计界面"><a href="#2-3-使用Qt-Designer设计界面" class="headerlink" title="2.3 使用Qt Designer设计界面"></a>2.3 使用Qt Designer设计界面</h3><p>前面说过，Qt Designer是Qt提供的一个可视化界面设计工具，使用Qt Designer不管是布局窗口或者调整控件的大小和位置，还是增加或者删除控件，都只需要简单拖动鼠标即可。</p>
<p>Qt Designer设计的界面保存的文件，是一个XML格式后缀名以.ui结尾的文件，设计时使用到的资源（如图片）将保存为以.qrc为后缀的资源文件。当我们的代码要使用这些窗口时，需要使用Qt给定的工具将ui文件和资源转化Python代码能够使用的.py文件：</p>
<ul>
<li><strong>pyuic5.bat</strong>：将.ui文件转化为.py文件</li>
<li><strong>pyrcc5.exe</strong>：将.qrc文件转化为.py文件</li>
</ul>
<p>在Windows系统中，可以在命令行中，执行以下转化命令：</p>
<p>ui文件的转化（假定ui文件名为MainWindow.ui）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyuic5.bat -o Ui_MainWindow.py MainWindow.ui</span><br></pre></td></tr></table></figure></p>
<p>资源文件的转化（假定pyrcc5.exe的路径如下,资源文件名为res.qrc）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:\WinPython\python-3.4.4\Lib\site-packages\PyQt5\pyrcc5.exe -o res.py res.qrc</span><br></pre></td></tr></table></figure></p>
<p>当然，你可以将这些转化命令写到python代码或者bat脚本中，然后一下执行一系列的转化。另外对于PyCharm的使用者，可以使用PyCharm封装了这两个命令的菜单来执行。</p>
<h3 id="2-4-使用自己设计的窗口"><a href="#2-4-使用自己设计的窗口" class="headerlink" title="2.4 使用自己设计的窗口"></a>2.4 使用自己设计的窗口</h3><p>在2.2中生成的窗口只是Qt中默认的窗口，在实际项目中我们肯定是需要使用自己设计的窗口的，我们只需要做两步修改即可：</p>
<ol>
<li>创建一个新的窗口类（它同时继承于Qt的默认窗口和我们自己的设计的窗口），</li>
<li>将2.2中的代码，创建的窗口改为自己新建的窗口类</li>
</ol>
<p>假定我们从2.3节转化得到的窗口文件为Ui_MainWindow.py，则我们需要增加的代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建自己的窗口类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyUi</span><span class="params">(QMainWindow, Ui_MainWindow)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(MyUi, self).__init__()</span><br><span class="line">        self.setupUi(self)</span><br></pre></td></tr></table></figure>
<p>将mwind = QMainWindow()改为如下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mwind = MyUi()</span><br></pre></td></tr></table></figure>
<p><em>注：由于以上两段代码不全，所以在jupyter中不能执行</em></p>
<h3 id="2-5-在代码中使用控件"><a href="#2-5-在代码中使用控件" class="headerlink" title="2.5 在代码中使用控件"></a>2.5 在代码中使用控件</h3><p>在窗口设计中，窗口本身和窗口上分布的控件是两大不同的组成部分，窗口自身可能会有菜单栏、工具栏、状态栏，但是更丰富的功能还是需要使用控件来完成。这里例举一些常见的控件以及它对应作用：</p>
<ul>
<li>QLabel：显示文字，提示作用</li>
<li>QLineEdit：单行文字输入，输入文字作用</li>
<li>QTextEdit：多行文件输入或显示，输入文字或显示信息的作用</li>
<li>QPushButton：按钮，提供用户操作的方法</li>
<li>QRadioButton：单选输入，提供选择输入</li>
<li>QComboBox: 下拉列表的形式，提供单选输入</li>
<li>QTabelView：显示表格信息，提供表格数据显示</li>
</ul>
<p>使用控件时要注意以下几点：</p>
<ol>
<li>控件的名字：在代码使用控件都是用控件的名字，所以控件命名时在同一窗口中不能重复了</li>
<li>控件的方法：每种控件都有自己不同的作用，他们的拥有的方法也可能不一样，这个需要在Qt的官方文档中查询（如QLineEdit的页面为： <a href="http://doc.qt.io/qt-5/qlineedit.html" target="_blank" rel="noopener">http://doc.qt.io/qt-5/qlineedit.html</a>）</li>
<li>控件的消息：控件在发生改变时可能会产生消息，控件拥有消息的类型需要在官方文档对应的页面的“Singals部分”查询</li>
</ol>
<p>那么具体怎么在代码中使用这些控件呢？仍然以2.4中的例子为例，为获取QLineEdit的文字并改变其中的值，你需要在MyUi类中合适的地方加入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取名为lineEdit的QLineEdit控件的输入的文字</span></span><br><span class="line">textStr = self.text()</span><br><span class="line"><span class="comment"># 设置lineEdit的文字，为在原有输入信息的前面加上“你输入了：”</span></span><br><span class="line">self.setText(<span class="string">"你输入了："</span>+textStr)</span><br></pre></td></tr></table></figure>
<p><strong>注意：尽管每个控件的很多都不一样，但是也有一些方法是一样的，如上面所示的text()和setText()函数，很多控件或缺它的文字和设置它的文字的方法都是这两个函数</strong></p>
<p>那么又怎么让控件的信号关联到自己的消息处理函数上呢？以名为button的QPushButton为例，要处理它的用户点击消息，要在MyUi类中加入代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># OnLoginBtnClicked2是MyUi类中自己写的消息处理函数，clicked就是QPushButton控件中的一种信号，用connect可以将新号和处理函数关联起来</span></span><br><span class="line">self.button.clicked.connect(self.OnLoginBtnClicked2)</span><br></pre></td></tr></table></figure>
<h2 id="3-Python中MySQL-connector的使用"><a href="#3-Python中MySQL-connector的使用" class="headerlink" title="3. Python中MySQL connector的使用"></a>3. Python中MySQL connector的使用</h2><h3 id="3-1-MySQL-connector简介"><a href="#3-1-MySQL-connector简介" class="headerlink" title="3.1 MySQL connector简介"></a>3.1 MySQL connector简介</h3><p>在Python访问MySQL数据库需要用它的第三方库，在我们的项目中用的是mysql connector，利用它能够比较简单的实现MySQL数据库操作。一般在Python的发布版本中都自带mysql connector，官方原生的Python需要自己安装。</p>
<h3 id="3-2-MySQL-connector使用的基本流程"><a href="#3-2-MySQL-connector使用的基本流程" class="headerlink" title="3.2 MySQL connector使用的基本流程"></a>3.2 MySQL connector使用的基本流程</h3><p>以下是mysql connector使用的基本流程（测试我的本地数据库服务器，地址：127.0.0.1，用户：testuser，密码：123456，数据库：test，端口：3306）：</p>
<p><em>注：在jupyton环境下，可以直接执行，不过需要将数据库服务器的参数设置为自己实际情况的</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一步，导入mysql.connector</span></span><br><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二步，连接数据库</span></span><br><span class="line">db_server = <span class="string">'127.0.0.1'</span></span><br><span class="line">db_user = <span class="string">'testuser'</span></span><br><span class="line">db_pw = <span class="string">'123456'</span></span><br><span class="line">db_port = <span class="string">'3306'</span></span><br><span class="line">db_database = <span class="string">'test'</span></span><br><span class="line">cnx = mysql.connector.connect(user=db_user, password=db_pw, host=db_server, database=db_database,port=db_port)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第三步, 获取cursor</span></span><br><span class="line">cur = cnx.cursor()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第四步, 执行sql语句</span></span><br><span class="line">cur.execute(<span class="string">"show databases"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第五步，获取执行的结果</span></span><br><span class="line">ret = cur.fetchall()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第六步， 关闭连接</span></span><br><span class="line">cur.close()</span><br><span class="line">cnx.close()</span><br><span class="line"></span><br><span class="line">print(<span class="string">"数据库服务器有库："</span>,ret)</span><br></pre></td></tr></table></figure>
<p>从上面，我们可以看到利用mysql connector操作数据库服务器的基本流程为6步，我们可以认为上面操作是所有操作的基础。其中第二步、第三步在可以认为是数据库的连接部分，在使用数据库前一定要先连接成功。第六步是关闭数据库连接的操作，在所有数据库操作完成后执行。第四步和第五步是实际数据库操作部分，在数据库连接成功后并且在没有关闭前，可以一直执行。</p>
<p>我们对数据的操作实际上都是用sql语句去做的，而上面代码的第四步就时执行sql语句，我们只要改变execute函数中的sql语句字符串就可以将它变成执行其他功能的操作。</p>
<h3 id="3-3-MySQL-connector执行sql语句的两种类型"><a href="#3-3-MySQL-connector执行sql语句的两种类型" class="headerlink" title="3.3 MySQL connector执行sql语句的两种类型"></a>3.3 MySQL connector执行sql语句的两种类型</h3><p>使用mysql connnector执行数库语句有两种类型：</p>
<ol>
<li>对数据库进行查询，需要返回数据</li>
<li>对数据库进行修改，不需要返回数据的</li>
</ol>
<p>这两种类型，在使用mysql connector时会有稍许的差异，对应3.2中的代码中，不同的部分在第五个步骤，其他部分都一样。</p>
<p>对于第一种类型，使用fetch系列函数来获取数据：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ret = cur.fetchall()</span><br></pre></td></tr></table></figure></p>
<p>对于第二种类型，使用commit来提交修改：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnx.commit()</span><br></pre></td></tr></table></figure></p>
<h3 id="3-4-额外的sql语句知识"><a href="#3-4-额外的sql语句知识" class="headerlink" title="3.4 额外的sql语句知识"></a>3.4 额外的sql语句知识</h3><h4 id="3-4-1-条件查询"><a href="#3-4-1-条件查询" class="headerlink" title="3.4.1 条件查询"></a>3.4.1 条件查询</h4><p>使用where，可以根据条件查询得到对应的数据，如：查询用户名为“李四”的人的密码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select password from usertable where username = &quot;李四&quot;</span><br></pre></td></tr></table></figure></p>
<p>可以用and连接两个条件，如：查询用户名为“李四”同时年龄大于20的人的密码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select password from usertable where username = &quot;李四&quot; and age &gt; 20</span><br></pre></td></tr></table></figure></p>
<h4 id="3-4-2-使用数据库内置函数"><a href="#3-4-2-使用数据库内置函数" class="headerlink" title="3.4.2 使用数据库内置函数"></a>3.4.2 使用数据库内置函数</h4><p>数据库中有一些内置的函数，可以在sql语句中使用</p>
<ul>
<li>count(): 统计查询结果的个数，如：select count(username) from usertable</li>
<li>max()、min(): 计算查找结果的最大、最小的一个返回，如：select max(age) from usertable</li>
<li>length(): 计算查找的字符长度，如：select username from usertable where length(username) &lt; 6</li>
</ul>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/05/19/一个简单数据管理python项目教程/" data-id="cjqwdu4nh002ufgvdkq7bpwvf" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-cython介绍" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/05/05/cython介绍/">cython介绍</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/05/05/cython介绍/">
            <time datetime="2018-05-05T15:05:16.000Z" itemprop="datePublished">2018-05-05</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/开发工具环境/">开发工具环境</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/cython/">cython</a>, <a class="tag-link" href="/tags/jupyter/">jupyter</a>, <a class="tag-link" href="/tags/python/">python</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p><strong><em>使用cython加速慢如蜗牛的纯python代码。</em></strong></p>
<h2 id="What’s-Cython"><a href="#What’s-Cython" class="headerlink" title="What’s Cython"></a>What’s Cython</h2><p>官方解释：Cython is Python with C data types，翻译过来就是Cython是可以使用C数据类型的python。在实际使用中，Cython可以让你在纯python基础上，使用C语言的数据类型定义python的数据，然后将python<br>代码转成C代码，再将其编译为动态链接库，在其他python程序中可以像其他库一样直接import编译的Cython模块。</p>
<p>使用Cython的的优点是：</p>
<ol>
<li>能极大的加快程序的运行速度</li>
<li>能使用绝大多数python的第三方库</li>
<li>方便使用C函数和C库</li>
</ol>
<p>但是为了使用它，需要修改原始代码，虽然修改量不算很大。</p>
<h2 id="基本使用方法"><a href="#基本使用方法" class="headerlink" title="基本使用方法"></a>基本使用方法</h2><h4 id="安装Cython"><a href="#安装Cython" class="headerlink" title="安装Cython"></a>安装Cython</h4><p>Cython和python的其他第三发库一样，既可以使用pip等工具自动安装即可，也可以在官方下载安装文件手动安装。如果是使用的Anconda，那其中已经包含Cython了。</p>
<h4 id="必要文件准备"><a href="#必要文件准备" class="headerlink" title="必要文件准备"></a>必要文件准备</h4><p>Cython的使用和普通的第三方库可以直接在代码中import后就可以使用不一样，它是于pyinstaller、swig这种工具类似，除了需要在代码需要修改，还需要一些额外的操作。首先就是需要有两个python文件：</p>
<ol>
<li>从原始的python代码修改的加入了C数据类型申明的“.pyx”文件，这就是我们需要加速的python代码文件</li>
<li>setup.py文件，用于确定转换的一些配置选项，并启动Cython转换</li>
</ol>
<h4 id="pyx文件的写法"><a href="#pyx文件的写法" class="headerlink" title=".pyx文件的写法"></a>.pyx文件的写法</h4><p>.pyx文件由原始的.py文件而来，不过原始python代码也可以不做任何修改只把后缀名从“.py”变为“.pyx”，但是这样无法提高效率了。将.py文件改写成.pyx文件的主要操作就是把原有的python动态类型在使用前，先用C语言的数据类型加以声明，声明时使用“cdef”作为前缀关键字</p>
<p>如使用整型变量和整型数组时先声明如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cdef int n, i, len_p</span><br><span class="line">cdef int p[<span class="number">1000</span>]</span><br></pre></td></tr></table></figure>
<p>在使用numpy的代码中，需要注意numpy的类型声明，下面为一个比较完整的函数改写，原始代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">naive_dot</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> a.shape[<span class="number">1</span>] != b.shape[<span class="number">0</span>]:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">'shape not matched'</span>)</span><br><span class="line">    n, p, m = a.shape[<span class="number">0</span>], a.shape[<span class="number">1</span>], b.shape[<span class="number">1</span>]</span><br><span class="line">    c = np.zeros((n, m), dtype=np.float32)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> xrange(n):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> xrange(m):</span><br><span class="line">            s = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> xrange(p):</span><br><span class="line">                s += a[i, k] * b[k, j]</span><br><span class="line">            c[i, j] = s</span><br><span class="line">    <span class="keyword">return</span> c</span><br></pre></td></tr></table></figure>
<p>改写后为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">cimport numpy <span class="keyword">as</span> np</span><br><span class="line">cimport cython</span><br><span class="line"></span><br><span class="line"><span class="meta">@cython.boundscheck(False)</span></span><br><span class="line"><span class="meta">@cython.wraparound(False)</span></span><br><span class="line">cdef np.ndarray[np.float32_t, ndim=<span class="number">2</span>] _naive_dot(np.ndarray[np.float32_t, ndim=<span class="number">2</span>] a, np.ndarray[np.float32_t, ndim=<span class="number">2</span>] b):</span><br><span class="line">    cdef np.ndarray[np.float32_t, ndim=<span class="number">2</span>] c</span><br><span class="line">    cdef int n, p, m</span><br><span class="line">    cdef np.float32_t s</span><br><span class="line">    <span class="keyword">if</span> a.shape[<span class="number">1</span>] != b.shape[<span class="number">0</span>]:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">'shape not matched'</span>)</span><br><span class="line">    n, p, m = a.shape[<span class="number">0</span>], a.shape[<span class="number">1</span>], b.shape[<span class="number">1</span>]</span><br><span class="line">    c = np.zeros((n, m), dtype=np.float32)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> xrange(n):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> xrange(m):</span><br><span class="line">            s = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> xrange(p):</span><br><span class="line">                s += a[i, k] * b[k, j]</span><br><span class="line">            c[i, j] = s</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">naive_dot</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> _naive_dot(a, b)</span><br></pre></td></tr></table></figure>
<p>上面要注意如下几点：</p>
<ol>
<li>使用cimport导入numpy和cython</li>
<li>导入cython时为了调用其中的boundscheck和wraparound方法关闭边界检查，这个可选。</li>
<li>有返回值的函数定义没有了def，为了保证外部能使用，需要写个接口函数</li>
<li>函数的参数不需要“cdef”的前缀</li>
<li>numpy数组的声明需要确定形状和元素类型</li>
</ol>
<h4 id="setup-py文件写法"><a href="#setup-py文件写法" class="headerlink" title="setup.py文件写法"></a>setup.py文件写法</h4><p>最简单的setup.py文件内容如下(仅仅指定了需要转换的.pyx文件)：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> distutils.core <span class="keyword">import</span> setup</span><br><span class="line"><span class="keyword">from</span> Cython.Build <span class="keyword">import</span> cythonize</span><br><span class="line"></span><br><span class="line">setup(</span><br><span class="line">    ext_modules = cythonize(<span class="string">"helloworld.pyx"</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>稍微复杂的（加了numpy使用的）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> distutils.core <span class="keyword">import</span> setup, Extension</span><br><span class="line"><span class="keyword">from</span> Cython.Build <span class="keyword">import</span> cythonize</span><br><span class="line"><span class="keyword">import</span> numpy</span><br><span class="line">setup(ext_modules = cythonize(Extension(</span><br><span class="line">    <span class="string">'dot_cython'</span>,</span><br><span class="line">    sources=[<span class="string">'dot_cython.pyx'</span>],</span><br><span class="line">    language=<span class="string">'c'</span>,</span><br><span class="line">    include_dirs=[numpy.get_include()],</span><br><span class="line">    library_dirs=[],</span><br><span class="line">    libraries=[],</span><br><span class="line">    extra_compile_args=[],</span><br><span class="line">    extra_link_args=[]</span><br><span class="line">)))</span><br></pre></td></tr></table></figure>
<p>具体写法需要参考官方文档。</p>
<h3 id="转换流程"><a href="#转换流程" class="headerlink" title="转换流程"></a>转换流程</h3><p>在命令行中执行如下命令，就可完成转化和编译：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python setup.py build_ext --inplace</span><br></pre></td></tr></table></figure>
<p>完成后，会生成两个文件：.c文件和库文件（Windows后缀为.pyd，Linux后缀为.so）。在Windows中生成的库文件不要修改文件名，不然会无法使用。在使用时直接在python代码中欧个import库名就可以了。</p>
<h2 id="在jupyter-notebook中使用"><a href="#在jupyter-notebook中使用" class="headerlink" title="在jupyter notebook中使用"></a>在jupyter notebook中使用</h2><p>在jupyter notebook中使用Cython会简单很多，因为jupyter notebook自动帮你执行的转化的操作，但是原始代码还是需要参照Cython的要求来修改。</p>
<h4 id="使能Cython"><a href="#使能Cython" class="headerlink" title="使能Cython"></a>使能Cython</h4><p>在jupyter notebook中，使用单独的一个cell，写入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%load_ext Cython</span><br></pre></td></tr></table></figure>
<h4 id="使用cython编译"><a href="#使用cython编译" class="headerlink" title="使用cython编译"></a>使用cython编译</h4><p>在一个cell的最前面，写入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%%cython</span><br></pre></td></tr></table></figure>
<p>那个当前的cell中的代码就会使用cython来编译</p>
<h4 id="使用不同cell中Cython数据对象"><a href="#使用不同cell中Cython数据对象" class="headerlink" title="使用不同cell中Cython数据对象"></a>使用不同cell中Cython数据对象</h4><p>需要注意的是，在jupyter notebook中每个cell是独立的，在使用Cython的不同cell中，要用到其他Cython编译的cell中的数据对象，需要import：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __main__ <span class="keyword">import</span> xxx</span><br></pre></td></tr></table></figure>
<h2 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h2><ol>
<li>numpy数据引用，用[,]比[][]效率要高，普通的使用中对比不是特别明显，但是在cython编译循环语句中使用时差距就会变得非常大，甚至相差百倍: 对比二维数组赋值一个0.1s，一个0.002s</li>
<li>在cython中，有定义类型的数据和没有定义类型的数据做运算的时候，会严重拖慢速度完全起不到提速的效果，一定要对每个有参与计算的类型对象声明类型</li>
<li>在符合规范的情况下，cython编译的结果比纯python(不包含优化的第三方库)要快400多倍</li>
<li>一般n,m,k = img.shape 需要写成 n,m,k = img.shape[0], img.shape[1], img.shape[2] 才能编译成功</li>
<li>numpy赋值时new_img = np.zeros((rgb_img.shape[0],rgb_img.shape[1],rgb_img.shape[2]), dtype=np.uint16)+256，拆成new_img = np.zeros((rgb_img.shape[0],rgb_img.shape[1],rgb_img.shape[2]),dtype=np.uint16)和new_img += 256两部分效率要高</li>
<li>cython中使用numpy的数组的并行操作效率极差，要用for循环代替</li>
</ol>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/05/05/cython介绍/" data-id="cjqwdu4n1001rfgvd3sqtmnl3" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-B站新番信息爬虫设计" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/03/16/B站新番信息爬虫设计/">B站新番信息爬虫设计</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/03/16/B站新番信息爬虫设计/">
            <time datetime="2018-03-16T13:28:42.000Z" itemprop="datePublished">2018-03-16</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/web-spider/">web spider</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/python/">python</a>, <a class="tag-link" href="/tags/web-spider/">web spider</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="B站番剧播放数据"><a href="#B站番剧播放数据" class="headerlink" title="B站番剧播放数据"></a>B站番剧播放数据</h2><p>爬取B站所有正版番剧的视屏信息，当前目标需要获取如下基本数据：</p>
<ul>
<li>总的播放量、追番数、弹幕量、总集数</li>
<li>单集的播放量、追番数、硬币数、分数</li>
<li>放送年月和时间</li>
<li>番剧Tag</li>
<li>制作地区</li>
<li>声优</li>
</ul>
<p>以下为设计方案的主要流程。</p>
<h4 id="1-番剧查找"><a href="#1-番剧查找" class="headerlink" title="1. 番剧查找"></a>1. 番剧查找</h4><p>通过如下API接口，查找不同年份、季度的新番列表：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://bangumi.bilibili.com/web_api/season/index_global</span><br></pre></td></tr></table></figure>
<p>通过制定如下参数来设置引索：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">data  = &#123;</span><br><span class="line">    &apos;page&apos;:0,           # 第几页</span><br><span class="line">    &apos;page_size&apos;:20,     # 每页的数量</span><br><span class="line">    &apos;version&apos;:0,        # 类型： 全部 正片 剧场版 其他 [0 - 4]</span><br><span class="line">    &apos;is_finish&apos;:0,      # 状态： 全部 完结 连载 [0 2 1]</span><br><span class="line">    &apos;start_year&apos;:2018,  # 时间： 全部 某一年 [0 xxxx]</span><br><span class="line">    &apos;tag_id&apos;:&apos;&apos;,        # 风格</span><br><span class="line">    &apos;index_type&apos;:1,     # 排序方式: 更新时间 追番人数 开播时间 [0 - 2]</span><br><span class="line">    &apos;index_sort&apos;:0,     # 排序类型: 递减 递增 [0 - 1]</span><br><span class="line">    &apos;area&apos;:0,           # 地区: 全部 日本 美国 其他 [0 2 3 4]</span><br><span class="line">    &apos;quarter&apos;:0         # 季度： 全部 1月 4月 7月 10月 [0 - 4]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>直接使用url可以得到json数据格式如下：</p>
<p><img src="/markdownImage/bangumi_index.png" alt="bangumi index"></p>
<p>解析json数据可以得到番剧的一些基本信息，如番剧名、放松日期、和season_id、完结信息、总集数。</p>
<h4 id="2-获取总集数据和单集的aid"><a href="#2-获取总集数据和单集的aid" class="headerlink" title="2. 获取总集数据和单集的aid"></a>2. 获取总集数据和单集的aid</h4><p>为了得到更多信息和数据，我们需要利用番剧的season_id。分析网站的JS源码，我们能够找到网页前端使用了如下接口，来向服务器请求获取番剧的详细信息：</p>
<p><img src="/markdownImage/seasoninfo_api.png" alt="season infor api"></p>
<p>API格式为（中间season_id用实际值代替）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://bangumi.bilibili.com/jsonp/seasoninfo/season_id.ver?callback=seasonListCallback</span><br></pre></td></tr></table></figure>
<p>得到数据如下：</p>
<p><img src="/markdownImage/seasoninfo.png" alt="season infor"></p>
<p>解析得到详细的番剧信息，另外一个重要的就是单集番剧的aid。</p>
<h4 id="3-获取单集番剧的信息"><a href="#3-获取单集番剧的信息" class="headerlink" title="3. 获取单集番剧的信息"></a>3. 获取单集番剧的信息</h4><p>通过aid获取单个视屏的信息，这个接口在网上使用的比较广泛（xxxxxx换成实际的aid值即可）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.bilibili.com/x/web-interface/archive/stat?aid=xxxxxx</span><br></pre></td></tr></table></figure>
<p>得到json数据如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;code&quot;:0,</span><br><span class="line">    &quot;message&quot;:&quot;0&quot;,</span><br><span class="line">    &quot;ttl&quot;:1,</span><br><span class="line">    &quot;data&quot;:</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;aid&quot;:19801429,</span><br><span class="line">        &quot;view&quot;:985,</span><br><span class="line">        &quot;danmaku&quot;:8,</span><br><span class="line">        &quot;reply&quot;:8,</span><br><span class="line">        &quot;favorite&quot;:522,</span><br><span class="line">        &quot;coin&quot;:10,</span><br><span class="line">        &quot;share&quot;:9,</span><br><span class="line">        &quot;now_rank&quot;:0,</span><br><span class="line">        &quot;his_rank&quot;:0,</span><br><span class="line">        &quot;no_reprint&quot;:0,</span><br><span class="line">        &quot;copyright&quot;:2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-整合获取数据存入本地"><a href="#3-整合获取数据存入本地" class="headerlink" title="3. 整合获取数据存入本地"></a>3. 整合获取数据存入本地</h4><p>当前使用csv文件保存</p>
<h4 id="github仓库：https-github-com-HarryMei-Spider中的bilibili-spider文件夹"><a href="#github仓库：https-github-com-HarryMei-Spider中的bilibili-spider文件夹" class="headerlink" title="github仓库：https://github.com/HarryMei/Spider中的bilibili_spider文件夹"></a>github仓库：<a href="https://github.com/HarryMei/Spider" target="_blank" rel="noopener">https://github.com/HarryMei/Spider</a>中的bilibili_spider文件夹</h4>
        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/03/16/B站新番信息爬虫设计/" data-id="cjqwdu4lq0004fgvdy7o8y90b" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-搜索算法整理" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/01/17/搜索算法整理/">搜索算法整理</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/01/17/搜索算法整理/">
            <time datetime="2018-01-17T02:13:31.000Z" itemprop="datePublished">2018-01-17</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/算法/">算法</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/搜索算法/">搜索算法</a>, <a class="tag-link" href="/tags/最短路径/">最短路径</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近研究路径规划问题，看了一大堆的算法：爬山算法、模拟退火算法、深度优先搜索、广度优先搜索、Dijkstra算法、Floyd算法、A星算法、prim和kruskal算法等等等等。看得太多感觉头都有点大了，所以希望乘着这个机会把这些零散的算法整理一下。</p>
<h2 id="不同类型的搜索"><a href="#不同类型的搜索" class="headerlink" title="不同类型的搜索"></a>不同类型的搜索</h2><p>一直以来，我就没有理清楚过这些算法之间的关系，今天仔细分析，才发现原来这些算法都有一个共同的性质，那就是搜索。不过很快我又发现，我说了等于白说，因为好像绝大多数问题都是能看做是搜索问题，只不过他们搜索的对象不一样，搜索的目标不一样。所以我暂且我就以搜索为线索，从搜索对象和搜索目标这两个角度来分析。</p>
<h4 id="1-不同对象的搜索"><a href="#1-不同对象的搜索" class="headerlink" title="1. 不同对象的搜索"></a>1. 不同对象的搜索</h4><p>从搜索对象来看，我们发现针对不同的搜索对象其难易度是天差地别。我们将搜索对象抽象成我们常用的数据结构来分析：</p>
<ul>
<li>线性表：由于结构简单、所以搜索算法也简单，特别是有序的线性表，搜索效率会非常高；不过我们也要看到在存储结构上的差异，使得不同的线性表搜索的方法有所差异。如：有序的数组可以用二分查找，但是链表就只能顺序搜索了。</li>
<li>树：树的结构比线性表要复杂，所以搜索的方法也开始多而复杂起来，笼统来讲树的搜索可分两类：深度优先和广度优先。树的结构虽然复杂，但是由于其结构的灵活性和规整性，它能够综合顺序存储线性表和链式存储线性表各自的优点。因此前人发明了很多特殊结构的树，特别是平衡查找二叉树。这些特殊结构的二叉树在搜索时也可以采用通用的深度优先和广度优先，但是结合它们自身结构的特殊性质能达到更优秀的性能。</li>
<li>图：在基本的数据结构中图是最复杂的，图又有有向图、无向图、带权图等等之分。由于图也可以看做树的推广所以深度优先和广度优先也是图的通用搜索方法，但是在结构复杂的图中这种通用的方法往往效率太低，所以才出现个各种各样的图搜索算法，当然他们的搜索目标也可能不一样。</li>
</ul>
<p>另外还需要额外提及的一类搜索算法，这类算法通常不关心被测对象的特殊结构，而是以最通用目标去设计，这类算法通常被归到人工智能领域。其中上面提到的基本的深度优先和广度优先搜索就属于这一类，所以所有类型的树所有的种类图都能使用它来搜索。除了这两种最基本搜索外，还有以下两种比较常用的算法（其实属于这一类的还有很多，这里就直选两种简单的）。</p>
<ul>
<li><p><em>Hill Climbing（爬山算法）</em>：爬山算法是一种非常简单的贪心算法，该算法每次从当前解的临近解空间中选择一个最优解作为当前解，直到达到一个局部最优解。</p>
</li>
<li><p><em>Simulated Annealing（模拟退火算法）</em>：模拟退火算法对爬山算法进行了一定的优化，它除了向领域空间的更优解移动，也能提供一定几率向更差的领域空间去移动，这样能够让算法有机会跳出局部最小值。这个向更差的地方移动的概率就是模拟退火后物体温度降低的变化情况（e的指数下降），当温度越低，向更差地点移动的概率越小，温度低于下限结束搜索。模拟退火算法是一种随机算法，并不一定能找到全局的最优解，可以比较快的找到问题的近似最优解。</p>
</li>
</ul>
<h4 id="2-不同搜索的搜索"><a href="#2-不同搜索的搜索" class="headerlink" title="2. 不同搜索的搜索"></a>2. 不同搜索的搜索</h4><p>从实际问题来看搜索的目标太多了，不同的问题有不同的搜索目标，所以我就将其分类为几种常见的类型（也许不严谨但是很典型）：</p>
<ul>
<li>搜索特殊个体：如最大值、最小值等等</li>
<li>搜索特殊结构：如特定结构的字符串搜索</li>
<li>搜索特殊关系：如图的最短路径、图的最小生成树</li>
</ul>
<p>从以上可以看出图的搜索是最多样、最复杂的，但是在实际的问题中的对象往往都是以图为模型很复杂的结构，所以下面对图的各种搜索算法做详细的讨论。</p>
<h2 id="图的各种搜索算法"><a href="#图的各种搜索算法" class="headerlink" title="图的各种搜索算法"></a>图的各种搜索算法</h2><p>图的复杂性在与它其中的每一个元素（端点）与其他各个元素之间的链接关系（边），因此在图的搜索中单独搜索图中的端点是比较单一，但是只要和边以及其他端点联系起来就变得丰富多彩起来。</p>
<h4 id="1-最短路径"><a href="#1-最短路径" class="headerlink" title="1. 最短路径"></a>1. 最短路径</h4><p>最短路径问题是图在应用最常见的问题之一，最短路径问题是在图两个端点的路径搜索的基础上，加上了一个最短长度的约束。最短路径的求解有很多经典的算法，不过它们也有各自的使用条件。</p>
<ul>
<li><em>Dijkstra算法（迪杰斯特拉算法）</em>：能够求解单源最短路径，要求边的权重不能为负数，一般具有O(N2)的时间复杂度。Dijkstra算法思路是：利用贪心策略，从起点开始，向外搜索，一次搜索选择整体路径最短的端点作为新的搜索点，同时更新以搜索过的节点到起点的最短路径（在搜索过程中会依次比较，各个以搜端点一直记录当前到起点的最短路径），直到找到终点或搜索完所有端点。</li>
<li><em>Floyd算法（弗洛伊德算法）</em>：能够求解多源最短路径，多源最短路程是求任意两个端点之间的最短路径，可以正确处理负权边的问题，时间复杂度为O(N3)，空间复杂度为O(N2)。Floyd算法是典型的动态规划，它的思路是：从任意节点i到任意节点j的最短路径不外乎2种可能，1是直接从i到j，2是从i经过若干个节点k到j。所以，我们假设Dis(i,j)为节点u到节点v的最短路径的距离，对于每一个节点k，我们检查Dis(i,k) + Dis(k,j) &lt; Dis(i,j)是否成立，如果成立，证明从i到k再到j的路径比i直接到j的路径短，我们便设置Dis(i,j) = Dis(i,k) + Dis(k,j)，这样一来，当我们遍历完所有节点k，Dis(i,j)中记录的便是i到j的最短路径的距离</li>
<li><em>Bellman-Ford算法</em>：和Dijkstra算法一样处理单源最短路径问题，但是它能够解决负权边的情况，采用动态规划（Dynamic Programming）进行设计，实现的时间复杂度为 O(VxE)，其中 V 为顶点数量，E 为边的数量。其算法思路为：对每一个顶点v，设置变量dis(v)，意义是源点到v的最短路径。对每一条边做v－1次松弛操作，所谓松弛操作：对于边（u,v）如果dis(v)&gt;dis(u)+a(u,v)，那么dis(v)＝dis(u)+dis(u,v)。</li>
</ul>
<p>另外还有SPFA算法、拓扑序列算法就不都列举了。在最短路径搜索中还有一类算法式启发式的，最典型的就是A*了。</p>
<ul>
<li>A*算法 : 所谓启发式，不属于问题直接的逻辑推理，而是利用经验和其他信息来探索和尝试来解决问题。A*也可以被归到人工智能搜索的领域，不过它一般用于地图搜索居多（满足欧式几何），对于一般的图则需要更强的条件来约束，启发式的方法才能有效，搜索到的路径才能保证是最短路径。A*的启发方法是利用地图信息找到一个估计当前点到到目标点的路程函数，同时记录当前点到起始点的距离，用两者之和作为当前最优估计，从而依次找到目标点。所以总体看来，A*算法的难点在于如何选择启发式函数，通常最简单的地图搜索的启发式估计函数可以直接定义为当前点坐标到目标点坐标的直线距离。</li>
</ul>
<h3 id="2-最小生成树"><a href="#2-最小生成树" class="headerlink" title="2. 最小生成树"></a>2. 最小生成树</h3><p>图的最小生成树为题是指：在原图中去除多余的边但能保持所有结点连通的最少的边的构造，新的图是原图的子图。最小生成树可以用kruskal（克鲁斯卡尔）算法或prim（普里姆）算法求出。</p>
<ul>
<li><p><em>kruskal算法（克鲁斯卡尔算法）</em>：此算法可以称为“加边法”，初始最小生成树边数为0，每次选择最小的边，将所选边和其顶点加入到最小生成树的边集合里，然后选择次小的边加入，依次按边的权重大小选择，直到覆盖到所有的顶点。</p>
</li>
<li><p><em>prim算法（普里姆算法）</em>：此算法可以称为“加点法”，算法从某一个顶点s开始，选择与其相连接的最小的边，将边的另一个顶点加入最小树，然后以这个顶点为基点找与其相连的最短边，这样逐渐覆盖整个连通网的所有顶点。</p>
</li>
</ul>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/01/17/搜索算法整理/" data-id="cjqwdu4or005gfgvd74ecvrtg" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-双目视觉标定2——张氏标定法" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/01/05/双目视觉标定2——张氏标定法/">双目视觉标定2——张氏标定法</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/01/05/双目视觉标定2——张氏标定法/">
            <time datetime="2018-01-05T14:04:38.000Z" itemprop="datePublished">2018-01-05</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/机器视觉/">机器视觉</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/双目视觉/">双目视觉</a>, <a class="tag-link" href="/tags/张氏标定/">张氏标定</a>, <a class="tag-link" href="/tags/机器视觉/">机器视觉</a>, <a class="tag-link" href="/tags/相机标定/">相机标定</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>上一篇文章说明了其各种标定参数的作用和原理，现在看看这些参数的实际标定方法。对于双标定，我们要获取的参数是四类：内参、外参、畸变参数、立体校正参数，其中畸变参数的计算需要结合内参和外参共同优化得到，而立体校正参数可以直接由内参和外参直接计算得到，所以虽然是双目相机，但是每一个镜头各自的内参和外参的获取仍然是标定的重点。</p>
<h2 id="内参和外参的数学表示"><a href="#内参和外参的数学表示" class="headerlink" title="内参和外参的数学表示"></a>内参和外参的数学表示</h2><p>前面我们分析过相机的内参和外参的物理意义和计算原理，不过当我们计算时，为了保证其数学形式的简洁，通常使用矩阵来表示。从三维世界的坐标点到数字图像中的坐标点，其映射关系用矩阵方法可以表示为：</p>
<p><img src="http://www.forkosh.com/mathtex.cgi? \Large s_0m=K[R,T]X "></p>
<p>X是世界坐标系中的点坐标，m是数字图像中点的坐标，使用的是齐次坐标形式，K是相机的内参矩阵，R是相机相对世界坐标系的旋转矩阵、T是平移矩阵，$s_0$为缩放因子。</p>
<h3 id="1-内参矩阵"><a href="#1-内参矩阵" class="headerlink" title="1. 内参矩阵"></a>1. 内参矩阵</h3><p>相机的内参包括：两个方向的像素密度、光轴在成像平面的中心位置、相机的焦距，从上面也可以看到我们在计算中使用的是内参矩阵（Camera Intrinsics）：</p>
<p><img src="http://www.forkosh.com/mathtex.cgi? \Large 
K =
\left(\begin{array}{cc}
f_x & 0 & c_x \\
0 & f_y & c_y \\
0 & 0 & 1
\end{array}\right)
"></p>
<p>其中$f_x$为在x方向焦距长度上拥有的像素个数，$f_y$为在y方向焦距长度上拥有的像素个数，称为摄像机在x轴和y轴方向上的尺度因子，使用它可以让内参矩阵形式更加简洁。它们可以由针孔模型和图像数字化采样直接推出：</p>
<p><img src="http://www.forkosh.com/mathtex.cgi? \Large 
f_x = a_x f \\
f_y = a_y f \\
"></p>
<p>上式中$a_x$和$a_y$分别表示x方向和y方向上的像素密度，f表示相机的焦距；另外$c_x$为中心在x轴上的像素偏置，$c_y$为中心在y轴上的像素偏置。至此内参矩阵就讲所有相机内部参数都包含进去了。</p>
<p>但是在实际中，由于制造工艺的限制，传感器上横向的像素和竖向的像素排列不是绝对的垂直，所以在内参中我们需要加入一个倾斜因子s：</p>
<p><img src="http://www.forkosh.com/mathtex.cgi? \Large 
K =
\left(\begin{array}{cc}
f_x & s & u_0 \\
0 & f_y & v_0 \\
0 & 0 & 1
\end{array}\right)
"></p>
<p>不过需要注意的是，由于加入的倾斜因子，内参矩阵中个元素与相机各个参数的对应关系都要将倾斜因子考虑进去。</p>
<h3 id="2-旋转和平移的齐次表示"><a href="#2-旋转和平移的齐次表示" class="headerlink" title="2. 旋转和平移的齐次表示"></a>2. 旋转和平移的齐次表示</h3><p>R和T是相机的外参，对应相机相对世界坐标系的旋转和平移，这里可以直接用刚体的坐标表换来计算，旋转用旋转矩阵R表示，平移用平移向量T来表示。不过有时候使用齐次矩阵统一旋转矩阵和平移向量能够让计算更简洁方便。</p>
<h2 id="张正友标定法"><a href="#张正友标定法" class="headerlink" title="张正友标定法"></a>张正友标定法</h2><h3 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h3><p>相机标定主要有传统标定方法和自标定方法两类：</p>
<ul>
<li>传统标定方法需要标定参照物，参照物的参数已知，然后分析拍摄到的参照物图像，求得相机参数，传统方法操作相对复杂，但精度较高</li>
<li>自标定方法不依赖于标定参照物，只领用摄像机的运动约束或者环境的约束来进行标定，自标定方法灵活方便，但由于是非线性标定，精度和鲁棒性都不高</li>
</ul>
<p>张正有平面标定法也称张氏标定法，属于传统的标定方法。张氏标定只要求从不同的角度对同一平面拍摄2幅以上的的图像，就可以求出摄像机的内外参数。由于其平面模板（棋盘格）制作简单且不需要知道平面移动的具体的位置信息，即有穿透方法的高精度的优点、又相比其他传统的标定法要简单灵活，因此在业界得到了广泛使用。</p>
<p>标定所用的棋盘格如下,一般会将其打印出来贴在平面木板上当做标定物：</p>
<p><img src="/markdownImage/chessboard.png" alt="棋盘"></p>
<h3 id="2-单应性映射"><a href="#2-单应性映射" class="headerlink" title="2. 单应性映射"></a>2. 单应性映射</h3><p>由于我们的标定物是棋盘平面，所以棋盘平面的成像实际上是<strong>单应性映射</strong>（Homography）。那什么是单应性映射？单应性变换是同一物体在不同平面的投影，那么一个投影平面到另一个投影平面的映射关系就是单应性映射。由于单应性映射是在普通的线性变换的基础上增加了额外的约束条件，所以单应性映射会更简单：由于两个被物体都是平面，所以我们可以把变换前后的两个坐标系都建立在平面之上，那么前后两个平面的坐标都可以只用两个坐标值表示。两个平面的单应性映射关系用<strong>单应性矩阵</strong>来描叙，在张正友标定法中我们直接求得的是单应性矩阵。</p>
<p><img src="/markdownImage/Homography.jpg" alt="单应性映射"></p>
<p>单应性映射矩阵方程为：</p>
<p><img src="http://www.forkosh.com/mathtex.cgi? \Large  
\left(\begin{array}{cc}
u \\
v \\
1 
\end{array}\right)
= H\left(\begin{array}{cc}
x\\
y \\
1 
\end{array}\right)
"></p>
<p>可以看到，前后连个平面的点都只用了两个坐标值的齐次坐标表示，其中H为3x3单应性矩阵，9个元素值全部未知；不过由于是齐次方程，通常将H提取一个比例系数，让其最后一个元素值为1，只需求得8个未知数即可。每一个点对对应一个矩阵方程，一个矩阵方程对应三个方程组，但是由于是齐次方程，需要去除一个比例系数，实际上一个单应性矩阵方程只能提供两个有效的方程组，因此为了求解H，所以至少需要四个对应点。</p>
<h3 id="2-从单应性矩阵计算相机内参与外参"><a href="#2-从单应性矩阵计算相机内参与外参" class="headerlink" title="2. 从单应性矩阵计算相机内参与外参"></a>2. 从单应性矩阵计算相机内参与外参</h3><p>结合本文最开始的单个相机的成像坐标转换公式，使用单应性变换，则单应性矩阵为：</p>
<p><img src="http://www.forkosh.com/mathtex.cgi? \Large  H=[h1 h2 h3]=λK[r1 r2 t] "></p>
<p>其中K仍然是内参，λ为比例系数，r1、r2、t为外参矩阵的一部分，计算将H拆解为（h1, h2, h3）的向量，取与r1和r2相关的方程，然后结合r1和r2的两个约束条件：</p>
<ol>
<li>r1和r2位正交</li>
<li>r1和r2都为单位向量（模为1）</li>
</ol>
<p>可以得到如下两个消除了r1和r2，用来计算内参K的方程组：</p>
<p><img src="http://www.forkosh.com/mathtex.cgi? \Large 
h_1^T K^{-T} K^{-1} h_2 = 0 \\
h_1^T K^{-T} K^{-1} h_1 = h_2^T K^{-T} K^{-1} h_2
"></p>
<p>内参矩阵K有5个未知量（加入了倾斜因子），每一个单应性矩阵只能得到两个上面的方程组，所以至少需要3个不同的单应性矩阵，即相机需要拍摄棋盘格三种不同的姿态。</p>
<p>得到了内参矩阵后，外参可以直接通过以下公式推出（由之前的推导得到）：</p>
<p><img src="http://www.forkosh.com/mathtex.cgi? \Large
\lambda =\frac{1}{\|A^{-1}h_1\|}=\frac{1}{\|A^{-1}h_2\|} \\
r_1=\frac{1}{\lambda}K^{-1}h_1   \\
r_2=\frac{1}{\lambda}K^{-1}h_2   \\
r_3 = r_1 \times r_2 \\
t=\lambda K^{-1}h_3
"></p>
<h3 id="3-径向畸变估计"><a href="#3-径向畸变估计" class="headerlink" title="3. 径向畸变估计"></a>3. 径向畸变估计</h3><p>张氏标定只关注了影响大的径向畸变，根据径向畸变模型，我们有联系畸变后的联系畸变后的坐标和畸变前坐标的方程。一般为避免解非线性方程组，我们使用多个图像多个角点，使用最小二乘法，以畸变前后的坐标差异最小化为目标，迭代优化。</p>
<h3 id="4-用最大似然估计优化参数"><a href="#4-用最大似然估计优化参数" class="headerlink" title="4. 用最大似然估计优化参数"></a>4. 用最大似然估计优化参数</h3><p>在上面推导的是理想的结果，在实际成像中会受到噪声的干扰，我们认为噪声服从高斯分布，所以在张氏标定中我们用高斯分布来拟合，然后用最大似然法估计内外参数的最优结果。</p>
<p>具体做法是：</p>
<ol>
<li>求出理想的内参值</li>
<li>拍摄多幅棋盘图像，用理想的内参求出不同姿态图像的外参</li>
<li>用理想的内参和外参预测每个图像中的每个角点的成像坐标，用实际拍摄得到的坐标作为真值，可以得到每一个预测值在高斯分布下的可能的概率。</li>
<li>使用极大似然法，将所有的预测概率相乘得到似然函数</li>
<li>以理想内参为初值，迭代优化，让似然函数取得最大值</li>
</ol>
<p>中间的数学推导我就不写了，简化后最终优化的函数如下：</p>
<p><img src="http://www.forkosh.com/mathtex.cgi? \Large 
\sum^n_{i=1}\sum^m_{j=1} \| \hat{m}(K,R_i,t_i,M_{ij})-m_{ij} \|^2
"></p>
<p>上式需要让其取最小值，优化算法一般用Levenberg-Marquardt算法（一种介于牛顿法与梯度下降法之间的一种非线性优化方法）迭代求解。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>总结整个张氏标定过程包括如下步骤：</p>
<ol>
<li>打印一张棋盘格，把它贴在一个平面上，作为标定物</li>
<li>通过调整标定物或摄像机的方向，为标定物拍摄一些不同方向的照片</li>
<li>从照片中提取棋盘格角点</li>
<li>估算理想无畸变的情况下，五个内参和六个外参</li>
<li>应用最小二乘法估算实际存在径向畸变下的畸变系数</li>
<li>极大似然法，优化估计，提升估计精度</li>
</ol>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><em><a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/tr98-71.pdf" target="_blank" rel="noopener">A Flexible New Technique for Camera Calibration</a></em></li>
<li><em><a href="https://zhuanlan.zhihu.com/p/23090766" target="_blank" rel="noopener">相机的那些事儿 (三)参数标定</a></em></li>
<li><em><a href="https://wenku.baidu.com/view/56017f34f111f18583d05abe.html" target="_blank" rel="noopener">双目视觉的立体标定方法</a></em></li>
<li><em><a href="http://blog.163.com/wang_ly2442/blog/static/9494340720137552058132/" target="_blank" rel="noopener">摄像机模型与标定(4)——单应矩阵</a></em></li>
<li><em><a href="http://blog.csdn.net/u010128736/article/details/52860364" target="_blank" rel="noopener">张正友标定算法原理详解</a></em></li>
</ol>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/01/05/双目视觉标定2——张氏标定法/" data-id="cjqwdu4nw0043fgvdoxh6bb7t" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-双目视觉标定1——原理" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/12/20/双目视觉标定1——原理/">双目视觉标定1——原理</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/12/20/双目视觉标定1——原理/">
            <time datetime="2017-12-20T13:46:44.000Z" itemprop="datePublished">2017-12-20</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/机器视觉/">机器视觉</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/双目视觉/">双目视觉</a>, <a class="tag-link" href="/tags/机器视觉/">机器视觉</a>, <a class="tag-link" href="/tags/相机标定/">相机标定</a>, <a class="tag-link" href="/tags/相机模型/">相机模型</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>双目视觉定位是目前机器（机器人）等领域中使用得非常广泛的视觉定位技术，双目视觉是模拟人的视觉系统利用两个不同位置的摄像头的视差来确定物体的位置。由于有需要采集两个摄像头的图像共同参与计算，所以双目相机装配要求高、标定也比单目复杂。相机的标定是定位的基础标定，本文是我学习双目视觉标定方法的总结文档。</p>
<h2 id="为什么要标定"><a href="#为什么要标定" class="headerlink" title="为什么要标定"></a>为什么要标定</h2><p>作为初学者，我们会有疑问，什么相机需要进行标定，标定到底有什么用呢？这是因为摄像机是将三维世界投射到二维平面的设备，从三维世界的场景到二维平面的成像图像，这两者的转化存在着一种映射关系，不同的相机映射关系不同，所以他们对相同场景所成像的图像也就不同，而标定的目的就是确定相机的这种映射关系。</p>
<p>总体来说，通过标定能够确定相机的内参、外参、畸变系数这三类参数，而这些参数就是确定相机将三维世界转为二维图像的最主要因素；而双目相机还要确认两个摄像头之间的位置关系，这是双目用于计算物体位置的前提。</p>
<h2 id="相机模型"><a href="#相机模型" class="headerlink" title="相机模型"></a>相机模型</h2><p>内参、外参、畸变系数这些东西是怎么来的？那我们首先要了解一下相机的成像原理和成像过程。相机的成像是一个物理光学现象，从光学基础来讲还是比较复杂的，但是在大多数时候我们只需要关注它最核心的部分，通过构建一些简单的模型来描叙问题的核心，从而近似的还原真实的物理现象。在相机模型中，我们两类最重要的模型就是：成像模型和畸变模型。</p>
<h3 id="1-成像模型"><a href="#1-成像模型" class="headerlink" title="1. 成像模型"></a>1. 成像模型</h3><p>在成像模型里<strong>针孔模型</strong>（就是我们通常所说的小孔成像）是最常用的，它简单但有很好的描叙了相机成像的本质。下图为针孔成像示意图：</p>
<p><img src="/markdownImage/imaging.jpg" alt="针孔成像示意图"></p>
<p>在相机中透镜充当了小孔的作用:</p>
<p><img src="/markdownImage/convexmirror.jpg" alt="凸镜成像"></p>
<p>在相机的成像平面上放置的是光敏传感器，这些传感器会将成像平面上连续的图像进行采样，这样最终得到的是离散化的图像。在这里就会涉及到相机的<strong>内参</strong>：成像平面两个方向上传感器单位尺寸的像素密度、成像的中心位置和焦距，这5个参数（像素密度和中心坐标都有两个方向的值）就是我们标定中要确定的主要的内参。</p>
<p>内参一般在相机生产后就比较固定，相对而言<strong>外参</strong>则是不固定的，因为外参表示的是相机自身在三维空间中相对于给定的世界坐标的位姿，这个位姿信息包括6个参数：三个位置参数、三个姿态参数，实际上两者就是一种线性映射关系。</p>
<h3 id="2-畸变模型"><a href="#2-畸变模型" class="headerlink" title="2. 畸变模型"></a>2. 畸变模型</h3><p>实际相机用透镜的聚光特性使得投影在成像平面上的光强度更大，成像质量会更好，但是也是由于凸镜的存在也会对图像产生不好的影响，如图像的畸变。</p>
<p>畸变类型和原因，主要有以下两点：</p>
<ul>
<li>透镜自身的形状对光线传播的影响——导致径向畸变</li>
<li>在机械组装的过程中，透镜和成像平面不平行——导致切向畸变</li>
</ul>
<p>在径向畸变可分为两类，如下图所示，左边为枕形畸变、右边为桶形畸变：</p>
<p><img src="/markdownImage/distortion.jpg" alt="径向畸变"></p>
<p>可以看到径向畸变只于图像到中心的距离有关，距中心越远畸变越大。对于径向畸变我们使用与中心距离r，相关的高次多项式模型来拟合，其中$r^2 = x^2 + y^2$：</p>
<p><img src="http://www.forkosh.com/mathtex.cgi? \Large 
x_distorted = x(1+k_1 r^2+k_2 r^4+k_3 r^6) \\
y_distorted = y(1+k_1 r^2+k_2 r^4+k_3 r^6) "></p>
<p>切向畸变如下示意图：</p>
<p><img src="/markdownImage/distortion2.jpg" alt="切向畸变"></p>
<p>我们新增参数p1、p2建立如下方程来拟合：</p>
<p><img src="http://www.forkosh.com/mathtex.cgi? \Large 
x_distorted = x+2p_1 xy+p_2 (r^2+2x^2) \\
y_distorted = y+2p_2 xy+p_1 (r^2+2y^2) "></p>
<p><strong>统一两种畸变：</strong></p>
<p><img src="http://www.forkosh.com/mathtex.cgi? \Large 
x_distorted = x(1+k_1 r^2+k_2 r^4+k_3 r^6)+2p_1 xy+p_2 (r^2+2x^2) \\ 
y_distorted = y(1+k_1 r^2+k_2 r^4+k_3 r^6)+2p_2 xy+p_1 (r^2+2y^2) "></p>
<p>上面统一的畸变公式，并不是将第一种畸变的公式整体代入第二个畸变公式，而是在无畸变图像上再增加两种畸变分量，而每种畸变分量只与无畸变图像相关，所以相互之间不影响，只不过径向畸变分量是乘性的而切向畸变是加性的。</p>
<p>根据畸变模型的公式，我们可以看到<strong>畸变系数</strong>主要是5个：k1、k2、k3、p1、p2，当然在实际中我们可以灵活选择，如畸变较小的镜头可以去掉高次项。</p>
<h3 id="3-相机成像总结"><a href="#3-相机成像总结" class="headerlink" title="3. 相机成像总结"></a>3. 相机成像总结</h3><p>总体上，为了用数学描叙相机的成像，即将三维世界的物体转化为数字的图像，我们一般将其分为以下四个步骤（下图源于知乎）：</p>
<p><img src="/markdownImage/camera.jpg" alt="相机成像"></p>
<p>其中刚体变换需要用到相机的外参，透视投影需要用到针孔模型和相机内参中的焦距参数，畸变校正很显然需要使用两种畸变模型和对应的畸变系数，最后数字化图像则需要使用相机内参中剩余参数。</p>
<h2 id="双目定位几何模型"><a href="#双目定位几何模型" class="headerlink" title="双目定位几何模型"></a>双目定位几何模型</h2><p>成像模型和畸变模型是对单一镜头成像分析，而对于双目摄像头来说，它在成像的基础上还需要定位，因此需要建立一个能够计算物体位置的几何模型。</p>
<p>双目视觉的是模拟人眼，通过<strong>视差</strong>来计算物体的距离，从而得到物体的空间坐标信息，其几何模型如下图所示：</p>
<p><img src="/markdownImage/stereovision.jpg" alt="双目视觉几何模型"><br><img src="/markdownImage/stereovision2.jpg" alt="双目视觉几何模型"></p>
<p>从上图可以看到，双目立体视觉的原理很简单，通过同一物体在两个图片中的视差和两个镜头光轴间的距离（基线），利用相似三角形就可以简单求出物体的距离。但是我们也要看到，此计算的基础是：<em>两个摄像机的成像平面在同一平面上，当然为了计算简单，我们还希望两个相机的中心能水平对齐，这样我们计算视差只需要用到两个图像单个坐标方向上值</em>。</p>
<p>但是在实中是不存在完全共面的两个镜头的，所以在双目相机的标定中，我们除了确定单个相机的内外参数、对图像的畸变进行校正外，还需要对进行<strong>立体校正</strong>，立体校正的目的就是将实际中非共面对准的两个图像，校正到共面对准，注意这是对图像做的，因为相机镜头已经固定了。</p>
<p><img src="/markdownImage/stereocalibration.jpg" alt="立体校正"></p>
<p>可以看到，为了将两个图像调整到同一平面且中心水平对齐（外极线校准），我们需要知道两个摄像头的相对位置关系，具体来讲就是：旋转矩阵R和平移矩阵T，然后对应将图像做旋转和平移即可。获取立体校正的参数就是<strong>立体标定</strong>要做的工作，实际上只是对每个镜头进行前面单目标定，用单目标定的参数计算得到立体校正的参数。</p>
<p>以标定物体上的点为参考，可以分别得到左右相机的参考坐标系的坐标表达式，综合两者可以得到从左相机坐标系到右相机坐标系的转关关系，（推导下式其实是很简单的，但是网上的一些资料很少写清楚下面这个公式，有些写出来了也是不对的）：</p>
<p><img src="http://www.forkosh.com/mathtex.cgi? \Large 
R = R_r R_l^{-1} \\
T = T_r - RT_l "></p>
<p>其中，Rr、Tr、Rl、Tl都是通过单目标定得到的参数，这样我们就可以直接求出立体校正的参数。</p>
<p>到此，整个双目视觉需要标定原因、各种标定的原理就讲解完成。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><em>《视觉SLAM十四讲》——5.1 相机模型</em></li>
<li><em><a href="https://zhuanlan.zhihu.com/p/23090593" target="_blank" rel="noopener">相机的那些事儿 (二)成像模型</a></em></li>
<li><em><a href="https://www.cnblogs.com/dverdon/p/5609124.html" target="_blank" rel="noopener">双目视觉几何框架详解</a></em></li>
<li><em><a href="https://wenku.baidu.com/view/56017f34f111f18583d05abe.html" target="_blank" rel="noopener">双目视觉的立体标定方法</a></em></li>
</ol>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2017/12/20/双目视觉标定1——原理/" data-id="cjqwdu4nw0040fgvdhmvrwoa8" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-深度学习实践" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/12/12/深度学习实践/">深度学习实践</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/12/12/深度学习实践/">
            <time datetime="2017-12-12T12:21:34.000Z" itemprop="datePublished">2017-12-12</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/深度学习/">深度学习</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/deep-learning/">deep learning</a>, <a class="tag-link" href="/tags/mxnet/">mxnet</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>从开始接触mxnet的gluon教程开始，我就一直跟着官方教程自己动手做，也参加了kaggle的两个竞赛项目，到目前为止对训练调试过的神经网络是有更直观的了解和认识，对这些网络的优化和调试也多多少少有了一些的经验，所以乘着还没有忘记，赶紧总结记录出来（到目前为止做到的都是监督学习内容，所以本文也是以监督学习为对象说明）。</p>
<h2 id="使用神经网络训练的步骤"><a href="#使用神经网络训练的步骤" class="headerlink" title="使用神经网络训练的步骤"></a>使用神经网络训练的步骤</h2><p>这些天看过不少的深度神经网络的设计，也使用mxnet的gluon或者是直接手动编写过一些相对简单的网络来训练一些标准的数据集，体会最深的一点就是不管多么复杂的网络，变化的部分只是网络模型的本身，其他的部分做下来基本上都是属于同一个套路。</p>
<p>实现一个使用神经网络训练数据的项目，一般会有如下步骤：</p>
<ol>
<li>整理、导入数据，这是准备工作</li>
<li>定义网络结构和代价函数，这是算法的核心</li>
<li>训练，将数据输入网络中，循环迭代</li>
<li>测试，使用训练好的模型测试实际的数据</li>
</ol>
<p>以下会对上面四个步骤分别说明。</p>
<h2 id="数据整理和导入"><a href="#数据整理和导入" class="headerlink" title="数据整理和导入"></a>数据整理和导入</h2><p>虽然当我们在编写代码时，这只是准备性质的工作，但是在处理实际的机器学习、深度学习的问题时，数据才是核心：不同类型的数据决定了你采用哪一种算法会更好，而在实际训练时，数据的质量直接关系到最终结果的好坏。</p>
<p>深度学习需要大量的数据，然而收集大量的数据是一件很困难的事情，而这也是以前制约深度学习发展的一个很重要的因素。所幸的是，在大数据的今天，数据的收集和存储已经方便很多，对我们普通学习者而言更有利的是，前人已经整理出了不少标准的数据库提供我们使用和研究，如我所用过的：MNIST（手写数字图像）、FishionMNIST（服装图像）、CIFAR-10图像数据集。</p>
<p>在数据整理和导入时，有以下几点要注意。</p>
<h3 id="1-图像数据的整理"><a href="#1-图像数据的整理" class="headerlink" title="1.  图像数据的整理"></a>1.  图像数据的整理</h3><p>对于图像数据在整理时，训练的数据为了方便导入，一般都是根据类别新建文件夹，各自存放各自的的类型。像mxnet就很提供的图像文件夹导入函数接口，可以很方便的导入图片数据和标签。</p>
<h3 id="2-一些预处理方法"><a href="#2-一些预处理方法" class="headerlink" title="2. 一些预处理方法"></a>2. 一些预处理方法</h3><p>对于非图像类的原始数据，可能有：无效数据Nan，数据属性取值范围相差过大等等问题。这是我们往往需要做预处理，这就属于数据处理方面的内容了，很多数据处理的方法可以使用。</p>
<ul>
<li>对于无效数据：我们可以自己差值补全（如插平均值），如果属性Nan值过多，直接删掉也可以这一列</li>
<li>对于属性值范围差异大的问题：对数据做归一化(或者说是标准化)处理</li>
</ul>
<p>在归一化处理时：对于连续数值型的数据归一化，通常选择减平均值除以标准差的方法——<code>(x-x.mean())/x.std())</code>；在处理非数值非连续型的数据时，直接使用one-hot coding进行编码将一个属性变为多个0、1的属性，这样做的原因是可以统一用欧氏距离来评价数据点位置的远近。</p>
<h2 id="定义网络模型和代价函数"><a href="#定义网络模型和代价函数" class="headerlink" title="定义网络模型和代价函数"></a>定义网络模型和代价函数</h2><p>目前，我所接触到的神经网络层类型有两种：全连接层或卷积模块，我们定义网络就是将这些层或者模块叠加组合起来。在最简单的单层全连接网络的时候，我有用python手动编写，这在有提供矩阵运算的编程语言中实现是比较简单：</p>
<ul>
<li>直接用矩阵运算的线性方程组表示网络</li>
<li>根据问题定义代价函数</li>
<li>编写使用微分法求近似偏导函数</li>
<li>编写梯度下降（或随机梯度下降）函数</li>
</ul>
<p>以上，虽然后面两点都是优化的内容，但是我还是觉得把这些核心算法放在一起比较好。</p>
<h3 id="1-使用深度学习框架的原因"><a href="#1-使用深度学习框架的原因" class="headerlink" title="1. 使用深度学习框架的原因"></a>1. 使用深度学习框架的原因</h3><p>单层全连接网络可以简单的手动实现，主要还是网络结构简单，求偏导容易。复杂的网络结构就不方便手动编写了，最好是借助各种深度学习框架，这些框架都有自动求导功能，这些基于计算图的求导更准确，且借助BP算法能够计算更深层次网络节点的偏导。另外一点就是复杂的模型，定义其本身就很麻烦，如深层的卷积神经网络，每一层的权重参数、卷积核的大小都需要自己指定这些参数且相互之间还有影响，输入的图片经过这一层一层的网络，形状不断的在改变，而这些网络的参数本身就很让人混淆，再经过一系列变换，就更难确定了。</p>
<h3 id="2-代价函数"><a href="#2-代价函数" class="headerlink" title="2. 代价函数"></a>2. 代价函数</h3><p>代价函数（Cost Fuction）也可能被称为损失函数（Loss Function），是我们衡量模型预测准确性的衡量的方法，虽然对于不同的问题类型和算法模型可能需要考虑设计不同的代价函数，不过实际代价函数除了需要能够表示预测和真实之间的差距外，还需要考虑要方便做最小化优化，因此常用的代价函数也就并不多。对于回归问题，最常用的代价函数就是均方差了，而对与分类问题最常用的是softmax交叉熵。</p>
<h3 id="3-梯度下降和随机梯度下降（SGD）"><a href="#3-梯度下降和随机梯度下降（SGD）" class="headerlink" title="3. 梯度下降和随机梯度下降（SGD）"></a>3. 梯度下降和随机梯度下降（SGD）</h3><p>说起优化算法，梯度下降应该算是最简单最经典的吧，虽然有更高级的优化算法存在，但是梯度下降仍然是得非常广泛。不过在实际中梯度下降一般都是以随机梯度下降的形式来使用的。随机梯度下降是梯度下降应用的一种形式，相比普通的梯度下降算法以整个数据集作为输入来作为优化对象（批梯度下降），他每次迭代只在数据集中随机选取一部分输入来优化，它的收敛会更快。</p>
<h3 id="4-正规方程"><a href="#4-正规方程" class="headerlink" title="4. 正规方程"></a>4. 正规方程</h3><p>当然优化的方法，除了像梯度下降这样逐步迭代，一步一步逼近到最有解，还有可以用解析法直接求解线性方程，不过在基本上都是非线性的深度学习中就不适用了，即使在线性回归这样的简单机器学习问题中，我们也得考虑：输入矩阵是否可逆、求逆计算量大小的问题。</p>
<h2 id="训练与测试"><a href="#训练与测试" class="headerlink" title="训练与测试"></a>训练与测试</h2><h3 id="1-泛化能力的测试"><a href="#1-泛化能力的测试" class="headerlink" title="1. 泛化能力的测试"></a>1. 泛化能力的测试</h3><p>基本上所有的机器学习和深度学习都需要考虑一个问题，那就是模型的泛化能力，它是以判断一个模型好坏一个最重要的标准。为了测试模型的泛化能力，我们通常会将整个过程分为两个步骤：训练、测试。训练是指在训练集上不断循环迭代的使用优化算法将代价函数结果的值不断降低，测试是用训练好的模型测试一批已知结果的数据，检查模型的精度，我们希望模型在测试中的结果能够和在训练中的结果尽量的接近。</p>
<p>训练的数据和测试的数据集通常是不重合的，所以我们需要将原始的输入数据集划分为：训练集和测试集。这其中有不少方法，不过最基本最简单的就是，从原始数据集中按比例随机采样出一部分作为测试集用（通常训练集占绝大多数，测试集占小部分）。在花费时间可以接受的情况下，也可以采取K折验证法，即把原始的数据集随机分成相等的K份，每次取一份作为测试集，其他作为训练集，重复K次让测试集能够选完所有的份数。当然这样时间的开销就比之前多了K倍。</p>
<h3 id="2-过拟合"><a href="#2-过拟合" class="headerlink" title="2. 过拟合"></a>2. 过拟合</h3><p>导致模型泛化能力弱的很大一部分原因来自过拟合，过拟合的现象就是，模型在训练集上表现非常好，但是在测试集上表现很差。导致过拟合的原理比较多，如：原始数据集量太小，模型过于复杂等。过拟合的情况非常常见，基本上调过机器学习/深度学习算法的可定会遇到它，不过对于过拟合，我们也有很多方法来降低它的影响。</p>
<ul>
<li>Data Augmentation：数据增强，人工增加训练集的大小. 通过平移, 翻转, 加噪声等方法从已有数据中创造出一批”新”的数据</li>
<li>Regularization：正则化，通过在Loss Function 后面加上正则项可以抑制过拟合的产生，常见的如L0, L1, L2，他们能够减小大多数特征的影响来，而将影响集中到少数特征上 缺点是引入了一个需要手动调整的hyper-parameter</li>
<li>Dropout：这也是一种正则化手段. 不过跟以上不同的是它通过随机将部分神经元的输出置零来实现</li>
</ul>
<h3 id="3-GPU并行训练"><a href="#3-GPU并行训练" class="headerlink" title="3. GPU并行训练"></a>3. GPU并行训练</h3><p>当模型复杂、数据量大的时候，你会深深感受到GPU的可贵，在做cifar-10的实验的时候，我用CPU训练一次迭代就要半个多小时，换上GPU时间立刻缩短到1分半钟。能够很方便的使用GPU、甚至多GPU并行训练，这也是使用深度学习框架很大的优点。</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2017/12/12/深度学习实践/" data-id="cjqwdu4pn0069fgvdzd1w56ui" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-初识DeepLearning" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/12/10/初识DeepLearning/">初识Deep Learning</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/12/10/初识DeepLearning/">
            <time datetime="2017-12-10T09:04:02.000Z" itemprop="datePublished">2017-12-10</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/深度学习/">深度学习</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/AI/">AI</a>, <a class="tag-link" href="/tags/deep-learning/">deep learning</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>“学而不思则罔，思而不学则殆”，最近一直是一股老儿的接触新知识，我觉得有必要做一下梳理了，再不消化一下，也许就得撑死了。于是借助《Deep Learning》一书的引言部分，对最近看到的人工智能相关概念做一个小结。</p>
<h2 id="从人工智能到深度学习"><a href="#从人工智能到深度学习" class="headerlink" title="从人工智能到深度学习"></a>从人工智能到深度学习</h2><p>赶上这两年的AI热，我最近也一直在看这方面的书籍和资料，面对当前五花八门的新概念新名词，是既然让人既兴奋又困惑，兴奋的是自己能够了解到当前计算机人工智能领域最新的进展和进步，困惑的是这些看似相关性不大的概念名字是怎么和人工智能联系在一起的呢？要了解这些，有必要粗略回顾一下人工智能的发展历史。</p>
<p>实际上，创造能自主思考的机器是人类很早的梦想了，不够那时候还是只是一个美好的幻想，但是计算机的出现让这样的幻想有了实现的可能。</p>
<p>作为软件人员，我们知道，一直以来计算机软件的设计思路都是，开发人员需要深入理解要解决的问题，将该问题设计出一套规则和逻辑来解决，而早期的人工智能也正是沿着这种思想。这种基于<strong>知识和规则</strong>达到智能的方法，希望将世界的知识用形式化的语言进行硬编码，让计算机可以使用逻辑推理规则来自动地理解这些形式化语言中的声明，从而做出推断和决定。在《Deep Learning》一书中有提到基于人工智能的<strong>知识库（knowledge base）</strong>的Cyc项目尝试理解现实世界，但是将“Fred正拿着一个电动剃须刀”这样很简单情形推断出“Fred在刮胡子的时候是否仍然是一个人”结论。实际上对人来说，要设计出一套复杂的形式化规则能够像数学公式一样精确地描述世界来说太难了。</p>
<p>而其后，研究者们开始转向，他们希望AI系统能够自己从原始数据中提取模式、发现规则。从我个人的观点来看，这种思维方式转变是非常关键的，它让我们从一个传统的软件开发人员转向一个数据挖掘者。而这就是<strong>机器学习</strong>，机器学习在特定的问题领域很有用，因此在当前的被广泛的使用。然而，简单的机器学习仍然脱离不了人对原始数据的规整，机器学习所需要的数据输入时，需要人选取一系列能描叙实际情况的特征的集合来表示现实世界的情况，对原始数据表示的方法不同直接决定了后面机器学习的好坏。而面对现实世界的各种情况，机器学习是无法直接处理的。</p>
<p>然而，很多时候我们并不知道要选用哪些特征来表示原始数据会更好，为了解决这个问题，研究者们再了进一步，他们希望机器能自己挖掘表示本身，自己选择事物的描叙特征，这被称为<strong>表示学习</strong>。世界上表示学习也是通过机器学习的方法来学习表示，不过学习到的表示往往比手动设计的表示表现得更好，并且它们只需最少的人工干预，就能让AI系统迅速适应新的任务。</p>
<p>在一些环境复杂的系统中，要提取特征，需要高层次的抽象，在这种情况下简单的表示学习就没法做到的。在这里<strong>深度学习</strong>，多层抽象，先学习较简单的表示，然后用简单的表示来构建更复杂的表示。下图为《Deep Learning》中一个深层网络的示意图：</p>
<p><img src="/markdownImage/deepnet.png" alt=""></p>
<p>从以上可以看到，深度学习相比浅层的表示学习的“深”至少有两层含义：一是实际计算图层次变深，二是在学习的过程中，不同的层学习的对象有了明显功能的差异，高层的的网络能够对低层次的网络学到的结果基础上再进行学习。</p>
<p>至此，关于机器学习、表示学习、深度学习之间的关系，我们大致已经清楚，借助《Deep Learning》书中的维恩图能够更清晰的展示：</p>
<p><img src="/markdownImage/ai.png" alt=""></p>
<p>从上面的人工智能技术的发展，能够看到，深度学习是当前人工智能领域最前沿的技术。对于深度学习，在《Deep Learning》书中总结的很好：</p>
<blockquote>
<p>深度学习是通向人工智能的途径之一。具体来说，它是机器学习的一种，一种能够使计算机系统从经验和数据中得到提高的技术。我们坚信机器学习可以构建出在复杂实际环境下运行的 AI 系统，并且是唯一切实可行的方法。深度学习是一种特定类型的机器学习，具有强大的能力和灵活性，它将大千世界表示为嵌套的层次概念体系。</p>
</blockquote>
<h2 id="学习心得"><a href="#学习心得" class="headerlink" title="学习心得"></a>学习心得</h2><p>实际上，我接触机器学习已经有很长的时间了，但是只到最近才感觉自己刚刚入门，这些天里能够对这些概念有进一步的理解的原因，我想主要是一下两方面：</p>
<ul>
<li>第一是，对线性代数、概率论与数理统计等基本数学学科的补习</li>
<li>第二是，真正自己动手对简单机器学习算法的编码实现和验证</li>
</ul>
<p>这让我再次深刻理解到了，数学是各们学科、技术的基础，也知道了那些看似很高端很先进的技术其实不一定用了很深入的数学理论。对我这种数学基础稍差的人来说，针对性的补习一下数学的基础对机器学习/深度学习理解是有非常大的帮助，同时也要相信那些高大上的名词其背后的数学原因实际上是相对简单，所以不要一开始就被吓唬住了。</p>
<p>虽然，数学基础的补习让那些曾经困扰我许久的问题得到解决，但是直到我真正动手一步一步的实现一个最简单的算法的时候，我才感觉真正步入了机器学习/深度学习的大门。从最简单的线性回归，到softmax的多分类器，再到浅层前馈神经网络——多层感知机，基本上也是沿着前人曾经探索的道路前进，虽然大多都只是百来行python代码（使用框架模型后更少），但是却让我能够深入真正体会它的方法原理和实际性能以及不足和缺陷。</p>
<h2 id="后面的学习方向"><a href="#后面的学习方向" class="headerlink" title="后面的学习方向"></a>后面的学习方向</h2><p>由于我主要的兴趣点在图像上，所以未来的学习方向应该会集中在各种卷积神经网路上。对我来说道路还很漫长，前面实现过的算法，基本上还是传统的机器学习的范畴，从卷积神经网路开始才慢慢踏入深度学习的领域。</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2017/12/10/初识DeepLearning/" data-id="cjqwdu4nw003sfgvd2ydn5oq6" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/2/">&laquo; Anterior</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/4/">Siguiente  &raquo;</a>
    </nav>
</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">Recientes</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/01/14/图像相似度判断方法/" class="thumbnail">
    
    
        <span style="background-image:url(/markdownImage/sim.png)" alt="图像相似度判断方法" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/图像处理/">图像处理</a></p>
                            <p class="item-title"><a href="/2019/01/14/图像相似度判断方法/" class="title">图像相似度判断方法</a></p>
                            <p class="item-date"><time datetime="2019-01-14T14:26:46.000Z" itemprop="datePublished">2019-01-14</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/01/14/图像算法基本算子总结/" class="thumbnail">
    
    
        <span style="background-image:url(/markdownImage/sim.png)" alt="图像算法基本算子总结" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/图像处理/">图像处理</a></p>
                            <p class="item-title"><a href="/2019/01/14/图像算法基本算子总结/" class="title">图像算法基本算子总结</a></p>
                            <p class="item-date"><time datetime="2019-01-14T13:37:59.000Z" itemprop="datePublished">2019-01-14</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/01/14/求连通域算法/" class="thumbnail">
    
    
        <span style="background-image:url(/markdownImage/newton_method.gif)" alt="求连通域算法" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/图像处理/">图像处理</a></p>
                            <p class="item-title"><a href="/2019/01/14/求连通域算法/" class="title">求连通域算法</a></p>
                            <p class="item-date"><time datetime="2019-01-14T12:56:33.000Z" itemprop="datePublished">2019-01-14</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/01/14/牛顿法的推导/" class="thumbnail">
    
    
        <span style="background-image:url(/markdownImage/newton_method.gif)" alt="牛顿法的推导" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/机器学习/">机器学习</a></p>
                            <p class="item-title"><a href="/2019/01/14/牛顿法的推导/" class="title">牛顿法的推导</a></p>
                            <p class="item-date"><time datetime="2019-01-14T12:31:49.000Z" itemprop="datePublished">2019-01-14</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/12/25/RCNN网络的认识/" class="thumbnail">
    
    
        <span style="background-image:url(/markdownImage/rcnn.png)" alt="RCNN网络的认识" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/深度学习/">深度学习</a></p>
                            <p class="item-title"><a href="/2018/12/25/RCNN网络的认识/" class="title">RCNN网络的认识</a></p>
                            <p class="item-date"><time datetime="2018-12-25T12:47:25.000Z" itemprop="datePublished">2018-12-25</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">Categorias</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a><span class="category-list-count">81</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/3D技术/">3D技术</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/OpenGL/">OpenGL</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/OpenNI/">OpenNI</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/Qt/">Qt</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/SLAM/">SLAM</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/WPF/">WPF</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/hexo/">hexo</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/web-spider/">web spider</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/其他/">其他</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/前端/">前端</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/图像处理/">图像处理</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/多线程-多进程/">多线程/多进程</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/嵌入式/">嵌入式</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/开发工具环境/">开发工具环境</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/数据可视化/">数据可视化</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/数据库/">数据库</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/机器学习/">机器学习</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/机器视觉/">机器视觉</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/深度学习/">深度学习</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/算法/">算法</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/虚拟现实/">虚拟现实</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂谈/">杂谈</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/杂谈/Minecraft/">Minecraft</a><span class="category-list-count">1</span></li></ul></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">Archivos</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a><span class="archive-list-count">7</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">Etiquetas</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/3D深度传感器/">3D深度传感器</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AI/">AI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AR/">AR</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Adam/">Adam</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Assimp/">Assimp</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BP算法/">BP算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C#</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CNN/">CNN</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EMA/">EMA</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EM算法/">EM算法</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FCN/">FCN</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GLAD/">GLAD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GLFW/">GLFW</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GLUT/">GLUT</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GMM/">GMM</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/InnoDB/">InnoDB</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MIZ702N/">MIZ702N</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MOOC/">MOOC</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Minecraft/">Minecraft</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Momentum/">Momentum</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenCV/">OpenCV</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenGL/">OpenGL</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenNI/">OpenNI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PIL/">PIL</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PyQt/">PyQt</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Qt/">Qt</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Qt-Designer/">Qt Designer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RCNN/">RCNN</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RMSprop/">RMSprop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SGD/">SGD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SLAM/">SLAM</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSIM/">SSIM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/STN/">STN</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shader/">Shader</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spatial-Transformer-Network/">Spatial Transformer Network</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unity3D/">Unity3D</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VR/">VR</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VS/">VS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WPF/">WPF</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XAMPP/">XAMPP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ZYNQ7000/">ZYNQ7000</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/anaconda/">anaconda</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/arm-liunx-gcc/">arm-liunx-gcc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/">c</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cmake/">cmake</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/conda/">conda</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cython/">cython</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deep-learning/">deep learning</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gluon/">gluon</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/human-visual-system/">human visual system</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jupyter/">jupyter</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/keras/">keras</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k邻近算法/">k邻近算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/matplotlib/">matplotlib</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mxnet/">mxnet</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/numpy/">numpy</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openCV/">openCV</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opencv/">opencv</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phpMyAdmin/">phpMyAdmin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pip/">pip</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pyassimp/">pyassimp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pyinstaller/">pyinstaller</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pyqt/">pyqt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">22</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scrapy/">scrapy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sobel算子/">sobel算子</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime/">sublime</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swig/">swig</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tensorflow/">tensorflow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web-spider/">web spider</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xpath/">xpath</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/优化算法/">优化算法</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/决策树/">决策树</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/博客/">博客</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/双目视觉/">双目视觉</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/图像处理/">图像处理</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/图像特征点/">图像特征点</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/基础矩阵/">基础矩阵</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多线程/">多线程</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/学习总结/">学习总结</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/对极几何/">对极几何</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/嵌入式/">嵌入式</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/巴氏距离/">巴氏距离</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/张氏标定/">张氏标定</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/感知哈希方法/">感知哈希方法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/拉普拉斯算子/">拉普拉斯算子</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搜索算法/">搜索算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/摄像头/">摄像头</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最大公约数/">最大公约数</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最短路径/">最短路径</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/本质矩阵/">本质矩阵</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/机器学习/">机器学习</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/机器视觉/">机器视觉</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树莓派/">树莓派</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/梯度下降/">梯度下降</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/梯度下降算法/">梯度下降算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/概率论/">概率论</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/欧几里德算法/">欧几里德算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/汉明距离/">汉明距离</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/深度学习/">深度学习</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/渲染pipeline/">渲染pipeline</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/游戏/">游戏</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/牛顿法/">牛顿法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/物体检测/">物体检测</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/直方图/">直方图</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/相似度/">相似度</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/相机标定/">相机标定</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/相机模型/">相机模型</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/神经网络/">神经网络</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/空间变换/">空间变换</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/纹理/">纹理</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/蒙特卡洛算法/">蒙特卡洛算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/虚拟机/">虚拟机</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/语义分割/">语义分割</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/调试/">调试</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/软件设计/">软件设计</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/连通域/">连通域</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/链式求导/">链式求导</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/驱动开发/">驱动开发</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高斯拉普拉斯算子/">高斯拉普拉斯算子</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高斯模糊/">高斯模糊</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高斯混合模型/">高斯混合模型</a><span class="tag-list-count">2</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">Nube de etiquetas</h3>
        <div class="widget tagcloud">
            <a href="/tags/3D深度传感器/" style="font-size: 10px;">3D深度传感器</a> <a href="/tags/AI/" style="font-size: 10px;">AI</a> <a href="/tags/AR/" style="font-size: 10px;">AR</a> <a href="/tags/Adam/" style="font-size: 10px;">Adam</a> <a href="/tags/Assimp/" style="font-size: 11.25px;">Assimp</a> <a href="/tags/BP算法/" style="font-size: 10px;">BP算法</a> <a href="/tags/C/" style="font-size: 11.25px;">C#</a> <a href="/tags/C/" style="font-size: 15px;">C++</a> <a href="/tags/CNN/" style="font-size: 11.25px;">CNN</a> <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/EMA/" style="font-size: 10px;">EMA</a> <a href="/tags/EM算法/" style="font-size: 11.25px;">EM算法</a> <a href="/tags/FCN/" style="font-size: 10px;">FCN</a> <a href="/tags/GLAD/" style="font-size: 10px;">GLAD</a> <a href="/tags/GLFW/" style="font-size: 10px;">GLFW</a> <a href="/tags/GLUT/" style="font-size: 10px;">GLUT</a> <a href="/tags/GMM/" style="font-size: 11.25px;">GMM</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/InnoDB/" style="font-size: 10px;">InnoDB</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/MIZ702N/" style="font-size: 12.5px;">MIZ702N</a> <a href="/tags/MOOC/" style="font-size: 17.5px;">MOOC</a> <a href="/tags/Minecraft/" style="font-size: 10px;">Minecraft</a> <a href="/tags/Momentum/" style="font-size: 10px;">Momentum</a> <a href="/tags/MySQL/" style="font-size: 15px;">MySQL</a> <a href="/tags/OpenCV/" style="font-size: 10px;">OpenCV</a> <a href="/tags/OpenGL/" style="font-size: 13.75px;">OpenGL</a> <a href="/tags/OpenNI/" style="font-size: 10px;">OpenNI</a> <a href="/tags/PIL/" style="font-size: 11.25px;">PIL</a> <a href="/tags/PyQt/" style="font-size: 11.25px;">PyQt</a> <a href="/tags/Qt/" style="font-size: 16.25px;">Qt</a> <a href="/tags/Qt-Designer/" style="font-size: 10px;">Qt Designer</a> <a href="/tags/RCNN/" style="font-size: 10px;">RCNN</a> <a href="/tags/RMSprop/" style="font-size: 10px;">RMSprop</a> <a href="/tags/SGD/" style="font-size: 10px;">SGD</a> <a href="/tags/SLAM/" style="font-size: 11.25px;">SLAM</a> <a href="/tags/SSIM/" style="font-size: 10px;">SSIM</a> <a href="/tags/STN/" style="font-size: 10px;">STN</a> <a href="/tags/Shader/" style="font-size: 12.5px;">Shader</a> <a href="/tags/Spatial-Transformer-Network/" style="font-size: 10px;">Spatial Transformer Network</a> <a href="/tags/Unity3D/" style="font-size: 11.25px;">Unity3D</a> <a href="/tags/VR/" style="font-size: 10px;">VR</a> <a href="/tags/VS/" style="font-size: 11.25px;">VS</a> <a href="/tags/WPF/" style="font-size: 11.25px;">WPF</a> <a href="/tags/XAMPP/" style="font-size: 10px;">XAMPP</a> <a href="/tags/ZYNQ7000/" style="font-size: 12.5px;">ZYNQ7000</a> <a href="/tags/anaconda/" style="font-size: 10px;">anaconda</a> <a href="/tags/arm-liunx-gcc/" style="font-size: 10px;">arm-liunx-gcc</a> <a href="/tags/c/" style="font-size: 10px;">c</a> <a href="/tags/cmake/" style="font-size: 10px;">cmake</a> <a href="/tags/conda/" style="font-size: 10px;">conda</a> <a href="/tags/cython/" style="font-size: 10px;">cython</a> <a href="/tags/deep-learning/" style="font-size: 15px;">deep learning</a> <a href="/tags/gluon/" style="font-size: 10px;">gluon</a> <a href="/tags/hexo/" style="font-size: 12.5px;">hexo</a> <a href="/tags/human-visual-system/" style="font-size: 10px;">human visual system</a> <a href="/tags/jupyter/" style="font-size: 12.5px;">jupyter</a> <a href="/tags/keras/" style="font-size: 10px;">keras</a> <a href="/tags/k邻近算法/" style="font-size: 10px;">k邻近算法</a> <a href="/tags/markdown/" style="font-size: 11.25px;">markdown</a> <a href="/tags/matplotlib/" style="font-size: 11.25px;">matplotlib</a> <a href="/tags/mxnet/" style="font-size: 11.25px;">mxnet</a> <a href="/tags/numpy/" style="font-size: 13.75px;">numpy</a> <a href="/tags/openCV/" style="font-size: 13.75px;">openCV</a> <a href="/tags/opencv/" style="font-size: 10px;">opencv</a> <a href="/tags/phpMyAdmin/" style="font-size: 10px;">phpMyAdmin</a> <a href="/tags/pip/" style="font-size: 10px;">pip</a> <a href="/tags/pyassimp/" style="font-size: 10px;">pyassimp</a> <a href="/tags/pyinstaller/" style="font-size: 10px;">pyinstaller</a> <a href="/tags/pyqt/" style="font-size: 10px;">pyqt</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/scrapy/" style="font-size: 10px;">scrapy</a> <a href="/tags/sobel算子/" style="font-size: 10px;">sobel算子</a> <a href="/tags/sublime/" style="font-size: 10px;">sublime</a> <a href="/tags/swig/" style="font-size: 10px;">swig</a> <a href="/tags/tensorflow/" style="font-size: 10px;">tensorflow</a> <a href="/tags/web-spider/" style="font-size: 11.25px;">web spider</a> <a href="/tags/xpath/" style="font-size: 10px;">xpath</a> <a href="/tags/优化算法/" style="font-size: 11.25px;">优化算法</a> <a href="/tags/决策树/" style="font-size: 10px;">决策树</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a> <a href="/tags/博客/" style="font-size: 13.75px;">博客</a> <a href="/tags/双目视觉/" style="font-size: 13.75px;">双目视觉</a> <a href="/tags/图像处理/" style="font-size: 18.75px;">图像处理</a> <a href="/tags/图像特征点/" style="font-size: 10px;">图像特征点</a> <a href="/tags/基础矩阵/" style="font-size: 10px;">基础矩阵</a> <a href="/tags/多线程/" style="font-size: 11.25px;">多线程</a> <a href="/tags/学习总结/" style="font-size: 11.25px;">学习总结</a> <a href="/tags/对极几何/" style="font-size: 10px;">对极几何</a> <a href="/tags/嵌入式/" style="font-size: 15px;">嵌入式</a> <a href="/tags/巴氏距离/" style="font-size: 10px;">巴氏距离</a> <a href="/tags/张氏标定/" style="font-size: 11.25px;">张氏标定</a> <a href="/tags/感知哈希方法/" style="font-size: 10px;">感知哈希方法</a> <a href="/tags/拉普拉斯算子/" style="font-size: 10px;">拉普拉斯算子</a> <a href="/tags/搜索算法/" style="font-size: 10px;">搜索算法</a> <a href="/tags/摄像头/" style="font-size: 10px;">摄像头</a> <a href="/tags/最大公约数/" style="font-size: 10px;">最大公约数</a> <a href="/tags/最短路径/" style="font-size: 10px;">最短路径</a> <a href="/tags/本质矩阵/" style="font-size: 10px;">本质矩阵</a> <a href="/tags/机器学习/" style="font-size: 15px;">机器学习</a> <a href="/tags/机器视觉/" style="font-size: 15px;">机器视觉</a> <a href="/tags/树莓派/" style="font-size: 10px;">树莓派</a> <a href="/tags/梯度下降/" style="font-size: 10px;">梯度下降</a> <a href="/tags/梯度下降算法/" style="font-size: 10px;">梯度下降算法</a> <a href="/tags/概率论/" style="font-size: 10px;">概率论</a> <a href="/tags/欧几里德算法/" style="font-size: 10px;">欧几里德算法</a> <a href="/tags/汉明距离/" style="font-size: 10px;">汉明距离</a> <a href="/tags/深度学习/" style="font-size: 13.75px;">深度学习</a> <a href="/tags/渲染pipeline/" style="font-size: 10px;">渲染pipeline</a> <a href="/tags/游戏/" style="font-size: 12.5px;">游戏</a> <a href="/tags/牛顿法/" style="font-size: 10px;">牛顿法</a> <a href="/tags/物体检测/" style="font-size: 10px;">物体检测</a> <a href="/tags/直方图/" style="font-size: 12.5px;">直方图</a> <a href="/tags/相似度/" style="font-size: 10px;">相似度</a> <a href="/tags/相机标定/" style="font-size: 12.5px;">相机标定</a> <a href="/tags/相机模型/" style="font-size: 10px;">相机模型</a> <a href="/tags/神经网络/" style="font-size: 11.25px;">神经网络</a> <a href="/tags/空间变换/" style="font-size: 10px;">空间变换</a> <a href="/tags/纹理/" style="font-size: 11.25px;">纹理</a> <a href="/tags/蒙特卡洛算法/" style="font-size: 10px;">蒙特卡洛算法</a> <a href="/tags/虚拟机/" style="font-size: 10px;">虚拟机</a> <a href="/tags/语义分割/" style="font-size: 10px;">语义分割</a> <a href="/tags/调试/" style="font-size: 10px;">调试</a> <a href="/tags/软件设计/" style="font-size: 10px;">软件设计</a> <a href="/tags/连通域/" style="font-size: 10px;">连通域</a> <a href="/tags/链式求导/" style="font-size: 10px;">链式求导</a> <a href="/tags/驱动开发/" style="font-size: 10px;">驱动开发</a> <a href="/tags/高斯拉普拉斯算子/" style="font-size: 10px;">高斯拉普拉斯算子</a> <a href="/tags/高斯模糊/" style="font-size: 10px;">高斯模糊</a> <a href="/tags/高斯混合模型/" style="font-size: 11.25px;">高斯混合模型</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">Links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2019 Harry Mei<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        


    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>