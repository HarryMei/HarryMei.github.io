<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>Harry Mei&#39;Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta property="og:type" content="website">
<meta property="og:title" content="Harry Mei&#39;Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Harry Mei&#39;Blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Harry Mei&#39;Blog">
    

    
        <link rel="alternate" href="/" title="Harry Mei&#39;Blog" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Harry Mei&#39;Blog</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/cast.jpg" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile" class="profile-fixed">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/cast.jpg" />
            <h2 id="name">Harry Mei</h2>
            <h3 id="title">coder</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Shenzhen, China</span>
            <a id="follow" target="_blank" href="https://github.com/HarryMei/">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                82
                <span>posts</span>
            </div>
            <div class="article-info-block">
                119
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="http://github.com/HarryMei/" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="http://weibo.com/1503717973/" target="_blank" title="twitter" class=tooltip>
                            <i class="fa fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="facebook" class=tooltip>
                            <i class="fa fa-facebook"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="dribbble" class=tooltip>
                            <i class="fa fa-dribbble"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main">
    <article id="post-R-CNN网络的认识" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/12/25/R-CNN网络的认识/">R-CNN网络的认识</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/12/25/R-CNN网络的认识/">
            <time datetime="2018-12-25T12:47:25.000Z" itemprop="datePublished">2018-12-25</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/深度学习/">深度学习</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/CNN/">CNN</a>, <a class="tag-link" href="/tags/R-CNN/">R-CNN</a>, <a class="tag-link" href="/tags/深度学习/">深度学习</a>, <a class="tag-link" href="/tags/物体检测/">物体检测</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="前言——从图像分类到物体检测"><a href="#前言——从图像分类到物体检测" class="headerlink" title="前言——从图像分类到物体检测"></a>前言——从图像分类到物体检测</h2><p>在深度学习领域卷积神经网络可以说是占了其半壁江山，不过卷积神经网络诞生之初只适用于图像分类问题，而然面对实际工程的各种需求，单纯的图像分类显然是远远不够，因此如何将卷积神经网络强大的体征提取能力应用到更复杂的问题上去，是当时乃至现在热门的研究主题。在这其中，R-CNN的出现让物体检测也成为了卷积神经网络的拿手好戏。</p>
<p>图像分类到物体检测与何区别？图像分类只是基本整个图像判别其种类，而物体检测则是读取图像的内容，不仅要识别其中有无特定种类的物体，还要得到其在图像中所处的大概位置。相对于图像分类的笼统、粗略，物体检测就要显得细致、具体得多了。</p>
<p>正如Alexnet的出现让人们认识到了卷积神经网络的巨大威力一样，R-CNN的出现也让卷积神经网络在物体检测上的精度大幅提高了一个档次。虽然后续的一系列物体检测网络，不断刷新着检测精度与运行的速度的榜单，但是R-CNN毕竟是一个开创者，在其后诞生了一系列R-CNN的改进版本，这足以说明其模型的经典性。由于R-CNN的论文比较经典，所以网上已经有不少论文的翻译，因此我就不会详细的分析论文了。在这里我希望通过本文，能够比较针对性的记录一下自己对R-CNN的理解与认识。</p>
<h2 id="R-CNN的本质"><a href="#R-CNN的本质" class="headerlink" title="R-CNN的本质"></a>R-CNN的本质</h2><p>从图像分类到物体识别是一个很有挑战的过程，R-CNN的思路是：从原始图像中取出不同区域作为独立的小图像，导入到CNN网络中做图像分类，从而将物体识别问题转化为分类问题。在这其中，R-CNN使用region proposal的方法代替传统的滑动窗口来生成小区域图像，将像生成的region图像resize到分类网络要求的尺寸，使用CNN来提取特征，最后借助线性SVM来分类。由于R-CNN结合了Region proopsal和CNN，所以就被取名为R-CNN: Regions with CNN features。</p>
<p><img src="/markdownImage/rcnn.png" alt=""></p>
<p>除此之外为了让识别的区域更加准确，R-CNN还加入了一个回归模型，用来提高Bounding-<br>box（区域矩形框）的精度。所以从整体上来看，R-CNN可以看成由如下三部分组成：</p>
<ul>
<li>Region proposal</li>
<li>CNN+SVM分类</li>
<li>Bouding Box线性回归</li>
</ul>
<h2 id="region-proposal模块"><a href="#region-proposal模块" class="headerlink" title="region proposal模块"></a>region proposal模块</h2><p>在R-CNN中，组成其整体的三部分相对独立，region proposal更偏向传统方法，在R-CNN的中它更像是一步预处理步骤，它将生产的区域（Bouding Box）。原始论文中对region proposal的描叙相对较少，只是简单的提到了R-CNN中在众region proposal方法选取了selective search方法来使用。那么selective search是怎么工作的呢？这就只能查找关于selective search的相关论文了。在我个人看来，如果仅仅是关注深度学习这一块的话，确实是不必深究region proposal，因为这部分属于传统物体识别方法的大类，深入进去又是一个大坑，而且region proposal执行时间花销也不小，在后续的改进中版本的网络中，这部分都是主要被优化的对象，不过对于region proposal的大概原理还是有必要简单的了解以一下的。</p>
<p>selective search的目的就是生成在图像中可能有物体存在的区域位置的矩形框，由于它考虑了物体存在的可能性，从这个目标上来看，它比滑窗法(Sliding Window)生成的待选区域质量就要高得多。一般selective search会采样图像分割的技术，先将图像分成许多小区域，然后根据相似性将相似将相似的区域融合在一起，将子区域的矩形外界框作为bounding box输出。</p>
<p>在R-CNN测试阶段中region proposal模块会生成2000个区域（Bouding Box）输入到CNN网络中去，而在训练CNN时可以不用region proposal。</p>
<h2 id="CNN-SVM分类器"><a href="#CNN-SVM分类器" class="headerlink" title="CNN+SVM分类器"></a>CNN+SVM分类器</h2><p>R-CNN使用的CNN是AlexNet模型，输入227x227尺寸的RGB图像，最后的全连接层输出4096个特征的向量。而全连接层的存在也要求网络只能接受固定尺寸的图像，因此region proposal生成的区块需要全部缩放到227x227尺寸来。全连接层输出4096个特征的向量，导入到SVM分类器中，从而组合成一个完整的分类网络。</p>
<p>虽然在CNN与SVM联合组成一个分类器，但是在训练时却是分开训练的，先将CNN训练好，然后将CNN全连接层后面的分类部分换成SVM，然后再单独训练SVM。</p>
<h4 id="1-CNN训练"><a href="#1-CNN训练" class="headerlink" title="1. CNN训练"></a>1. CNN训练</h4><p>对于R-CNN的CNN模块我们首先要知道的是，它是一个监督学习的网络，然而能够用于物体检测训练的数据却是比较少的，因此R-CNN在训练的时候采用了Supervised pre-training（预训练） + Domain-specific fine-tuning（特定数据集上微调）的方法来解决数据不足的问题。</p>
<p>在pre-training阶段，使用没有bounding box labels的ILSVRC2的数据集（1000个类别），而在fine-tuning的时候使用有bounding box labels的Pascal VOC数据集（21个类别），取Pascal VOC数据集图像中选取各类型的区域作为训练样本，正样本为与标注的bounding box重合区域（IoU）大于0.5的作为该类型的正样本，其余的为负样本。另外减小学习率，保证pre-training出来的参数不要变化太大。</p>
<h4 id="2-SVM分类"><a href="#2-SVM分类" class="headerlink" title="2. SVM分类"></a>2. SVM分类</h4><p>这里不使用CNN直接分类，而还单独训练一个SVM分类器的原因：由于fine-tuning使用的数据量非常小，将IoU的标准卡严，很容易造成CNN过拟合，而降低IoU的标准，又导致CNN分类不准，所以使用一个适用于小样本分类的SVM分类器能够避免以上的问题。</p>
<p>R-CNN对每一种类型使用一个线性SVM分类器，因此又多少种类型，就又多少个SVM分类器，每一个SVM都会对的图像进行打分。</p>
<h2 id="Bouding-Box相关的处理"><a href="#Bouding-Box相关的处理" class="headerlink" title="Bouding Box相关的处理"></a>Bouding Box相关的处理</h2><h4 id="1-挑选最好的Bouding-Box"><a href="#1-挑选最好的Bouding-Box" class="headerlink" title="1. 挑选最好的Bouding Box"></a>1. 挑选最好的Bouding Box</h4><p>在测试时，region proposal可能会生成许多包含物体但是又过大或过小的Bouding Box，这些Bouding Box因为确实整体包含或者包含了大部分物体，所以会被分类器判别为真，但是我们肯定希望从中挑选出一个最好的Bouding Box，来作为我们检测到的唯一的结果输出。这里R-CNN选取SVM结果分数最高的最为输出结果。</p>
<h4 id="2-怎么处理多目标检测"><a href="#2-怎么处理多目标检测" class="headerlink" title="2. 怎么处理多目标检测"></a>2. 怎么处理多目标检测</h4><p>仅仅选分数最高还无法处理多目标检测问题，如果一个图像上有可能存在多个检测的物体，那么仅仅取IoU最大的那个，一张图像将只能检测出一个物体。为解决这个问题，R-CNN使用的方法是，参考SVM输出的分数同时根据IoU的数值进行局部非极大值抑制，在一个图像中选出一个最好的Bouding Box，对于其周边的Bouding Box（IoU高的）去除，而对于其他IoU小的Bouding Box即使得分小也会保留，然后对剩下的Bouding Box重复上面的操作，直到选出所有目标。这样就即筛选出了局部最好的Bouding Box，同时不影响其他区域的检测。</p>
<h4 id="3-Bouding-Box线性回归"><a href="#3-Bouding-Box线性回归" class="headerlink" title="3. Bouding Box线性回归"></a>3. Bouding Box线性回归</h4><p>由region proposal生成的Bouding Box一般都不是完美包裹物体的矩形框，这是导致输出检测物体定位不精准的主要原因。因此在检测到物体之后，再对其输出的bounding box使用线性回归模型进行修正，其实质就是根据当前CNN输出的特征与当前的定位，来预测最好的bounding box（重心点与长宽）。当然回归模型也是需要单独训练的。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="https://arxiv.org/pdf/1311.2524v3.pdf" target="_blank" rel="noopener">Rich feature hierarchies for accurate object detection and semantic segmentation（原始论文）</a></li>
<li><a href="https://blog.csdn.net/v1_vivian/article/details/78599229" target="_blank" rel="noopener">R-CNN论文详解（论文翻译）</a></li>
<li><a href="https://blog.csdn.net/small_munich/article/details/79595257" target="_blank" rel="noopener">目标检测之Selective Search原理简述</a></li>
<li><a href="https://www.bilibili.com/video/av22822657" target="_blank" rel="noopener">图解CNN论文：尝试用最少的数学读懂深度学习论文</a></li>
</ol>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/12/25/R-CNN网络的认识/" data-id="cjq3rwk2h00179kvd7uzddgbx" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-深度学习主要优化算法总结" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/12/17/深度学习主要优化算法总结/">深度学习主要优化算法总结</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/12/17/深度学习主要优化算法总结/">
            <time datetime="2018-12-17T14:10:52.000Z" itemprop="datePublished">2018-12-17</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/深度学习/">深度学习</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Adam/">Adam</a>, <a class="tag-link" href="/tags/EMA/">EMA</a>, <a class="tag-link" href="/tags/Momentum/">Momentum</a>, <a class="tag-link" href="/tags/RMSprop/">RMSprop</a>, <a class="tag-link" href="/tags/SGD/">SGD</a>, <a class="tag-link" href="/tags/优化算法/">优化算法</a>, <a class="tag-link" href="/tags/深度学习/">深度学习</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>深度学习的优化算法基本上都是基于<strong>梯度下降</strong>的，不过在复杂的网络训练中，仅仅使用梯度下降是远远不够的。一方面是由于深度学习的数据量巨大，不可能将数据全部带入求梯度下降；另一方面是深度的学习的待优化的参数太巨大，这么多参数组成了超高的维度必然在各个维度上的尺度非常的不一致，造成优化困难。所以在实际中，一般都是使用中的方法都是改进过的优化算法，本文主要介绍一下集中优化算法：</p>
<ol>
<li>SGD</li>
<li>Momentum</li>
<li>RMSprop</li>
<li>Adam</li>
</ol>
<h2 id="各种优化算法的关系"><a href="#各种优化算法的关系" class="headerlink" title="各种优化算法的关系"></a>各种优化算法的关系</h2><p>其实除了以上几种外，还有很多其他的相关优化算法，这对于深度学习初学者来说，简直就是噩梦，感觉还没开始进入正题就陷入深渊。不过虽然优化算法本身是一个水很深的一大研究方向，但是针对深度学习的优化算法其实还是相对狭窄很多。正如上面所提到的那样，深度学习的优化算法本质上都是基于梯度下降的，所以一旦我们找倒了他们之间彼此的联系，再来理解就要简单许多。</p>
<p>首先我们先来看看基本的梯度下降的公式：</p>
<p><img src="/markdownImage/sgd.jpg" alt=""></p>
<p>使用当前点的梯度与学习率来更新当前的参数大小，其中梯度主要指引优化的方向，学习率控制更新的步长。</p>
<p>再此基础上，SGD是为了解决数据量大，无法使用全部数据用来更新梯度；Momentum则是为了解决SGD由于数据批次的差异导致的梯度震荡优化速度慢的问题，RMSprop则是从学习率的角度出发提出自适应学习率的方法，而Adam则完全就是Momentum和RMSprop的方法的结合作用。RMSprop和Adam是根据实际情况自适应学习率，所以它们实际的学习率是动态调整的。</p>
<h2 id="SGD"><a href="#SGD" class="headerlink" title="SGD"></a>SGD</h2><p>SGD是Stochastic Gradient Descent的缩写，SGD在基本的梯度下降方法做的改进就是，仅仅使用一个样本对梯度进行更新。这样做的好处就是每一个数据都是会独立作用到梯度更新上，比起使用全部数据才更新一次梯度的方法数据利用效率要高很多。但是由于数据的随机性、以及噪声的干扰，使得SGD每次更新的梯度对数据整体而言可能并不是下降的方向，虽然训练速度较快，但是震荡厉害、准确度下降。</p>
<p>为了减小SGD的震荡，使收敛更稳定，我可以使用去一个折中的方案：每次使用一小批数据（mini batch）来更新梯度，这样既提供了数据的利用率，又可以增加数据的稳定性，这种被称为Mini-Batch Gradient Descent（MBGD）。</p>
<p>不过在一些深度学习框架的实际使用中，这里有个问题我发现一般都只有SGD而没有MBGD，但是在训练时又分了mini batch。这就很奇怪了，明明只有MBGD才会使用到mini batch。我个人认为这是由于，神经网络计算数据的计算都是向量、矩阵化的，我们一般称为tensor，所以即使有多个数据，一般都是组成一个tensor作为一个数据输入到网络中的，而且网络也只会经过一次计算，所以形式上与SGD时一致的，但是效果却是MBGD一样。</p>
<h2 id="指数滑动平均EMA"><a href="#指数滑动平均EMA" class="headerlink" title="指数滑动平均EMA"></a>指数滑动平均EMA</h2><p>在说明后面的优化算法前，需要先了解指数滑动平均EMA，因为不管是Monentum还是RMSprop都是利用EMA对优化过程进行平滑的。EMA全称是Exponential Moving Average，是一种使用非常广泛的平滑方法，如股票、气温变化曲线，它能够用历史数据对当前数据进行平滑，以保持曲线整体的稳定性。</p>
<p>V表示平滑结果，theta 表示当前数据值，beta表示平滑系数，则EMA的计算方法如下：</p>
<p><img src="/markdownImage/ema1.jpg" alt=""></p>
<p>如果使用上面的迭代关系，从V0开始算，则Vt的可以得到公式如下：</p>
<p><img src="/markdownImage/ema2.jpg" alt=""></p>
<p>可以看到Vt使用到了所有历史数据，越靠近的数据影响越大，且越往后其影响力呈指数下降。</p>
<p>下图是使用EMA平滑气温变化曲线效果（蓝色点为原始数据，红、黄、绿色的曲线为使用了不同的平滑系数的EMA的效果）：</p>
<p><img src="/markdownImage/EMA.png" alt="EMA"></p>
<h2 id="EMA的偏差修正"><a href="#EMA的偏差修正" class="headerlink" title="EMA的偏差修正"></a>EMA的偏差修正</h2><p>在使用EMA平滑数据时候，需要注意在最开始的时候，由于历史数据很少或者没有，而我们设置V0初值却占了绝对主要的影响。一般V0会设置为0，这样会导致平滑曲线与实际数据相差甚远，不过随着历史数据越来越多，这个偏差就会变得越来越小。为了修正最开始的时候出现的偏差，我们一般可以使用如下公式对结果进行修正：</p>
<p><img src="/markdownImage/ema3.jpg" alt=""></p>
<p>当V0 = 0时，当很小的时候将原始数据的影响放大，后面随着t的变大，修正的影响变小。</p>
<h2 id="Momentum"><a href="#Momentum" class="headerlink" title="Momentum"></a>Momentum</h2><p>前面说过SGD由于即使加入了mini batch后，仍然由于数据的随机性，所以当前所mini batch的数据与整个数据的分布可能不一致，导致SGD在收敛时震荡厉害。Monmentum为了减小震荡，使用了EMA来平滑梯度，从而达到当前参数优化不仅取决于当前步的梯度，还取决于历史梯度值。</p>
<p>Momentum方法将梯度下降比拟为一个滚动下山的小球，小球每一时刻的运动状态不仅取决与其当前所受合力的作用，还取决于其原来的运动状态。Momentun借用了物理学中动量的概念，用动量代替梯度作为参数更新的动力，动量的计算实际上就使用EMA的方法求得的：</p>
<p><img src="/markdownImage/momentum1.jpg" alt=""></p>
<p>可以理解为J的导数为当前合力作用与当前运动状态Vt共同决定下一刻的运动状态，一般超参数gramma设置为0.9，参数更新公式将变为：</p>
<p><img src="/markdownImage/momentum2.jpg" alt=""></p>
<p>Momentum方法通过使用EMA平滑了原始梯度数据，让训练时收敛更稳定。</p>
<h2 id="RMSprop"><a href="#RMSprop" class="headerlink" title="RMSprop"></a>RMSprop</h2><p>相比Momentum使用历史数据来保持稳定，RMSprop则是直接考虑不同维度上的梯度变化的大小，在相同学习率下，某个维度梯度变化大，则在参数更新的时候步长方向都会较大，RMSprop算法不希望这些在不同维度上参数更新差异太大，因此它引入一个衰减因子来平衡不同维度上的差异。直观的理解，SGD的出现震荡，很大的原因就是由于其在某个维度上更新速度慢，而在另外的维度上更新速度快导致来回摆动。</p>
<p>另外使用梯度的平方作为抑制因子，平且通过EMA方法进行指数加权来平滑抑制因子，更新方程如下：</p>
<p><img src="/markdownImage/rmsprop.jpg" alt=""></p>
<h2 id="Adam"><a href="#Adam" class="headerlink" title="Adam"></a>Adam</h2><p>Adam是Adaptive Moment Estimation的缩写，前面提过Adam是Momentum与RMSprop的结合，它综合了上面两个算法的特点，既使用动量的方法平滑了更新的路径，又使用了衰减因子平衡了不同维度上的更新尺度。不过需要注意的一点是，Adam在用EMA做平滑的时候使用了偏差矫正，计算公式如下：</p>
<p><img src="/markdownImage/adam1.jpg" alt=""></p>
<p>最后的参数更新规则为：</p>
<p><img src="/markdownImage/adam2.jpg" alt=""></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="http://m.elecfans.com/article/652356.html" target="_blank" rel="noopener">一个框架看懂优化算法</a></li>
<li><a href="https://blog.csdn.net/wqy20140101/article/details/78961576" target="_blank" rel="noopener">深度学习——优化算法</a></li>
<li><a href="http://www.cnblogs.com/guoyaohua/p/8542554.html" target="_blank" rel="noopener">深度学习——优化器算法Optimizer详解</a></li>
</ol>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/12/17/深度学习主要优化算法总结/" data-id="cjq3rwk4r005m9kvdp667nib8" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Tensorflow-Keras简单介绍" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/12/17/Tensorflow-Keras简单介绍/">Tensorflow-Keras简单介绍</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/12/17/Tensorflow-Keras简单介绍/">
            <time datetime="2018-12-17T13:17:43.000Z" itemprop="datePublished">2018-12-17</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/深度学习/">深度学习</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/keras/">keras</a>, <a class="tag-link" href="/tags/tensorflow/">tensorflow</a>, <a class="tag-link" href="/tags/深度学习/">深度学习</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本文是为初学者对Tensorflow和Keras的一个简单的介绍，主要基于Youtube上Tensorflow向导教程，国内B站搬运地址：<a href="https://www.bilibili.com/video/av23035841" target="_blank" rel="noopener">https://www.bilibili.com/video/av23035841</a>，<br>github演示文档地址：<a href="https://github.com/Hvass-Labs/TensorFlow-Tutorials" target="_blank" rel="noopener">https://github.com/Hvass-Labs/TensorFlow-Tutorials</a>。</p>
<p>在自己没有搭建好tensorflow环境的时候，如果可以翻墙，可以使用google的colab在线执行tensorflow的程序，还可以提供GPU服务。</p>
<p>另外一些知识来源其他参考资料：</p>
<ol>
<li><a href="https://www.cnblogs.com/yifdu25/p/8763717.html" target="_blank" rel="noopener">Deeplearning——动态图 vs. 静态图</a></li>
</ol>
<h2 id="感想"><a href="#感想" class="headerlink" title="感想"></a>感想</h2><p>对于像我一样一开始接触Tensorflow的人来说，Tensorflow的一些自身定义的一些概念会然人很困惑，而且其运行方式也与通常与我们编写计算的程序不是很相同，会给人一种很不直观的感觉。为了解决这样的困惑，是需要稍微了解一些Tensorflow的框架设计的一些基本的思想的，这些特点对于理解Tensorflow中的那些概念非常有帮助，这些会在下面的记录说明。</p>
<h2 id="Tenserflow理解"><a href="#Tenserflow理解" class="headerlink" title="Tenserflow理解"></a>Tenserflow理解</h2><h4 id="1-Tensorflow封装的层次"><a href="#1-Tensorflow封装的层次" class="headerlink" title="1. Tensorflow封装的层次"></a>1. Tensorflow封装的层次</h4><p>通常我们把Tenserflow都归类到深度学习神经网络库，但是Tensorflow更本质的是提供低级的数值计算的库，所以才会有<strong>Keras</strong>这样的专门针对深度神经网络更高级的封装，其后端可以基于Tensorflow。想使用Tensorflow底层的API就必须理解其定义的一大堆概念，但是实际使用时使用Keras这样高级的API会更加方便。</p>
<h4 id="2-Tensorflow的计算图"><a href="#2-Tensorflow的计算图" class="headerlink" title="2. Tensorflow的计算图"></a>2. Tensorflow的计算图</h4><p>Tensorflow把整个计算过程称为computational graph计算图，在整个计算过程都构建完成后再做计算。所以它不仅比原生python计算更块，也比numpy更快，因为numpy只能知道每一次操作的计算。Tensorflow的计算图属于静态的图，而像PyTorch的动态图则更加灵活（MxNet两者都支持）。不过最新版本的Tensorflow也可以支持动态图了。</p>
<p>动态计算意味着程序将按照我们编写命令的顺序进行执行。这种机制将使得调试更加容易，并且也使得我们将大脑中的想法转化为实际代码变得更加容易。而静态计算则意味着程序在编译执行时将先生成神经网络的结构，然后再执行相应操作。从理论上讲，静态计算这样的机制允许编译器进行更大程度的优化，但是这也意味着你所期望的程序与编译器实际执行之间存在着更多的代沟。这也意味着，代码中的错误将更加难以发现（比如，如果计算图的结构出现问题，你可能只有在代码执行到相应操作的时候才能发现它）。</p>
<h2 id="Tenserflow重要数据类型"><a href="#Tenserflow重要数据类型" class="headerlink" title="Tenserflow重要数据类型"></a>Tenserflow重要数据类型</h2><p>注意下面代码，是总jupyter notebook中转过来的，在jupyter可以直接运行，但是在这里除了重要的结果，我不会将运行结果复制过来，需要时可以直接到python环境运行，tensor版本为1.11.0。</p>
<h5 id="1-Placeholder"><a href="#1-Placeholder" class="headerlink" title="1. Placeholder"></a>1. Placeholder</h5><p>placeholder就是作为给计算图数据输入的特殊的变量，其定义和numpy中的数据类似，比较简单：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">print(tf.__version__)</span><br><span class="line"></span><br><span class="line">x = tf.placeholder(tf.float32)</span><br><span class="line">y = tf.placeholder(tf.float32, [<span class="keyword">None</span>, <span class="keyword">None</span>])</span><br></pre></td></tr></table></figure>
<h5 id="2-Variable"><a href="#2-Variable" class="headerlink" title="2. Variable"></a>2. Variable</h5><p>一般的变量类型，但是相比placeholder必须初始化，指定维度和初值。Variable可以使用普通的运算符来计算，不过更丰富的运算需要使用tensorflow定义的运算函数。需要注意的是，Variable只是Tensorflow计算图中的一个结构，不等同与变量本身。如下判断两个Variable是否相等的操作，就不能使用“==”操作符了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">w = tf.Variable(tf.zeros([<span class="number">3</span>, <span class="number">4</span>]),  name=<span class="string">'w'</span>, dtype=tf.float32)</span><br><span class="line">b = tf.Variable(tf.ones([<span class="number">3</span>, <span class="number">4</span>]))</span><br><span class="line">k = tf.Variable(tf.constant(<span class="number">0.05</span>, shape=[<span class="number">3</span>,<span class="number">4</span>]))</span><br><span class="line">r = w + b*<span class="number">10</span></span><br><span class="line">c0 = (w == b)</span><br><span class="line">c1 = tf.equal(w, b)</span><br></pre></td></tr></table></figure>
<h4 id="3-Session"><a href="#3-Session" class="headerlink" title="3. Session"></a>3. Session</h4><p>tensorflow使用Session类型对象来执行计算，从上面的print信息可以看到，并没有得到我们需要的计算结果，实际上那些语句只是再构造计算图，要开始计算需要使用Session。使用Session的一般流程是：先创建，然后使用Session初始化变量，最后使用Session运行计算图。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">session = tf.Session()</span><br><span class="line">session.run(tf.global_variables_initializer())</span><br><span class="line"><span class="comment"># session.run(tf.initialize_all_variables())  老的api函数</span></span><br><span class="line">session.run(r)</span><br></pre></td></tr></table></figure>
<p>更加常见的用法是使用feed_dict参数喂数据，当有计算图有placeholder时；需要run来计算结果的变量可以组成一个列表来传入。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ret = tf.matmul(x, w)</span><br><span class="line">session.run(tf.global_variables_initializer())</span><br><span class="line">input_data = np.arange(<span class="number">12</span>*<span class="number">2</span>).reshape((<span class="number">8</span>,<span class="number">3</span>))</span><br><span class="line">session.run([ret, r], feed_dict=&#123;x:input_data&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Tensorflow神经网络基本接口"><a href="#Tensorflow神经网络基本接口" class="headerlink" title="Tensorflow神经网络基本接口"></a>Tensorflow神经网络基本接口</h2><p>在tensorflow中nn模块时专门提供神经网络层设计的，以下为最基本的几个接口函数。</p>
<h5 id="1-conv2d"><a href="#1-conv2d" class="headerlink" title="1. conv2d"></a>1. conv2d</h5><p>conv2d是基本的卷积运算，注意strides参数一般就改变中间两项，表示在图像的水平和垂直方向的strides；padding参数设置为“same”的目的是保持输入和输入的尺寸一样在没有stride的情况下。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">input_tensor = tf.Variable(tf.ones([<span class="number">10</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">3</span>]))</span><br><span class="line">weight_tensor = tf.Variable(tf.ones([<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>]))</span><br><span class="line">layer = tf.nn.conv2d(input=input_tensor, filter=weight_tensor, strides=[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>], padding=<span class="string">'SAME'</span>)</span><br><span class="line">session.run(tf.global_variables_initializer())</span><br><span class="line">dat = session.run(layer)</span><br></pre></td></tr></table></figure>
<h5 id="2-max-pool"><a href="#2-max-pool" class="headerlink" title="2. max_pool"></a>2. max_pool</h5><p>使用pooling层时一般都是max pooling，来保持图像局部的最大特征，同时下采样。注意ksize是pooling的kernel size，其尺寸为2x2，但是要做运行需要时四维的，前后维度值都设1就可以了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">layer = tf.nn.max_pool(value=layer, ksize=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>], strides=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>], padding=<span class="string">'SAME'</span>)</span><br><span class="line">session.run(tf.global_variables_initializer())</span><br><span class="line">dat = session.run(layer)</span><br></pre></td></tr></table></figure>
<h5 id="3-relu"><a href="#3-relu" class="headerlink" title="3. relu"></a>3. relu</h5><p>使用tf.nn.relu即可。</p>
<h4 id="6-代价函数"><a href="#6-代价函数" class="headerlink" title="6. 代价函数"></a>6. 代价函数</h4><p>代价函数也在tensorflow的nn模块中，如tf.nn.softmax_cross_entropy_with_logits。当然这个函数的输出是Tensor，需要将其变为一个数值来方便优化，可以使用tf.reduce_mean函数。</p>
<h4 id="6-优化器"><a href="#6-优化器" class="headerlink" title="6. 优化器"></a>6. 优化器</h4><p>tensorflow提供的优化其在train模块中，如：tf.train.AdamOptimizer。</p>
<h2 id="使用layers来辅助构建网络"><a href="#使用layers来辅助构建网络" class="headerlink" title="使用layers来辅助构建网络"></a>使用layers来辅助构建网络</h2><p>使用上面最基本计算操作来构建网络是比较麻烦的，所以在tensorflow中有提供layers模块来给我们辅助搭建网络，尽管它在易用性上仍然不如像prettytensor、tf.contrib等其他基于tensorflow底层API的封装，但是layers毕竟是tensorflow自带的。</p>
<h4 id="1-使用tf-layers-conv2d构建卷积层"><a href="#1-使用tf-layers-conv2d构建卷积层" class="headerlink" title="1. 使用tf.layers.conv2d构建卷积层"></a>1. 使用tf.layers.conv2d构建卷积层</h4><p>相比nn中的conv2d只是单纯的卷积操作，layers中的conv2d是构建一层通用的卷积层网络，自动处理指定的卷积核数以及激活函数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net = tf.layers.conv2d(inputs=input_tensor, name=<span class="string">'conv_layer1'</span>, padding=<span class="string">'SAME'</span>, filters=<span class="number">16</span>, kernel_size=<span class="number">5</span>, activation=tf.nn.relu, strides=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h4 id="2-使用tf-layers-max-pooling2d创建池化层"><a href="#2-使用tf-layers-max-pooling2d创建池化层" class="headerlink" title="2. 使用tf.layers.max_pooling2d创建池化层"></a>2. 使用tf.layers.max_pooling2d创建池化层</h4><p>对比nn中的max_pool操作，Layers中的max_pooling2d函数特指2维数组的池化，提供的接口参数更简单。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net = tf.layers.max_pooling2d(inputs=net, pool_size=<span class="number">2</span>, strides=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h4 id="3-使用tf-layers-flatten和tf-layers-dense创建全连接"><a href="#3-使用tf-layers-flatten和tf-layers-dense创建全连接" class="headerlink" title="3. 使用tf.layers.flatten和tf.layers.dense创建全连接"></a>3. 使用tf.layers.flatten和tf.layers.dense创建全连接</h4><p>有些版本在layers中没有添加flatten函数，不过我现在的1.11.0版本是有的，它将四维的tensor转为全连接输入的二维数组；然后用dense函数创建全连接层。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net = tf.layers.flatten(net)</span><br><span class="line">net = tf.layers.dense(inputs=net, name=<span class="string">'fc1'</span>, units=<span class="number">128</span>, activation=tf.nn.relu)</span><br></pre></td></tr></table></figure>
<h2 id="使用Keras-API"><a href="#使用Keras-API" class="headerlink" title="使用Keras API"></a>使用Keras API</h2><p>尽管有了tf.layers、prettytensor以及tf.contrib这些模块，但是现在人们更多的使用的是Keras，原因是前面两个模块或多或少被开发者所遗忘，或者使用仍然不方便。</p>
<h4 id="1-导入Keras模块"><a href="#1-导入Keras模块" class="headerlink" title="1. 导入Keras模块"></a>1. 导入Keras模块</h4><p>由于Keras是一个独立的库，所以在安装了tensorflow后还需要再安装Keras，当前可以如下导入Keras库。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tensorflow.python.keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> tensorflow.python.keras.layers <span class="keyword">import</span> InputLayer, Input, Reshape, MaxPooling2D, Conv2D, Dense, Flatten</span><br></pre></td></tr></table></figure>
<h4 id="2-使用Sequential模块创建网络"><a href="#2-使用Sequential模块创建网络" class="headerlink" title="2. 使用Sequential模块创建网络"></a>2. 使用Sequential模块创建网络</h4><p>Keras有两种方式构建网络：一种是使用Sequential模块；另一种是使用Fuction model。使用Sequential是非常简单的，它只需要添加各种已有的网络层即可，但是这样也让你不能对网络结构做细致的改变。Fuction model的使用会有些怪异，不过它能够做更发杂的网络。</p>
<p>如下代码为使用Sequential构建网络的实例，Inputlayer与tensorflow中的placeholder作用是类似的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">model = Sequential()</span><br><span class="line">model.add(InputLayer(input_shape=(<span class="number">100</span>,<span class="number">100</span>,<span class="number">3</span>)))</span><br><span class="line">model.add(Conv2D(kernel_size=<span class="number">5</span>, strides=<span class="number">1</span>, filters=<span class="number">16</span>, padding=<span class="string">'same'</span>, activation=<span class="string">'relu'</span>, name=<span class="string">'kersa_conv_layer1'</span>))</span><br><span class="line">model.add(MaxPooling2D(pool_size=<span class="number">2</span>, strides=<span class="number">2</span>))</span><br><span class="line">model.add(Conv2D(kernel_size=<span class="number">5</span>, strides=<span class="number">1</span>, filters=<span class="number">36</span>, padding=<span class="string">'same'</span>, activation=<span class="string">'relu'</span>, name=<span class="string">'kersa_conv_layer2'</span>))</span><br><span class="line">model.add(MaxPooling2D(pool_size=<span class="number">2</span>, strides=<span class="number">2</span>))</span><br><span class="line">model.add(Flatten())</span><br><span class="line">model.add(Dense(<span class="number">128</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">model.add(Dense(<span class="number">2</span>, activation=<span class="string">'softmax'</span>))</span><br><span class="line">model.summary()</span><br></pre></td></tr></table></figure>
<p>执行如上代码，model.summary()会打印一个很清晰的网络简介结构表：</p>
<p><img src="/markdownImage/keras_net.jpg" alt=""></p>
<h4 id="3-model-compilation"><a href="#3-model-compilation" class="headerlink" title="3. model compilation"></a>3. model compilation</h4><p>在Keras中为模型设置优化器、和loss function被称为“compilation”</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tensorflow.python.keras.optimizers <span class="keyword">import</span> Adam</span><br><span class="line"></span><br><span class="line">optimizer = Adam(lr=<span class="number">1e-3</span>)</span><br><span class="line">model.compile(optimizer=optimizer,</span><br><span class="line">              loss=<span class="string">'categorical_crossentropy'</span>,</span><br><span class="line">              metrics=[<span class="string">'accuracy'</span>])</span><br></pre></td></tr></table></figure>
<p>Training、Evaluation，实例使用：model.fit(x=data.x_train, y=data.y_train, epochs=1, batch_size=128)和result = model.evaluate(x=data.x_test,y=data.y_test)</p>
<h2 id="Keras的Save与Load-Model"><a href="#Keras的Save与Load-Model" class="headerlink" title="Keras的Save与Load Model"></a>Keras的Save与Load Model</h2><p>使用Keras的Save与Load要比Tensorflow原生的功能要方便很多，不过在使用前需要先安装好”h5py”库。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tensorflow.python.keras.models <span class="keyword">import</span> load_model</span><br><span class="line"></span><br><span class="line">path_model = <span class="string">'model.keras'</span></span><br><span class="line">model.save(path_model)</span><br><span class="line"><span class="keyword">del</span> model</span><br><span class="line">model = load_model(path_model)</span><br></pre></td></tr></table></figure>
<p>原教程中为上面的保存方法，会出现类似：“ValueError: You are trying to load a weight file containing 4 layers into a model with 0 layers”的问题，使用下面代码可以运行。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model.save_weights(<span class="string">'model.keras'</span>)</span><br><span class="line">model.load_weights(<span class="string">'model.keras'</span>,by_name=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/12/17/Tensorflow-Keras简单介绍/" data-id="cjq3rwk2k001c9kvd6kqzzecz" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-反向传播算法推导" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/12/14/反向传播算法推导/">反向传播算法推导</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/12/14/反向传播算法推导/">
            <time datetime="2018-12-14T13:50:59.000Z" itemprop="datePublished">2018-12-14</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/深度学习/">深度学习</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/BP算法/">BP算法</a>, <a class="tag-link" href="/tags/梯度下降/">梯度下降</a>, <a class="tag-link" href="/tags/深度学习/">深度学习</a>, <a class="tag-link" href="/tags/链式求导/">链式求导</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>反向传播，即Backpropagation（BP）是the backward propagation of errors的缩写，顾名思义就是误差向后传播（输入/激励前向传播）。反向传播算法对深度学习的发展具有极其重要的意义，可以说是当前深度学习领域中最为核心的一个算法了，它的存在让我们训练更深的深度神经网络变得简单易行。</p>
<p>反向传播算法使用在如梯度下降的优化算法中，作为其计算个网络层中参数的梯度的方法来使用，其主要解决的问题是网络中各层权重参数对最终的损失函数（真实值与预测值的偏差）的贡献量。本文假定我们都是知道像梯度下降这类优化方法的，而梯度下降需要使用梯度值，所以在本文中我们的目标是如何求权重梯度。</p>
<p>反向传播算法利用最基本的链式求导法则来推导计算公式，本身是比较基础的知识，但是一旦结合上多层结构的神经网络就变得繁琐了，特别是对于初学者，各种上下标和字母标记让人看得云里雾里。所以当我开始理解反向传播算法的时候不妨抛开网络本身，先理解其计算方法的本质，然后再结合网络结构推导。当然前提是对神经网络本身的各个基本网络连接与作用有相当的了解。</p>
<h2 id="链式求导法则"><a href="#链式求导法则" class="headerlink" title="链式求导法则"></a>链式求导法则</h2><p>梯度是各个自变量对因变量的偏导的集合，所以求梯度的问题等价于求各个分量的偏导。那么怎么求偏导呢？除了那些最基本函数的导数公式外，对复合函数求导的链式法则肯定是必须的，而这些如 f(g(t(x))) 的形式不正是深度学习中神经网络一层一层的形式么。</p>
<p>我将链式求导法则的基本的公式列出，以帮助回忆其内容，这些都是高等数学微积分课程的基础知识，我就不详细说明了。</p>
<p>对于F(g(x))有（直接贴wiki上的公式）：</p>
<p><img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/63b54293b9ca115caa553c556cc7faa6a022888a" alt="Chain rule"></p>
<p>另一种写法可能更容易理解，对于z=f(y)、y=g(x)有：</p>
<p><img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/075ea30eb4897a37e57bd9ac7bd6a097a1f42167" alt="Chain rule"></p>
<p>如上所说，当前深度学习的神经网络是层级式的，每一层的结构都可以看成其输出对其输入的函数，而上一层的输入到一层输入的连接也可以同样看成一个函数，如此神经网络的整体结构就可以看作一层一层函数的嵌套。当我需要求得某一层参数得导数时，就可以直接使用链式法则即可，这就反向传播算法得数学基础，很简单吧。</p>
<h2 id="用计算图表示网络"><a href="#用计算图表示网络" class="headerlink" title="用计算图表示网络"></a>用计算图表示网络</h2><p>我们以两层网络为例，为了简化流程，我们先隐藏细节，使用计算图来表示神经网络的结构，如下图所示：</p>
<p><img src="/markdownImage/calcgraph.png" alt="简化计算图"></p>
<p>如上我们有两层神经网络的结构，输入X，经过两层网络连接和激活函数输出Yhat，通过损失函数j来衡量真实值与估计值之前的误差大小，误差的结果就是J。输入的数据X通过网络向前传播，而误差J则从输出端通过网络逐层反向传播，这就是反向传播算法的直观描叙。</p>
<p>另外上图中的数值结果表示我都用大写字母写，用以表示这是一个向量或者矩阵。(博客显示公式不是很好，只能截图了)</p>
<ul>
<li>数据正向传播：</li>
</ul>
<p><img src="/markdownImage/bp1.jpg" alt=""></p>
<ul>
<li>求导反向求（应用链式求导法则）：</li>
</ul>
<p><img src="/markdownImage/bp2.jpg" alt=""></p>
<p>上面公式就是使用链式求导法则得到各层输入对最终损失函数的导数，不过在使用中我们真正需要的是：<strong><em>网络层中各层的权重W和偏置B对损失函数的偏导（注意激活函数是没<br>有W和B的）</em></strong>，所以有如下等式：</p>
<ul>
<li>第二层网络：</li>
</ul>
<p><img src="/markdownImage/bp3.jpg" alt=""></p>
<ul>
<li>第一层网络：</li>
</ul>
<p><img src="/markdownImage/bp4.jpg" alt=""></p>
<p>从上面这些公式可以看到，W和B的偏导是从输出端的偏导开始求起，然后逐层求到输入端的。</p>
<h2 id="全连接神经网络的形式"><a href="#全连接神经网络的形式" class="headerlink" title="全连接神经网络的形式"></a>全连接神经网络的形式</h2><p>以上面的计算图为基础，我们开始分析特定的网络，以常见的全连接神经网络多分类器为例子，简单示意图如下（只是示意图，不是说明其中每层中神经元的个数就是图中所示）：</p>
<p><img src="/markdownImage/mlpnet.png" alt="mlp"></p>
<p>那么我们可以写出有一个隐含层（即总共两层）多分类网络的各个表达式：</p>
<ul>
<li>交叉熵损失函数j为，假定有n个类别，注意这里的求和是对后面向量中的元素求和，结果是一个标量：</li>
</ul>
<p><img src="/markdownImage/bp5.jpg" alt=""></p>
<ul>
<li>第二层的激活函数都使用softmax函数，注意分母中的求和表示对向量Z2中的每一个元素求和（顺便写一下特殊化的二分类的sigmod函数）：</li>
</ul>
<p><img src="/markdownImage/bp6.jpg" alt=""></p>
<ul>
<li>第一层激活函数使用relu函数：</li>
</ul>
<p><img src="/markdownImage/bp7.jpg" alt=""></p>
<ul>
<li>两层全连接层函数：</li>
</ul>
<p><img src="/markdownImage/bp8.jpg" alt=""></p>
<p>整合其前向传播的公式如下：</p>
<p><img src="/markdownImage/bp9.jpg" alt=""></p>
<p>下面不写A1等于0的部分</p>
<p><img src="/markdownImage/bp10.jpg" alt=""></p>
<h2 id="求这个全连接网络特定函数的导数"><a href="#求这个全连接网络特定函数的导数" class="headerlink" title="求这个全连接网络特定函数的导数"></a>求这个全连接网络特定函数的导数</h2><ul>
<li>损失函数的导数：</li>
</ul>
<p><img src="/markdownImage/bp11.jpg" alt=""></p>
<ul>
<li>sigmod函数的导数比较简单(先用通用型的x来作为自变量)：</li>
</ul>
<p><img src="/markdownImage/bp12.jpg" alt=""></p>
<ul>
<li>softmax就会稍微复杂一些，虽然它仍然是输入一个向量，输出一个相同尺寸的向量，但是由于softmax函数分母是各项的求和，使得向量中的各个元素不再独立。所以求偏导时我们需要将向量拆分后讨论，用小写字母x和o加下标来表示向量中不同元素（x输入元素，o输出元素，i表示输入端元素引索，j表示输出端元素的引索，k表示任意元素引索），注意与上面的那些大写字母加下标的意思不同，大写字母的下表标网络层次号。<strong>还有一个要注意的是就是，e^ok对oi的偏导只有当k=i时是非零值，其他时候都是0</strong>。</li>
</ul>
<p><img src="/markdownImage/bp13.jpg" alt=""> (i == j)</p>
<p><img src="/markdownImage/bp13_1.jpg" alt=""> (i != j)</p>
<ul>
<li>relu函数的导数(先用通用型的x来作为自变量)：</li>
</ul>
<p><img src="/markdownImage/bp14.jpg" alt=""></p>
<ul>
<li>全连接层函数的导数就不用写了，就是一个简单的线性模型</li>
</ul>
<h2 id="推导权重的偏导"><a href="#推导权重的偏导" class="headerlink" title="推导权重的偏导"></a>推导权重的偏导</h2><p>上面我们已经分析了对于两层多分类网络中，几个特定函数的导数或偏导，下面我将结合上面所有的知识，推导出其每个网络层次的导数，这里小写字母z、w、b第一层和第二层写法可能会重复，<strong>为了区分我加入上标表示不同网络层次，不是平方号</strong>。</p>
<p><img src="/markdownImage/bp15.jpg" alt=""></p>
<p>对于分类问题，Y中只有一个yi为1，其余的都为0，所以一般整合softmax cross entropy在一起，化简后其导数将变为非常简单的形式为：</p>
<p><img src="/markdownImage/bp16.jpg" alt=""></p>
<p>推导第二层的权重和偏置的偏导：</p>
<p><img src="/markdownImage/bp17.jpg" alt=""></p>
<p>第一层的权重和和偏置的偏导计算类似，不过得先计算A1和Z1的偏导。</p>
<p><img src="/markdownImage/bp18.jpg" alt=""></p>
<p>由于Z1的偏导是分段，为简化，为0的那段就不考虑了，因为它已经无法对前面的网络起作用了，所以下面只考虑不为0的那一部分，第一层的权重和和偏置的偏导:</p>
<p><img src="/markdownImage/bp19.jpg" alt=""></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>初始化W和B后，根据前向的公式，我们可以逐层求出Z1、A1、Z2、Yhat、J；然后根据反向传播公式逐层反向求出各层的偏导。实际中，我们并不像上面一样需要写出偏导计算的最终公式，因为它只需要知道其上一层的偏导结果即可，但是得到最终的结果对于我们分析会有特别的好处。例如从上面的权重偏导公式中可以看到，其结果只与两个因素有关，一个是误差项，另一个就是其后面所有层次的权重成绩。</p>
<p>从这一点，我们可以很直接的看出，梯度爆炸与梯度消失的原因，正是由于浅层网络的权重偏导取决于后面所有网络权重的乘积，后面的W过大就会导致乘积项指数增大、而W过小又会导致其乘积越来越接近于0。当然梯度爆炸与梯度消失的主要原因是由于选用的不好的激活函数，我们这里使用的是relu，它在输入值大于0的时候，导数稳定为1所以，所以我们在公式的乘积中没有激活函数导数项，这样的激活函数不会随层次增加而衰减或爆炸。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="https://en.wikipedia.org/wiki/Backpropagation" target="_blank" rel="noopener">Backpropagation</a></li>
<li><a href="https://en.wikipedia.org/wiki/Chain_rule" target="_blank" rel="noopener">Chain rule</a></li>
<li><a href="https://blog.csdn.net/u014380165/article/details/79632950" target="_blank" rel="noopener">卷积神经网络系列之softmaxloss对输入的求导推导</a></li>
<li><a href="https://www.jianshu.com/p/c02a1fbffad6" target="_blank" rel="noopener">简单易懂的softmax交叉熵损失函数求导</a></li>
</ol>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/12/14/反向传播算法推导/" data-id="cjq3rwk3y00409kvd84d9u654" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-numpy的高级操作" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/11/17/numpy的高级操作/">numpy的高级操作</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/11/17/numpy的高级操作/">
            <time datetime="2018-11-17T03:08:12.000Z" itemprop="datePublished">2018-11-17</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/开发工具环境/">开发工具环境</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/numpy/">numpy</a>, <a class="tag-link" href="/tags/python/">python</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="参考教程"><a href="#参考教程" class="headerlink" title="参考教程"></a>参考教程</h2><p>系列视频：<a href="https://www.bilibili.com/video/av11263377" target="_blank" rel="noopener">https://www.bilibili.com/video/av11263377</a></p>
<p>继续继承前文，本文讲介绍numpy使用中一些更高级的知识和操作，这里的高级只是相对前面的基础而言的并不是严格意义上的高级。本文主要所包括的内容有：</p>
<ol>
<li>numpy中更高级的数组</li>
<li>讲python的函数转为numpy的Universal funtion</li>
<li>使用outer函数生成二维数组</li>
</ol>
<h2 id="Structured-Array-and-Record-Array"><a href="#Structured-Array-and-Record-Array" class="headerlink" title="Structured Array and Record Array"></a>Structured Array and Record Array</h2><h4 id="1-Structured-Array"><a href="#1-Structured-Array" class="headerlink" title="1. Structured Array"></a>1. Structured Array</h4><p>对我自己的工作来说，大多数情况下还是只是使用numpy基本的多维数组，对于structured array就接触的非常的少了。structured array是个很灵活的结构，它很类似C语言中的结构体，能够实现自定的数组类型、其中能包含多种基本数值类型，structured array有如下特点：</p>
<ul>
<li>numpy基本的多维数组只能使用一种类型，而structured array则可以让不同类型的结构混合起来定义</li>
<li>相比纯python的更灵活的结构如list和dict，structured array经过numpy底层的优化让其计算相比前者要高效的多</li>
<li>一行赋值时需要用tuple而不是list</li>
<li>基本类型的所占字节数时固定的，在包含字符串元素时需要注意，字符长度超过定义的长度将会截断舍弃</li>
</ul>
<p>如下为定义structured array：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">user_type = [(<span class="string">'name'</span>, <span class="string">'S6'</span>), (<span class="string">'height'</span>, <span class="string">'f8'</span>), (<span class="string">'weight'</span>, <span class="string">'f8'</span>), (<span class="string">'age'</span>, <span class="string">'i8'</span>)]</span><br><span class="line">user_type</span><br></pre></td></tr></table></figure>
<p>对其进行初始化和赋值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">stru_arr = np.zeros(<span class="number">4</span>, dtype=user_type)</span><br><span class="line">stru_arr[<span class="number">0</span>] = (<span class="string">'kaka'</span>, <span class="number">12</span>, <span class="number">82.5</span>, <span class="number">12</span>)</span><br><span class="line">stru_arr[<span class="number">1</span>][<span class="number">0</span>] = <span class="string">'harry456'</span></span><br><span class="line">stru_arr[<span class="number">2</span>][<span class="number">0</span>] = <span class="string">'jack'</span></span><br></pre></td></tr></table></figure>
<p>中structured array中，由于定义的时候，每一列元素类型都有名称，所以可以使用名称来引索整列：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stru_arr[<span class="string">'name'</span>]</span><br></pre></td></tr></table></figure>
<h4 id="2-record-array"><a href="#2-record-array" class="headerlink" title="2. record array"></a>2. record array</h4><p>record array与structured array类似，不过它特点是在引索某一列时将中括号变成成员引用号，如下将上面的structured array转化为record array，使用“.”访问：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rec_arr = np.rec.array(stru_arr)</span><br><span class="line">rec_arr[<span class="number">0</span>].name = <span class="string">'lr'</span></span><br><span class="line"><span class="comment"># 下面两个结果是不一样的</span></span><br><span class="line">stru_arr[<span class="number">0</span>][<span class="string">'name'</span>]</span><br><span class="line">rec_arr[<span class="number">0</span>].name</span><br></pre></td></tr></table></figure>
<h2 id="将普通函数转化为numpy的Universal-funtion"><a href="#将普通函数转化为numpy的Universal-funtion" class="headerlink" title="将普通函数转化为numpy的Universal funtion"></a>将普通函数转化为numpy的Universal funtion</h2><p>NumPy提供了两种基本的对象：ndarray（N-dimensional array object）和 ufunc（universal function object）。ndarray是存储单一数据类型的多维数组，而ufunc则是能够对数组进行处理的函数。ufunc的特点是它能够遍历numpy数组的中的每一个元素，并对其做相同的操作运算，而不需要使用for循环。Numpy内置的许多ufunc函数都是C语言实现的，计算速度非常快。</p>
<p>下面主要演示怎么将普通的python函数变为ufunc，不过这样转化的ufunc只是写法会方便很多，效率提高就不是很多，我自己测试就大概快1倍左右。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">normal_func</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x**<span class="number">2</span>-(x<span class="number">-1</span>)**<span class="number">2</span></span><br><span class="line"></span><br><span class="line">test_dat = np.arange(<span class="number">12</span>).reshape((<span class="number">2</span>,<span class="number">6</span>))</span><br><span class="line">my_ufunc = np.frompyfunc(normal_func, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">my_ufunc(test_dat)</span><br></pre></td></tr></table></figure>
<p>上面代码，可以看到使用frompyfunc函数，将普通的python函数转变为了nfunc，其中第一个参数是需要转化的函数名，第二个参数是转化函数的参数个数，第三个参数是返回值个数。</p>
<h2 id="使用outer函数生成二维数组"><a href="#使用outer函数生成二维数组" class="headerlink" title="使用outer函数生成二维数组"></a>使用outer函数生成二维数组</h2><h4 id="1-numpy-outer"><a href="#1-numpy-outer" class="headerlink" title="1. numpy.outer"></a>1. numpy.outer</h4><p>outer可以用两个向量，生成一个二维数组，直接使用outer函数得到的矩阵原始为向量各个元素的对应乘积，类似于混淆矩阵。如下为用outer函数生成一个记录9x9的乘法表矩阵：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v1 = np.arange(<span class="number">9</span>)+<span class="number">1</span></span><br><span class="line">v2 = np.arange(<span class="number">9</span>)+<span class="number">1</span></span><br><span class="line">np.outer(v1, v2)</span><br></pre></td></tr></table></figure>
<h4 id="2-numpy-ufunc-outer"><a href="#2-numpy-ufunc-outer" class="headerlink" title="2. numpy.ufunc.outer"></a>2. numpy.ufunc.outer</h4><p>处理直接使用outer外，还支持numpy的ufunc，在这种使用中outer函数的生成方法由ufunc决定。如下就是将操作从默认的乘法换成加法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.add.outer(v1,v2)</span><br></pre></td></tr></table></figure>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/11/17/numpy的高级操作/" data-id="cjq3rwk35002c9kvdlck303cr" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-numpy的基础操作2" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/11/10/numpy的基础操作2/">numpy的基础操作2</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/11/10/numpy的基础操作2/">
            <time datetime="2018-11-10T13:28:03.000Z" itemprop="datePublished">2018-11-10</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/开发工具环境/">开发工具环境</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/numpy/">numpy</a>, <a class="tag-link" href="/tags/python/">python</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="参考教程"><a href="#参考教程" class="headerlink" title="参考教程"></a>参考教程</h2><p>系列视频：<a href="https://www.bilibili.com/video/av11263377" target="_blank" rel="noopener">https://www.bilibili.com/video/av11263377</a></p>
<p>继承前文，本文讲重点讲解numpy数组与数组，主要内容包括：</p>
<ol>
<li>数组元素顺序的重新排列</li>
<li>数组的转置操作</li>
<li>数组的重复操作</li>
<li>数组的分解和拼接</li>
</ol>
<h2 id="修改元素排列顺序"><a href="#修改元素排列顺序" class="headerlink" title="修改元素排列顺序"></a>修改元素排列顺序</h2><h4 id="1-fliplr"><a href="#1-fliplr" class="headerlink" title="1. fliplr"></a>1. fliplr</h4><p>fliplr函数可以将数组左右元素的排列反序（l：left r：right 表示左右），需要注意的是不同维度数组的结果差异，且数组维度必须2维或以上的，其反序在都是在数组的第一纬度上。</p>
<h4 id="2-flipud"><a href="#2-flipud" class="headerlink" title="2. flipud"></a>2. flipud</h4><p>fliplr函数可以将数组上下元素的排列反序（u：up，d：down 表示上下）。其反序在都是在数组的第零纬度上。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr_d2 = np.arange(<span class="number">10</span>).reshape((<span class="number">2</span>,<span class="number">5</span>))</span><br><span class="line">np.fliplr(arr_d2)</span><br><span class="line">np.flipud(arr_d2)</span><br></pre></td></tr></table></figure>
<h4 id="3-roll"><a href="#3-roll" class="headerlink" title="3. roll"></a>3. roll</h4><p>循环移动，注意即使是多维数组roll时，仍然以一维的顺序移动</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr_d2 = np.arange(<span class="number">10</span>).reshape((<span class="number">2</span>,<span class="number">5</span>))</span><br><span class="line">np.roll(arr_d2, <span class="number">-2</span>)</span><br></pre></td></tr></table></figure>
<h2 id="转置操作"><a href="#转置操作" class="headerlink" title="转置操作"></a>转置操作</h2><h4 id="1-transpose"><a href="#1-transpose" class="headerlink" title="1. transpose"></a>1. transpose</h4><p>transpose转置操作，当数组是二维时默认为矩阵的转置操作，其axis参数可以设置转置维度的排列顺序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 两者一样</span></span><br><span class="line">np.transpose(arr_d2)</span><br><span class="line">arr_d2.T</span><br><span class="line"><span class="comment"># 指定顺序</span></span><br><span class="line">arr_d3 = np.arange(<span class="number">24</span>).reshape((<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">tra = np.transpose(arr_d3, axes=(<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>))</span><br></pre></td></tr></table></figure>
<h4 id="2-swapaxes"><a href="#2-swapaxes" class="headerlink" title="2. swapaxes"></a>2. swapaxes</h4><p>交换两个维度：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.swapaxes(arr_d2, <span class="number">1</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h4 id="3-stack"><a href="#3-stack" class="headerlink" title="3. stack"></a>3. stack</h4><p>stack函数它也是对数组指定维度维度上的交换，小于axis参数的维度都会被交换:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ret = np.stack(arr_d3, axis=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h4 id="4-rollaxis"><a href="#4-rollaxis" class="headerlink" title="4. rollaxis"></a>4. rollaxis</h4><p>维度的循环交换:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.rollaxis(arr_d3, <span class="number">0</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h2 id="重复操作"><a href="#重复操作" class="headerlink" title="重复操作"></a>重复操作</h2><h4 id="1-tile"><a href="#1-tile" class="headerlink" title="1. tile"></a>1. tile</h4><p>在生成数据时，很可能需要将数据重复多份，在numpy中最常用的重复函数就是tile。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr_d1 = np.arange(<span class="number">10</span>)</span><br><span class="line">np.tile(arr_d1, <span class="number">3</span>)</span><br><span class="line">np.tile(arr_d1, (<span class="number">3</span>,<span class="number">2</span>))</span><br><span class="line">np.tile(arr_d2, (<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<h4 id="2-repeat"><a href="#2-repeat" class="headerlink" title="2. repeat"></a>2. repeat</h4><p>repeat函数与tile函数功能类似，不过repeat函数可以指定沿某个轴复制，另外tile复制时是将原有数组得一个维度整体重复复制，而repeat则可以精确到每一个元素。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr_d3 = np.arange(<span class="number">24</span>).reshape((<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">np.repeat(arr_d3, <span class="number">2</span>, axis=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h2 id="拼接与分解数组"><a href="#拼接与分解数组" class="headerlink" title="拼接与分解数组"></a>拼接与分解数组</h2><h4 id="1-concatenate"><a href="#1-concatenate" class="headerlink" title="1. concatenate"></a>1. concatenate</h4><p>join操作的一种, 实际上和append的方法类似，但是它允许输入多个数组一起连接:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">orig_arr = np.arange(<span class="number">12</span>).reshape(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">orig_arr1 = np.arange(<span class="number">112</span>,<span class="number">124</span>).reshape(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">con_arr = np.concatenate((orig_arr, orig_arr1, orig_arr), axis=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h4 id="2-split"><a href="#2-split" class="headerlink" title="2. split"></a>2. split</h4><p>split函数可以将一个数组划分成几个相等元素个数的子数组，注意设置划分个数时一定号被整除被划分的轴的长度整除</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.split(np.arange(<span class="number">12</span>), <span class="number">4</span>)</span><br><span class="line">orig_arr = np.arange(<span class="number">12</span>).reshape(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">np.split(orig_arr, <span class="number">2</span>, axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/11/10/numpy的基础操作2/" data-id="cjq3rwk3300289kvd82ml9kn4" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-numpy的基础操作1" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/11/10/numpy的基础操作1/">numpy的基础操作1</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/11/10/numpy的基础操作1/">
            <time datetime="2018-11-10T13:02:28.000Z" itemprop="datePublished">2018-11-10</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/开发工具环境/">开发工具环境</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/numpy/">numpy</a>, <a class="tag-link" href="/tags/python/">python</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="参考教程"><a href="#参考教程" class="headerlink" title="参考教程"></a>参考教程</h2><p>系列视频：<a href="https://www.bilibili.com/video/av11263377" target="_blank" rel="noopener">https://www.bilibili.com/video/av11263377</a></p>
<p>本文的知识点将只包括numpy数据的基础使用方法，将会涉及到如下内容：</p>
<ol>
<li>numpy ndarry基本数组的生成</li>
<li>数组深浅拷贝</li>
<li>数组的基本形状改变</li>
<li>指定维度上的计算</li>
<li>不同shape也可以运算的操作</li>
<li>数组的增删操作</li>
<li>Mask array的一些特性</li>
<li>小数数组打印的技巧</li>
</ol>
<p>不过本文是属于查漏补缺性质的，重点在那些容易忽略的地方，而那些大多数人都知道的部分就不会再细写了。</p>
<h2 id="linspace函数的使用-数组初始化"><a href="#linspace函数的使用-数组初始化" class="headerlink" title="linspace函数的使用(数组初始化)"></a>linspace函数的使用(数组初始化)</h2><p>之前的工作中，创建numpy的数组我一直都习惯用arange、zeros、ones这几个函数，而对linspace这个函数却不是很熟悉。linspace与arange的作用有些相似，都能生成等间隔的数组，但是两者有如下区别：</p>
<ol>
<li>需要固定步长用arange，而需要固定生成数目的个数用linspace，因为linspace会自动计算步长，设置retstep参数可以返回计算的步长</li>
<li>arange生成的数组不包endpoint的值，而linspace则包含</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.linspace(<span class="number">0</span>, <span class="number">15</span>, <span class="number">5</span>, retstep=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<h2 id="view和copy-浅拷贝与深拷贝"><a href="#view和copy-浅拷贝与深拷贝" class="headerlink" title="view和copy(浅拷贝与深拷贝)"></a>view和copy(浅拷贝与深拷贝)</h2><p>view时浅拷贝，copy时深拷贝，在我的一般使用中只用copy就可以满足了，不过其实view也有比较好的应用场景，如同一数组希望用<strong>不同维度</strong>或<strong>不同的类型</strong>的形式使用，下面代码，arr_v2是arr_v1的view，但是在使用Ⅹ不仅将其纬度改变了还将其元素类型也改变了，对arr_v2的修改会影响arr_v1：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">arr_v1 = np.array([<span class="number">1</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">15</span>,<span class="number">20</span>,<span class="number">25</span>])</span><br><span class="line">arr_v2 = arr_v1.view()</span><br><span class="line">arr_v2.shape = (<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">arr_v2.dtype = np.int8</span><br><span class="line">arr_v2[<span class="number">2</span>,<span class="number">2</span>] =<span class="number">255</span></span><br></pre></td></tr></table></figure>
<h2 id="修改reshape"><a href="#修改reshape" class="headerlink" title="修改reshape"></a>修改reshape</h2><h4 id="1-reshape"><a href="#1-reshape" class="headerlink" title="1. reshape"></a>1. reshape</h4><p>shape相关的函数最常用的就是reshape了，但是<em>注意：reshape函数是view而不是copy</em></p>
<h4 id="2-ravel函数和flat属性"><a href="#2-ravel函数和flat属性" class="headerlink" title="2. ravel函数和flat属性"></a>2. ravel函数和flat属性</h4><p>ravel将多维数组转为一个一维数组, flat属性则提供是一个迭代器顺序读取数组，使用代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ravel</span></span><br><span class="line">orig_arr = np.arange(<span class="number">12</span>).reshape(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">new_arr = orig_arr.ravel()</span><br><span class="line"><span class="comment"># flat</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> orig_arr.flat:</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure>
<h2 id="指定操作的维度"><a href="#指定操作的维度" class="headerlink" title="指定操作的维度"></a>指定操作的维度</h2><p>默认的sum、mean等操作是对数组中所有的元素进行对应的计算，如果只希望在某一个维度上或者几个维度上操作则需要设置其axis参数:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr1 = np.arange(<span class="number">12</span>).reshape((<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line">print(arr1.mean())</span><br><span class="line">print(arr1.mean(axis=<span class="number">0</span>))</span><br><span class="line">print(arr1.mean(axis=(<span class="number">0</span>,<span class="number">1</span>)))</span><br></pre></td></tr></table></figure>
<h2 id="shape不同的array计算"><a href="#shape不同的array计算" class="headerlink" title="shape不同的array计算"></a>shape不同的array计算</h2><p>多维数组之间的运算一般都要求参与运算的array的shape要保持一致，但是也有一些运算没有这样的限制：</p>
<ol>
<li>矩阵乘法：矩阵的乘法需要用dot函数，满足矩阵乘法的要求即可</li>
<li>参与运算的一个数组的shape是其中另一个数组shape的一部分</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr1 = np.arange(<span class="number">12</span>).reshape((<span class="number">2</span>,<span class="number">6</span>))</span><br><span class="line">arr2 = np.arange(<span class="number">0</span>,<span class="number">6</span>)</span><br><span class="line">arr1 / arr2</span><br></pre></td></tr></table></figure>
<h2 id="添加和删减数组成员"><a href="#添加和删减数组成员" class="headerlink" title="添加和删减数组成员"></a>添加和删减数组成员</h2><p>这一部分对于我个人来说是最不熟悉的，因为在一般情况下创建新的数组然后赋值，同样也可以达到添加和删减的效果。只不过有时候赋值操作需要使用for循环来实现而无法直接完成，这个时候使用numpy数组提供的添加和删除操作就方便多了。</p>
<h4 id="1-append操作"><a href="#1-append操作" class="headerlink" title="1. append操作"></a>1. append操作</h4><p>append操作原数组不变，返回的数组将变成一维，然后再后面追加元素:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">orig_arr = np.arange(<span class="number">12</span>).reshape(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">ap_arr = np.append(orig_arr, [<span class="number">100</span>,<span class="number">100</span>])</span><br></pre></td></tr></table></figure>
<p>append也可以沿着这某一个维度添加：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">orig_arr = np.arange(<span class="number">12</span>).reshape(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">orig_arr1 = np.arange(<span class="number">112</span>,<span class="number">124</span>).reshape(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">np.append(orig_arr, orig_arr1, axis=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h4 id="2-hstack操作"><a href="#2-hstack操作" class="headerlink" title="2. hstack操作"></a>2. hstack操作</h4><p>与append在axis设置为1时是一样的:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">orig_arr = np.arange(<span class="number">12</span>).reshape(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">orig_arr1 = np.arange(<span class="number">112</span>,<span class="number">124</span>).reshape(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">ret_arr = np.hstack((orig_arr,orig_arr1))</span><br><span class="line">ret_arr, ret_arr.shape</span><br></pre></td></tr></table></figure>
<h4 id="3-insert操作"><a href="#3-insert操作" class="headerlink" title="3. insert操作"></a>3. insert操作</h4><p>insert操作实际上也是重新生成一个新的数组，它于append的区别是，append只能够再尾部添加，而insert能够指定位置添加，insert也可以指定纬度：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ins_arr = np.insert(orig_arr, <span class="number">1</span>, <span class="number">666</span>)</span><br><span class="line">ins_arr = np.insert(orig_arr, (<span class="number">1</span>,<span class="number">2</span>), <span class="number">666</span>, axis=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h4 id="4-delete操作"><a href="#4-delete操作" class="headerlink" title="4. delete操作"></a>4. delete操作</h4><p>同上delete是新生成数组而不是再原数组上删除，delete可以删除指定位置的元素，多维数组删除一个元素会退化为一维，也可以可以在指定纬度上的数据：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">del_arr = np.delete(orig_arr, <span class="number">1</span>)</span><br><span class="line">del_arr = np.delete(orig_arr, <span class="number">1</span>, axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Mask-Array"><a href="#Mask-Array" class="headerlink" title="Mask Array"></a>Mask Array</h2><p>虽然mask数组在实际工作使用中得很多，但是有些细节还是不是很清楚，所以这里会注重一些使用中没有关注到的细节。</p>
<h4 id="1-运算优先级"><a href="#1-运算优先级" class="headerlink" title="1. 运算优先级"></a>1. 运算优先级</h4><p>mask数组一般由关系运算得到，对于很多关系运算符需要注意得是其运算优先级，生成的mask与原数组同shape</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nd_arr = np.arange(<span class="number">36</span>).reshape((<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>))</span><br><span class="line">ma_ndarr = nd_arr % <span class="number">5</span> == <span class="number">0</span></span><br></pre></td></tr></table></figure>
<h4 id="2-作为引索使用"><a href="#2-作为引索使用" class="headerlink" title="2. 作为引索使用"></a>2. 作为引索使用</h4><p>使用mask可以得到子数组，但是多维数组在用mask引索得到得子数组是一维的：</p>
<h4 id="3-多个mask联合"><a href="#3-多个mask联合" class="headerlink" title="3. 多个mask联合"></a>3. 多个mask联合</h4><p>可以多个mask联合使用，需要使用相应的逻辑运算函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr = np.arange(<span class="number">10</span>)</span><br><span class="line">ma_arr1 = arr % <span class="number">3</span> == <span class="number">0</span></span><br><span class="line">ma_arr2 = arr &gt; <span class="number">5</span></span><br><span class="line">comb_ma = np.logical_and(ma_arr1, ma_arr2)</span><br></pre></td></tr></table></figure>
<h2 id="使用set-printoptions函数设置打印格式"><a href="#使用set-printoptions函数设置打印格式" class="headerlink" title="使用set_printoptions函数设置打印格式"></a>使用set_printoptions函数设置打印格式</h2><p>在打印计算的结果的时候，最常见的一个问题是结果过小，显示的数字太长，不方便阅读，可以使用set_printoptions的precision参数设置显示精度，除此之外set_printoptions还有更多的设置:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">np.set_printoptions(precision=<span class="number">6</span>)</span><br><span class="line">print(arr1/<span class="number">7</span>)</span><br></pre></td></tr></table></figure>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/11/10/numpy的基础操作1/" data-id="cjq3rwk3200259kvdr09bs3mm" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-OpenGL纹理映射" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/10/24/OpenGL纹理映射/">OpenGL纹理映射</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/10/24/OpenGL纹理映射/">
            <time datetime="2018-10-24T13:19:41.000Z" itemprop="datePublished">2018-10-24</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/OpenGL/">OpenGL</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/C/">C++</a>, <a class="tag-link" href="/tags/OpenGL/">OpenGL</a>, <a class="tag-link" href="/tags/Shader/">Shader</a>, <a class="tag-link" href="/tags/纹理/">纹理</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="纹理的作用"><a href="#纹理的作用" class="headerlink" title="纹理的作用"></a>纹理的作用</h2><p>在渲染的时候，为了让图像看起来真实，我们就必须由足够多的定点，指定足够多的定点颜色，但是这样会导致每个模型都会有巨大的开销。为了解决这个问题，我们通常使用2D的图片来代替更多的端点，由于图片上有很多细节，所以在渲染时就可以直接使用图片覆盖在3D物体的表面，让渲染出来的物体看起来更加精致，这就是纹理的作用。</p>
<h2 id="纹理的创建与加载"><a href="#纹理的创建与加载" class="headerlink" title="纹理的创建与加载"></a>纹理的创建与加载</h2><h4 id="1-加载纹理图片"><a href="#1-加载纹理图片" class="headerlink" title="1. 加载纹理图片"></a>1. 加载纹理图片</h4><p>我们知道纹理来源于2D的图片，所以第一步我们需要从原始纹理的图片文件中读出图像的原始数据。有如果使用了opencv的话，可以很方便读取常见格式的图片到mat对象中，但是在一般OpenGL工程中也不会为读取图片特别去配置opencv的环境，一般可以使用一些比较小巧的库。当前比较常用的是std_image.h，它是个单头文件图像加载库，它能够加载大部分流程的图像格式。也正是由于它只有一个头文件，所以将它加载到工程是非常方便的。</p>
<p>std_image.h文件下载地址为：<a href="https://github.com/nothings/stb/blob/master/stb_image.h" target="_blank" rel="noopener">https://github.com/nothings/stb/blob/master/stb_image.h</a></p>
<p>加载图像文件代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STB_IMAGE_IMPLEMENTATION</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stb_image.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> width, height, nrChannels;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> *data = stbi_load(<span class="string">"container.jpg"</span>, &amp;width, &amp;height, &amp;nrChannels, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>由于在load图像的时候申请了内存，所以在使用完成后，需要记得释放内存空间：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stbi_image_free(data);</span><br></pre></td></tr></table></figure>
<h4 id="2-创建纹理"><a href="#2-创建纹理" class="headerlink" title="2. 创建纹理"></a>2. 创建纹理</h4><p>在载获取到了图像的数据后，需要使用OpenGL创建绑定纹理、载入图像数据，除此之外一般会要设置纹理的一些配置属性如：“纹理环绕方式”、“纹理过滤”、“多级渐远纹理”。</p>
<ul>
<li>纹理环绕方式，可以设置当纹理坐标超过(0, 0)到(1, 1)这个限定范围后的操作，重复这个纹理图像，s、t时其两个方向</li>
<li>纹理过滤，可以指定在超过原始图像分辨率时怎么插值，有放大(Magnify)和缩小(Minify)两种情况</li>
</ul>
<p>以下为这些操作的基本流程代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> texture;</span><br><span class="line">glGenTextures(<span class="number">1</span>, &amp;texture);</span><br><span class="line">glBindTexture(GL_TEXTURE_2D, texture);</span><br><span class="line"><span class="comment">// 为当前绑定的纹理对象设置环绕、过滤方式</span></span><br><span class="line">glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);</span><br><span class="line">glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);</span><br><span class="line">glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);</span><br><span class="line">glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"><span class="comment">// 加载并生成纹理</span></span><br><span class="line"><span class="keyword">int</span> width, height, nrChannels;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> *data = stbi_load(<span class="string">"container.jpg"</span>, &amp;width, &amp;height, &amp;nrChannels, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span> (data)</span><br><span class="line">&#123;</span><br><span class="line">    glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, GL_RGB, width, height, <span class="number">0</span>, GL_RGB,</span><br><span class="line">GL_UNSIGNED_BYTE, data);</span><br><span class="line">    glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to load texture"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="纹理映射"><a href="#纹理映射" class="headerlink" title="纹理映射"></a>纹理映射</h2><p>为了将2D的图片贴附在3D的物体上，有一个非常关键的过程就是要确定纹理图的哪部分对应3D物体的那部分，这就是纹理映射要解决的问题。</p>
<h4 id="1-纹理坐标"><a href="#1-纹理坐标" class="headerlink" title="1. 纹理坐标"></a>1. 纹理坐标</h4><p>首先要规定的是纹理坐标(Texture Coordinate)，由于纹理实际上是一张2D的图像，所以纹理坐标是一个二维坐标，左下角为坐标原点，右上角坐标规定为（1，1），这就是整个纹理坐标系的范围；而另外由于原始纹理图片是有分辨率大小的，所以在映射时需要插值来获取超过了分辨的像素点。</p>
<h4 id="2-纹理属性"><a href="#2-纹理属性" class="headerlink" title="2. 纹理属性"></a>2. 纹理属性</h4><p>在确定了纹理坐标后，我们只需要将端点坐标与纹理坐标一一对应起来就可以了，使用OpenGL的顶点数组可以规定格式如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> vertices[] = &#123;</span><br><span class="line"><span class="comment">//     ---- 位置 ----       ---- 颜色 ----     - 纹理坐标 -</span></span><br><span class="line">     <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>,   <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,   <span class="number">1.0f</span>, <span class="number">1.0f</span>,   <span class="comment">// 右上</span></span><br><span class="line">     <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>,   <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,   <span class="number">1.0f</span>, <span class="number">0.0f</span>,   <span class="comment">// 右下</span></span><br><span class="line">    <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>,   <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,   <span class="number">0.0f</span>, <span class="number">0.0f</span>,   <span class="comment">// 左下</span></span><br><span class="line">    <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>,   <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,   <span class="number">0.0f</span>, <span class="number">1.0f</span>    <span class="comment">// 左上</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>如上代码，在vertices数组中每8个数据代表一个端点，前三个为三维的位置坐标，中间3个为端点的RGB颜色属性，最后两个为其对应纹理贴图中的位置的纹理坐标，在内存中分布如下图：</p>
<p><img src="/markdownImage/vertexarray.png" alt="vertices格式"></p>
<p>有了以上端点数组后，就可以指定顶点属性，告诉OpenGL如何解析。前面两个属性不再写了，下面是添加纹理坐标属性的代码:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">glVertexAttribPointer(<span class="number">2</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="number">8</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">6</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">glEnableVertexAttribArray(<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<h4 id="3-在Shader中的处理"><a href="#3-在Shader中的处理" class="headerlink" title="3. 在Shader中的处理"></a>3. 在Shader中的处理</h4><p>一般在顶点Shader中，会将传入的顶点数组，依照设置的顶点属性进行解析，然后传入片元Shader中处理；在片元Shader中需要使用到GLSL供纹理对象使用的内建数据类型，叫做采样器(Sampler)，它以纹理类型作为后缀，比如sampler1D、sampler3D，在这里我们使用sampler2D；另外我们使用GLSL内建的texture函数来采样纹理的颜色，它第一个参数是纹理采样器，第二个参数是对应的纹理坐标。</p>
<p>片元Shader的代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#version 330 core</span></span><br><span class="line">out vec4 FragColor;</span><br><span class="line"></span><br><span class="line">in vec3 ourColor;</span><br><span class="line">in vec2 TexCoord;</span><br><span class="line"></span><br><span class="line">uniform sampler2D ourTexture;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    FragColor = texture(ourTexture, TexCoord);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="绘制纹理"><a href="#绘制纹理" class="headerlink" title="绘制纹理"></a>绘制纹理</h2><p>以上纹理操作全部完成后，就可以绘制了：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">glBindTexture(GL_TEXTURE_2D, texture);</span><br><span class="line">glBindVertexArray(VAO);</span><br><span class="line">glDrawElements(GL_TRIANGLES, <span class="number">6</span>, GL_UNSIGNED_INT, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="https://learnopengl-cn.github.io/01%20Getting%20started/06%20Textures/" target="_blank" rel="noopener">LearnOpenGL CN - 纹理</a></li>
</ol>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/10/24/OpenGL纹理映射/" data-id="cjq3rwk29000r9kvdx53xcszw" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-现代OpenGL的基本使用" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/10/20/现代OpenGL的基本使用/">现代OpenGL的基本使用</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/10/20/现代OpenGL的基本使用/">
            <time datetime="2018-10-20T14:12:19.000Z" itemprop="datePublished">2018-10-20</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/OpenGL/">OpenGL</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Assimp/">Assimp</a>, <a class="tag-link" href="/tags/C/">C++</a>, <a class="tag-link" href="/tags/GLAD/">GLAD</a>, <a class="tag-link" href="/tags/GLFW/">GLFW</a>, <a class="tag-link" href="/tags/OpenGL/">OpenGL</a>, <a class="tag-link" href="/tags/Shader/">Shader</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>OpenGL不过作为一个标准不断更新与改进的底层图形库，其新旧版本的使用区别很大，前面我们使用python接口对OpenGL进行简单的使用用的是其老式的方法，现在我们要使用新的特性，因此本文在实际代码实现中结合新版OpenGL的特性进行说明。另外为避免因版本不同而导致的问题，使用其原生的C++的接口通常是一个更好的选择。</p>
<p>在这里我使用环境如下：</p>
<ul>
<li>系统：Windows 10</li>
<li>编译器：VS 2015</li>
</ul>
<h2 id="会使用到的概念"><a href="#会使用到的概念" class="headerlink" title="会使用到的概念"></a>会使用到的概念</h2><h4 id="1-标准化设备坐标-Normalized-Device-Coordinates-NDC"><a href="#1-标准化设备坐标-Normalized-Device-Coordinates-NDC" class="headerlink" title="1. 标准化设备坐标(Normalized Device Coordinates, NDC)"></a>1. 标准化设备坐标(Normalized Device Coordinates, NDC)</h4><p>标准化设备坐标是一个x、y和z值在-1.0到1.0的一小段空间。任何落在范围外的坐标都会被丢弃/裁剪，不会显示在你的屏幕上。与通常的屏幕坐标不同，y轴正方向为向上，(0, 0)坐标是这个图像的中心，而不是左上角。最终你希望所有(变换过的)坐标都在这个坐标空间中，否则它们就不可见了。</p>
<p>OpenGL仅当3D坐标在3个轴（x、y和z）上都为-1.0到1.0的范围内时才处理它。所有在所谓的标准化设备坐标(Normalized Device Coordinates)范围内的坐标才会最终呈现在屏幕上，一旦你的顶点坐标已经在顶点着色器中处理过，它们就应该是标准化设备坐标了。</p>
<h4 id="2-顶点缓冲对象-Vertex-Buffer-Objects-VBO"><a href="#2-顶点缓冲对象-Vertex-Buffer-Objects-VBO" class="headerlink" title="2. 顶点缓冲对象(Vertex Buffer Objects, VBO)"></a>2. 顶点缓冲对象(Vertex Buffer Objects, VBO)</h4><p>我们通过顶点缓冲对象(Vertex Buffer Objects, VBO)管理这个内存，它会在GPU内存（通常被称为显存）中储存大量顶点。使用这些缓冲对象的好处是我们可以一次性的发送一大批数据到显卡上，而不是每个顶点发送一次。</p>
<p>顶点缓冲对象是我们在接触现代OpenGL各种对象中最基本的一类。它与其他OpenGL中的对象一样，有一个独一无二的ID，通过glGenBuffers函数生成；同时使用glBindBuffer函数设置缓冲类型；我们可以调用glBufferData函数，它会把之前定义的顶点数据复制到缓冲的内存中。</p>
<h4 id="3-着色器"><a href="#3-着色器" class="headerlink" title="3. 着色器"></a>3. 着色器</h4><p>如果我们打算做渲染的话，现代OpenGL需要我们至少设置一个顶点和一个片段着色器。我们需要做的第一件事是用着色器语言GLSL(OpenGL Shading Language)编写顶点着色器，然后编译这个着色器，这样我们就可以在程序中使用它了。</p>
<p>顶点着色器代码如下，功能只是坐标转化，将输入的坐标转化为OpenGL内部能够处理的形式，相当于最简单的着色器了：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#version 330 core</span></span><br><span class="line">layout (location = <span class="number">0</span>) in vec3 aPos;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    gl_Position = vec4(aPos.x, aPos.y, aPos.z, <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>片段着色器代码如下，功能同样是最简单的了，即设置固定的颜色：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#version 330 core</span></span><br><span class="line">out vec4 FragColor;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    FragColor = vec4(<span class="number">1.0f</span>, <span class="number">0.5f</span>, <span class="number">0.2f</span>, <span class="number">1.0f</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-编译和链接着色器"><a href="#4-编译和链接着色器" class="headerlink" title="4. 编译和链接着色器"></a>4. 编译和链接着色器</h4><p>上面的着色器代码，我们必须在运行时动态编译它的源码，才能够让OpenGL使用。首先要做的是创建一个着色器对象，注意还是用ID来引用的。首先用glCreateShader创建这个着色器，然后我们把这个着色器源码附加到着色器对象上，然后再编译它。</p>
<p>着色器程序对象(Shader Program Object)是多个着色器合并之后并最终链接完成的版本。如果要使用刚才编译的着色器我们必须把它们链接(Link)为一个着色器程序对象，然后在渲染对象的时候激活这个着色器程序。已激活着色器程序的着色器将在我们发送渲染调用的时候被使用。当链接着色器至一个程序的时候，它会把每个着色器的输出链接到下个着色器的输入。当输出和输入不匹配的时候，你会得到一个连接错误。</p>
<h2 id="编译两个第三方库"><a href="#编译两个第三方库" class="headerlink" title="编译两个第三方库"></a>编译两个第三方库</h2><ul>
<li>GLAD 负责绘图函数的获取</li>
<li>GLFW 负责创建绘图上下文和窗口系统管理</li>
</ul>
<h4 id="1-GLFW库"><a href="#1-GLFW库" class="headerlink" title="1. GLFW库"></a>1. GLFW库</h4><p>GLFW是一个专门针对OpenGL的C语言库，它提供了一些渲染物体所需的最低限度的接口，所以它非常的小。它允许用户创建OpenGL上下文，定义窗口参数以及处理用户输入。</p>
<p>为了使用GLFW，同时避免一些兼容性的问题，我们最好自己下载源码编译，GLFW的下载地址为：<a href="http://www.glfw.org/download.html" target="_blank" rel="noopener">http://www.glfw.org/download.html</a>，其编译过程在参考链接1中有详细的讲解。编译成成功后会在src/Debug或者src/Release中生成库文件：glfw3.lib</p>
<h4 id="2-配置GLAD"><a href="#2-配置GLAD" class="headerlink" title="2. 配置GLAD"></a>2. 配置GLAD</h4><p>GLAD是一个开源的库，作用是为了简化OpenGL中的函数调用。在参考链接2中使用的是GLEW库，其作用是一样的。</p>
<p>GLAD使用了一个在线服务，地址为：<a href="https://glad.dav1d.de/" target="_blank" rel="noopener">https://glad.dav1d.de/</a>,选择相应的配置选项，网站就能自动生成库文件。在这里我们只要选择语言为：c/c++、Profile：core、版本选择3.3或者以上就可以了。</p>
<p>GLAD现在应该提供给你了一个zip压缩文件，下载zip文件，包含两个头文件目录，和一个glad.c文件。将两个头文件目录（glad和KHR）复制到你的Include文件夹中（或者增加一个额外的项目指向这些目录），并添加glad.c文件到你的工程中。</p>
<h2 id="新建VS工程"><a href="#新建VS工程" class="headerlink" title="新建VS工程"></a>新建VS工程</h2><p>新建vs空项目，将OpenGL、GLFW、GLAD的目录与库文件添加项目属性中，具体说明见参考链接1。对于Windows平台，opengl32.lib已经包含在Microsoft SDK里了，它在Visual Studio安装的时候就默认安装了，但是需要将GLFW、GLAD库加入。</p>
<h2 id="基本窗口代码"><a href="#基本窗口代码" class="headerlink" title="基本窗口代码"></a>基本窗口代码</h2><p>下面代码，主要用创建窗口, setVertixData()、deleteObj()、compileShader()、render()函数暂时为空。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;glad/glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;GLFW/glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow *window)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setVertixData</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VBO, <span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VAO)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">deleteObj</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VBO, <span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VAO)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">compileShader</span><span class="params">(<span class="keyword">int</span>&amp; shaderProgram)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">render</span><span class="params">(<span class="keyword">int</span>&amp; shaderProgram, <span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VAO)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    glfwInit();</span><br><span class="line">    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">    glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line">    GLFWwindow* window = glfwCreateWindow(<span class="number">800</span>, <span class="number">600</span>, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">            <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">            glfwTerminate();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    glfwMakeContextCurrent(window);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// GLAD init</span></span><br><span class="line">    <span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">    &#123;</span><br><span class="line">            <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 编译shader</span></span><br><span class="line">    <span class="keyword">int</span> shaderProgram;</span><br><span class="line">    compileShader(shaderProgram);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置定点对象</span></span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> VBO, VAO;</span><br><span class="line">    setVertixData(VBO, VAO);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置视窗大小</span></span><br><span class="line">    glViewport(<span class="number">0</span>, <span class="number">0</span>, <span class="number">800</span>, <span class="number">600</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 窗口大小改变时的回调：随窗口改变调整绘制</span></span><br><span class="line">    glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 在窗口关闭前一直绘制</span></span><br><span class="line">    <span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">    &#123;</span><br><span class="line">            <span class="comment">// 接受窗口输入</span></span><br><span class="line">            processInput(window);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 渲染指令</span></span><br><span class="line">            render(shaderProgram, VAO);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 检查并调用事件，交换缓冲</span></span><br><span class="line">            glfwSwapBuffers(window);</span><br><span class="line">            glfwPollEvents();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除创建的对象</span></span><br><span class="line">    deleteObj(VBO, VAO);</span><br><span class="line"></span><br><span class="line">    glfwTerminate();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="基本绘制代码"><a href="#基本绘制代码" class="headerlink" title="基本绘制代码"></a>基本绘制代码</h2><p>以下实现setVertixData()、deleteObj()、compileShader()、render()四个函数，功能是绘制一个三角形，shader代码也直接集成到c++源码中，用字符串数组记录：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *vertexShaderSource = <span class="string">"#version 330 core\n"</span></span><br><span class="line"><span class="string">"layout (location = 0) in vec3 aPos;\n"</span></span><br><span class="line"><span class="string">"void main()\n"</span></span><br><span class="line"><span class="string">"&#123;\n"</span></span><br><span class="line"><span class="string">"   gl_Position = vec4(aPos.x, aPos.y, aPos.z, 1.0);\n"</span></span><br><span class="line"><span class="string">"&#125;\0"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *fragmentShaderSource = <span class="string">"#version 330 core\n"</span></span><br><span class="line"><span class="string">"out vec4 FragColor;\n"</span></span><br><span class="line"><span class="string">"void main()\n"</span></span><br><span class="line"><span class="string">"&#123;\n"</span></span><br><span class="line"><span class="string">"   FragColor = vec4(1.0f, 0.5f, 0.2f, 1.0f);\n"</span></span><br><span class="line"><span class="string">"&#125;\n\0"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setVertixData</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VBO, <span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VAO)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> vertices[] = &#123;</span><br><span class="line">        <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>,</span><br><span class="line">        <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>,</span><br><span class="line">        <span class="number">0.0f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    glGenBuffers(<span class="number">1</span>, &amp;VBO);</span><br><span class="line">    glGenVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// bind the Vertex Array Object first, then bind and set vertex buffer(s), and then configure vertex attributes(s).</span></span><br><span class="line">    glBindVertexArray(VAO);</span><br><span class="line"></span><br><span class="line">    glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">    glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(vertices), vertices,</span><br><span class="line">GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">    glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>),</span><br><span class="line">(<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">    glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// note that this is allowed, the call to glVertexAttribPointer registered VBO as the vertex attribute's bound vertex buffer object so afterwards we can safely unbind</span></span><br><span class="line">    glBindBuffer(GL_ARRAY_BUFFER, <span class="number">0</span>);</span><br><span class="line">    glBindVertexArray(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">deleteObj</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VBO, <span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VAO)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    glDeleteVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line">    glDeleteBuffers(<span class="number">1</span>, &amp;VBO);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">compileShader</span><span class="params">(<span class="keyword">int</span>&amp; shaderProgram)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// vertex shader</span></span><br><span class="line">    <span class="keyword">int</span> vertexShader = glCreateShader(GL_VERTEX_SHADER);</span><br><span class="line">    glShaderSource(vertexShader, <span class="number">1</span>, &amp;vertexShaderSource, <span class="literal">NULL</span>);</span><br><span class="line">    glCompileShader(vertexShader);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// check for shader compile errors</span></span><br><span class="line">    <span class="keyword">int</span> success;</span><br><span class="line">    <span class="keyword">char</span> infoLog[<span class="number">512</span>];</span><br><span class="line">    glGetShaderiv(vertexShader, GL_COMPILE_STATUS, &amp;success);</span><br><span class="line">    <span class="keyword">if</span> (!success)</span><br><span class="line">    &#123;</span><br><span class="line">        glGetShaderInfoLog(vertexShader, <span class="number">512</span>, <span class="literal">NULL</span>, infoLog);</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ERROR::SHADER::VERTEX::COMPILATION_FAILED\n"</span> &lt;&lt; infoLog &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// fragment shader</span></span><br><span class="line">    <span class="keyword">int</span> fragmentShader = glCreateShader(GL_FRAGMENT_SHADER);</span><br><span class="line">    glShaderSource(fragmentShader, <span class="number">1</span>, &amp;fragmentShaderSource, <span class="literal">NULL</span>);</span><br><span class="line">    glCompileShader(fragmentShader);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// check for shader compile errors</span></span><br><span class="line">    glGetShaderiv(fragmentShader, GL_COMPILE_STATUS, &amp;success);</span><br><span class="line">    <span class="keyword">if</span> (!success)</span><br><span class="line">    &#123;</span><br><span class="line">        glGetShaderInfoLog(fragmentShader, <span class="number">512</span>, <span class="literal">NULL</span>, infoLog);</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ERROR::SHADER::FRAGMENT::COMPILATION_FAILED\n"</span> &lt;&lt; infoLog &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// link shaders</span></span><br><span class="line">    shaderProgram = glCreateProgram();</span><br><span class="line">    glAttachShader(shaderProgram, vertexShader);</span><br><span class="line">    glAttachShader(shaderProgram, fragmentShader);</span><br><span class="line">    glLinkProgram(shaderProgram);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// check for linking errors</span></span><br><span class="line">    glGetProgramiv(shaderProgram, GL_LINK_STATUS, &amp;success);</span><br><span class="line">    <span class="keyword">if</span> (!success) &#123;</span><br><span class="line">        glGetProgramInfoLog(shaderProgram, <span class="number">512</span>, <span class="literal">NULL</span>, infoLog);</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ERROR::SHADER::PROGRAM::LINKING_FAILED\n"</span> &lt;&lt; infoLog &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    glDeleteShader(vertexShader);</span><br><span class="line">    glDeleteShader(fragmentShader);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">render</span><span class="params">(<span class="keyword">int</span> &amp;shaderProgram, <span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VAO)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// render</span></span><br><span class="line">    <span class="comment">// ------</span></span><br><span class="line">    glClearColor(<span class="number">0.2f</span>, <span class="number">0.3f</span>, <span class="number">0.3f</span>, <span class="number">1.0f</span>);</span><br><span class="line">    glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// draw our first triangle</span></span><br><span class="line">    glUseProgram(shaderProgram);</span><br><span class="line">    <span class="comment">// seeing as we only have a single VAO there's no need to bind it every time, but we'll do so to keep things a bit more organized</span></span><br><span class="line">    glBindVertexArray(VAO);</span><br><span class="line">    glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用索引缓冲对象改进绘制"><a href="#使用索引缓冲对象改进绘制" class="headerlink" title="使用索引缓冲对象改进绘制"></a>使用索引缓冲对象改进绘制</h2><p>绘制复杂的图像，一般需要使用索引缓冲对象(Element Buffer Object，EBO，也叫Index Buffer Object，IBO)。OpenGL调用这些顶点的索引来决定该绘制哪个顶点，如矩形由两个三角形组成，绘制时只要指定四个端点、设置两个三角形分别指定的端点。</p>
<p>对setVertixData()、deleteObj()、render()三个函数做部分修改：</p>
<ul>
<li>修改函数申明：</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setVertixData</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VBO, <span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VAO, <span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;EBO)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">deleteObj</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VBO, <span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VAO, <span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;EBO)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">render</span><span class="params">(<span class="keyword">int</span>&amp; shaderProgram, <span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VAO)</span></span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>函数体修改：</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setVertixData</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VBO, <span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VAO, <span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;EBO)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// set up vertex data (and buffer(s)) and configure vertex attributes</span></span><br><span class="line">    <span class="comment">// ------------------------------------------------------------------</span></span><br><span class="line">    <span class="keyword">float</span> vertices[] = &#123;</span><br><span class="line">        <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>,   <span class="comment">// top right</span></span><br><span class="line">        <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>,   <span class="comment">// bottom right</span></span><br><span class="line">        <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>,  <span class="comment">// bottom left</span></span><br><span class="line">        <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>   <span class="comment">// top left</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> indices[] = &#123;  <span class="comment">// note that we start from 0!</span></span><br><span class="line">        <span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>,  <span class="comment">// first Triangle</span></span><br><span class="line">        <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>   <span class="comment">// second Triangle</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    glGenBuffers(<span class="number">1</span>, &amp;VBO);</span><br><span class="line">    glGenBuffers(<span class="number">1</span>, &amp;EBO);</span><br><span class="line">    glGenVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// bind the Vertex Array Object first, then bind and set vertex buffer(s), and then configure vertex attributes(s).</span></span><br><span class="line">    glBindVertexArray(VAO);</span><br><span class="line"></span><br><span class="line">    glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">    glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(vertices), vertices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">    glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">    glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);</span><br><span class="line">    glBufferData(GL_ELEMENT_ARRAY_BUFFER, <span class="keyword">sizeof</span>(indices), indices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// note that this is allowed, the call to glVertexAttribPointer registered VBO as the vertex attribute's bound vertex buffer object so afterwards we can safely unbind</span></span><br><span class="line">    glBindBuffer(GL_ARRAY_BUFFER, <span class="number">0</span>);</span><br><span class="line">    glBindVertexArray(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">deleteObj</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VBO, <span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VAO, <span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;EBO)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    glDeleteVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line">    glDeleteBuffers(<span class="number">1</span>, &amp;VBO);</span><br><span class="line">    glDeleteBuffers(<span class="number">1</span>, &amp;EBO);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">render</span><span class="params">(<span class="keyword">int</span> &amp;shaderProgram, <span class="keyword">unsigned</span> <span class="keyword">int</span> &amp;VAO)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// render</span></span><br><span class="line">    <span class="comment">// ------</span></span><br><span class="line">    glClearColor(<span class="number">0.2f</span>, <span class="number">0.3f</span>, <span class="number">0.3f</span>, <span class="number">1.0f</span>);</span><br><span class="line">    glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// draw our first triangle</span></span><br><span class="line">    glUseProgram(shaderProgram);</span><br><span class="line">    glBindVertexArray(VAO); <span class="comment">// seeing as we only have a single VAO there's no need to bind it every time, but we'll do so to keep things a bit more organized</span></span><br><span class="line">    glDrawElements(GL_TRIANGLES, <span class="number">6</span>, GL_UNSIGNED_INT, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="https://learnopengl-cn.github.io/01%20Getting%20started/02%20Creating%20a%20window/" target="_blank" rel="noopener">learnOpenGL CN - 创建窗口</a></li>
<li><a href="https://blog.csdn.net/wangdingqiaoit/article/details/51308622" target="_blank" rel="noopener">OpenGL学习脚印:环境搭建</a></li>
<li><a href="https://learnopengl-cn.github.io/01%20Getting%20started/04%20Hello%20Triangle/" target="_blank" rel="noopener">learnOpenGL CN - 你好，三角形</a></li>
</ol>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/10/20/现代OpenGL的基本使用/" data-id="cjq3rwk5c005y9kvdadesrm7a" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-使用python调用OpenGL" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/10/18/使用python调用OpenGL/">使用python调用OpenGL</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/10/18/使用python调用OpenGL/">
            <time datetime="2018-10-18T13:33:13.000Z" itemprop="datePublished">2018-10-18</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/OpenGL/">OpenGL</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Assimp/">Assimp</a>, <a class="tag-link" href="/tags/GLUT/">GLUT</a>, <a class="tag-link" href="/tags/OpenGL/">OpenGL</a>, <a class="tag-link" href="/tags/pyassimp/">pyassimp</a>, <a class="tag-link" href="/tags/python/">python</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>OpenGL原生接口是C和C++的，不过OpenGL也提供了python版本，在本文中只会演示OpenGL在python中的最简单使用方法，更具体的功能还需要参考相关库的资料。</p>
<p>另外一部分就是介绍3D加载库Assimp，由于实际的项目都是先用3D软件做好模型，再其他地方使用，所以Assimp是OpenGL项目中相对很实用的库，不过其python版本安装相对复杂，所以这里特殊说明。</p>
<h2 id="PyOpenGL安装"><a href="#PyOpenGL安装" class="headerlink" title="PyOpenGL安装"></a>PyOpenGL安装</h2><p>为了用Python使用OpenGL，我们需要安装两个库：</p>
<ul>
<li>PyOpenGL：OpenGL的python接口库</li>
<li>PyOpenGL_accelerate：对PyOpenGL进行加速</li>
</ul>
<p>建议使用conda进行安装，因为conda可以自动安装或更新其他的依赖库如numpy、vs_runtion等等。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda install PyOpenGL</span><br><span class="line">conda install conda install PyOpenGL</span><br></pre></td></tr></table></figure>
<p>PyOpenGL官方文档为：<a href="http://pyopengl.sourceforge.net/documentation/" target="_blank" rel="noopener">http://pyopengl.sourceforge.net/documentation/</a></p>
<h2 id="演示代码"><a href="#演示代码" class="headerlink" title="演示代码"></a>演示代码</h2><p>在PyOpenGL后，可以先用如下简单的代码测试以下，openGL是否能正常工作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> OpenGL.GL <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> OpenGL.GLU <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> OpenGL.GLUT <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drawFunc</span><span class="params">()</span>:</span></span><br><span class="line">    glClear(GL_COLOR_BUFFER_BIT)</span><br><span class="line">    glRotatef(<span class="number">0.1</span>, <span class="number">0.1</span>, <span class="number">0.5</span>, <span class="number">0</span>)</span><br><span class="line">    glutWireTeapot(<span class="number">0.5</span>)</span><br><span class="line">    glFlush()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    glutInit()</span><br><span class="line">    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGBA)</span><br><span class="line">    glutInitWindowPosition(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">    glutInitWindowSize(<span class="number">400</span>, <span class="number">400</span>)</span><br><span class="line">    glutCreateWindow(<span class="string">b'first'</span>)</span><br><span class="line">    glutDisplayFunc(drawFunc)</span><br><span class="line">    glutMainLoop()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">        main()</span><br></pre></td></tr></table></figure>
<p>运行以上代码，得到如下窗口：</p>
<p><img src="/markdownImage/openglteapot.png" alt="teapot"></p>
<h2 id="关于OpenGL的封装库"><a href="#关于OpenGL的封装库" class="headerlink" title="关于OpenGL的封装库"></a>关于OpenGL的封装库</h2><p>在OpenGL中一般的函数命名如下：</p>
<p><strong> &lt;前缀&gt;&lt;根函数&gt;&lt;参数数目&gt;&lt;参数类型&gt; </strong></p>
<p>前缀有gl、glu、aux、glut、wgl、glx、agl等等，分别表示该函数属于OpenGL那个开发库等。所谓开发库，要知道原生的OpenGL是跨平台的，跨平台意味着很多功能是无法统一实现，比如说Windows和X-Window的窗口实现机制是不同的，OpenGL并不关心这些东西，只管画图。所以，基本的OpenGL并没有窗口函数，比如无法创建窗口，无法获得输入等等，这些东西都需要其他的函数库来实现。</p>
<p>在上面的演示代码中我们主要使用两种库，一个是GLU库，它提供了比较基础的命令的封装，可以很简单的实现比较多的复杂功能；而另外一个就是GLUT，glut是不依赖于窗口平台的OpenGL工具包，目的是隐藏不同窗口平台API的复杂度，提供更为复杂的绘制功能。</p>
<p>结合上面的演示代码，可以看到PyOpenGL的用法其实和c++使用原生OpenGL区别非常小。所以更复杂的图形绘制，可以先找c++代码，然后将其变成python代码。</p>
<h2 id="简单Glut的代码框架"><a href="#简单Glut的代码框架" class="headerlink" title="简单Glut的代码框架"></a>简单Glut的代码框架</h2><p>虽然现在glut库基本上被其他库代替，但是在旧版的OpenGL中还是使用得比较多的，其基本代码框架python版本如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> OpenGL.GL <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> OpenGL.GLU <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> OpenGL.GLUT <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">userinit</span><span class="params">()</span>:</span></span><br><span class="line">    glClearColor( <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span> )</span><br><span class="line">    glColor4f(<span class="number">1.0</span>,<span class="number">1.0</span>,<span class="number">0.0</span>,<span class="number">0.0</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drawFunc</span><span class="params">()</span>:</span></span><br><span class="line">    glClear(GL_COLOR_BUFFER_BIT)</span><br><span class="line">    glBegin(GL_TRIANGLES)</span><br><span class="line">    glVertex3f(<span class="number">-0.5</span>,<span class="number">-0.5</span>,<span class="number">0.0</span>)</span><br><span class="line">    glVertex3f(<span class="number">0.5</span>,<span class="number">0.0</span>,<span class="number">0.0</span>)</span><br><span class="line">    glVertex3f(<span class="number">0.0</span>,<span class="number">0.5</span>,<span class="number">0.0</span>)</span><br><span class="line">    glEnd()</span><br><span class="line">    glFlush()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调整窗口大小回调函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reshape</span><span class="params">(w, h)</span>:</span></span><br><span class="line">    glViewport(<span class="number">0</span>,<span class="number">0</span>,w,h);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">keyboardAction</span><span class="params">(key, x, y)</span>:</span></span><br><span class="line">    print(key)</span><br><span class="line">    <span class="keyword">if</span> key == <span class="string">b'q'</span>:</span><br><span class="line">        exit();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    glutInit()</span><br><span class="line">    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGBA)</span><br><span class="line">    glutInitWindowPosition(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">    glutInitWindowSize(<span class="number">400</span>, <span class="number">400</span>)</span><br><span class="line">    glutCreateWindow(<span class="string">b'first'</span>)</span><br><span class="line"></span><br><span class="line">    userinit()</span><br><span class="line">    <span class="comment"># glutReshapeFunc(reshape)</span></span><br><span class="line">    glutDisplayFunc(drawFunc)</span><br><span class="line">    glutKeyboardFunc(keyboardAction)</span><br><span class="line">    glutMainLoop()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<h2 id="3D模型文件与Assimp库"><a href="#3D模型文件与Assimp库" class="headerlink" title="3D模型文件与Assimp库"></a>3D模型文件与Assimp库</h2><p>3D软件生成的模型文件有很多格式，如obj、3ds、c4e等，这些文件主要包含如下内容的数据：</p>
<ul>
<li>定点坐标</li>
<li>法线坐标</li>
<li>纹理坐标</li>
<li>材质、灯光信息</li>
</ul>
<p>如果希望在OpenGL中使用到这些模型，那么就需要对这些模型文件进行解析，对于某些简单的格式如obj，它是文本格式的文件，每一行的首字符作为标记，可以直接读取解析，但是对于复杂的格式就不那么方便了，最好可以使用他人提供的库来加载。</p>
<p>Assimp则是OpenGl中常用的模型加载库，全称 Open Asset Import Library，它支持很多种格式的模型文件。同样它也提供了python版本pyassimp</p>
<h2 id="pyassimp安装"><a href="#pyassimp安装" class="headerlink" title="pyassimp安装"></a>pyassimp安装</h2><p>pyassimpy的安装不一样，我们先使用pip安装后，它仍然是不能导入的，且提示错误：</p>
<p><em>“ pyassimp.errors.AssimpError: assimp library not found”</em></p>
<p>这是因为仅仅这样安装只是安装了其python接口，并没有将assimp库文件安装。通常我们需要下载其源码自己编译，对于windows系统就是编译生成其对应的.dll文件。下载地址：<a href="http://assimp.sourceforge.net/main_downloads.html" target="_blank" rel="noopener">http://assimp.sourceforge.net/main_downloads.html</a></p>
<p>由于assimp使用cmake管理的，所以在编译assmip前，先确保cmake安装。关于cmake在windows下如何于VS协同使用可以参考如下链接：<a href="https://blog.csdn.net/yaoyuanyylyy/article/details/79024962" target="_blank" rel="noopener">CMake入门1——CMake与VS编译器和nmake的结合使用</a>。</p>
<p>在使用cmake配置项目的时候，需要注意python的是64bit还是32bit，如我的是64bit，在选择编译器就要选择对应的VS64bit版本，否则python将仍然无法导入assimp：</p>
<p><img src="/markdownImage/cmake_config.png" alt="cmake"></p>
<p>如果cmake没有选择正确，而在VS中又强制编译另一个版本的库，则编译时会如下如下错误：</p>
<p><em>“&gt;x64\Debug\adler32.obj : fatal error LNK1112: 模块计算机类型“x64”与目标计算机类型“X86”冲突”</em></p>
<p>在编译完成后将生成的.dll库文件如下：</p>
<p><img src="/markdownImage/assimp_lib.png" alt="cmake"></p>
<p>我们需要将其放入到python能够找到的目录下，我是直接放到site-packages/pyassimp的目录下。</p>
<p>完成上面操作后，可以测试运行如下，检查是否成功导入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyassimp</span><br><span class="line"></span><br><span class="line">objpath = <span class="string">r'1.obj'</span></span><br><span class="line">scene = pyassimp.load(objpath)</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span> len(scene.meshes)</span><br><span class="line">mesh = scene.meshes[<span class="number">0</span>]</span><br><span class="line">print(mesh)</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span> len(mesh.vertices)</span><br><span class="line">print(mesh.vertices[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">pyassimp.release(scene)</span><br></pre></td></tr></table></figure>
<h2 id="assimp读取模型数据结构"><a href="#assimp读取模型数据结构" class="headerlink" title="assimp读取模型数据结构"></a>assimp读取模型数据结构</h2><p>当导入一个模型文件时，即Assimp加载一整个包含所有模型和场景数据的模型文件到一个scene对象时，Assimp会为这个模型文件中的所有场景节点、模型节点都生成一个具有对应关系的数据结构，且将这些场景中的各种元素与模型数据对应起来。下图展示了一个简化，的Assimp生成的模型文件数据结构：</p>
<p><img src="/markdownImage/assimp.png" alt="assmip"></p>
<p>下载pyassimp源码安装包中，在其中的scripts文件中，提供了使用例子，可以参考其中的代码学习。源码安装地址：<a href="https://pypi.org/project/pyassimp/4.1.3/" target="_blank" rel="noopener">https://pypi.org/project/pyassimp/4.1.3/</a></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="http://eyehere.net/tag/pyopengl/" target="_blank" rel="noopener">用PyOpenGL叩开3D的心扉——OpenGL全解析</a></li>
<li><a href="https://blog.csdn.net/wangdingqiaoit/article/details/51879737" target="_blank" rel="noopener">OpenGL学习脚印:模型加载初步-加载obj模型(load obj model)</a></li>
<li><a href="https://blog.csdn.net/u011371324/article/details/77142121" target="_blank" rel="noopener">Opengl学习之模型加载——Assimp</a></li>
</ol>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/10/18/使用python调用OpenGL/" data-id="cjq3rwk3m003b9kvd124ezspz" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <nav id="page-nav">
        <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/12/25/R-CNN网络的认识/" class="thumbnail">
    
    
        <span style="background-image:url(/markdownImage/rcnn.png)" alt="R-CNN网络的认识" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/深度学习/">深度学习</a></p>
                            <p class="item-title"><a href="/2018/12/25/R-CNN网络的认识/" class="title">R-CNN网络的认识</a></p>
                            <p class="item-date"><time datetime="2018-12-25T12:47:25.000Z" itemprop="datePublished">2018-12-25</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/12/17/深度学习主要优化算法总结/" class="thumbnail">
    
    
        <span style="background-image:url(/markdownImage/EMA.png)" alt="深度学习主要优化算法总结" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/深度学习/">深度学习</a></p>
                            <p class="item-title"><a href="/2018/12/17/深度学习主要优化算法总结/" class="title">深度学习主要优化算法总结</a></p>
                            <p class="item-date"><time datetime="2018-12-17T14:10:52.000Z" itemprop="datePublished">2018-12-17</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/12/17/Tensorflow-Keras简单介绍/" class="thumbnail">
    
    
        <span style="background-image:url(/markdownImage/keras_net.jpg)" alt="Tensorflow-Keras简单介绍" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/深度学习/">深度学习</a></p>
                            <p class="item-title"><a href="/2018/12/17/Tensorflow-Keras简单介绍/" class="title">Tensorflow-Keras简单介绍</a></p>
                            <p class="item-date"><time datetime="2018-12-17T13:17:43.000Z" itemprop="datePublished">2018-12-17</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/12/14/反向传播算法推导/" class="thumbnail">
    
    
        <span style="background-image:url(/markdownImage/calcgraph.png)" alt="反向传播算法推导" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/深度学习/">深度学习</a></p>
                            <p class="item-title"><a href="/2018/12/14/反向传播算法推导/" class="title">反向传播算法推导</a></p>
                            <p class="item-date"><time datetime="2018-12-14T13:50:59.000Z" itemprop="datePublished">2018-12-14</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/11/17/numpy的高级操作/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术/">技术</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/开发工具环境/">开发工具环境</a></p>
                            <p class="item-title"><a href="/2018/11/17/numpy的高级操作/" class="title">numpy的高级操作</a></p>
                            <p class="item-date"><time datetime="2018-11-17T03:08:12.000Z" itemprop="datePublished">2018-11-17</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a><span class="category-list-count">77</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/3D技术/">3D技术</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/OpenGL/">OpenGL</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/OpenNI/">OpenNI</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/Qt/">Qt</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/SLAM/">SLAM</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/WPF/">WPF</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/hexo/">hexo</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/web-spider/">web spider</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/其他/">其他</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/前端/">前端</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/图像处理/">图像处理</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/多线程-多进程/">多线程/多进程</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/嵌入式/">嵌入式</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/开发工具环境/">开发工具环境</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/数据可视化/">数据可视化</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/数据库/">数据库</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/机器学习/">机器学习</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/机器视觉/">机器视觉</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/深度学习/">深度学习</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/算法/">算法</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/虚拟现实/">虚拟现实</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂谈/">杂谈</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/杂谈/Minecraft/">Minecraft</a><span class="category-list-count">1</span></li></ul></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a><span class="archive-list-count">7</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/3D深度传感器/">3D深度传感器</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AI/">AI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AR/">AR</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Adam/">Adam</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Assimp/">Assimp</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BP算法/">BP算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C#</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CNN/">CNN</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EMA/">EMA</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EM算法/">EM算法</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FCN/">FCN</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GLAD/">GLAD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GLFW/">GLFW</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GLUT/">GLUT</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GMM/">GMM</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/InnoDB/">InnoDB</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MIZ702N/">MIZ702N</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MOOC/">MOOC</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Minecraft/">Minecraft</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Momentum/">Momentum</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenCV/">OpenCV</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenGL/">OpenGL</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenNI/">OpenNI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PIL/">PIL</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PyQt/">PyQt</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Qt/">Qt</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Qt-Designer/">Qt Designer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/R-CNN/">R-CNN</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RMSprop/">RMSprop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SGD/">SGD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SLAM/">SLAM</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/STN/">STN</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shader/">Shader</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spatial-Transformer-Network/">Spatial Transformer Network</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unity3D/">Unity3D</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VR/">VR</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VS/">VS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WPF/">WPF</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XAMPP/">XAMPP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ZYNQ7000/">ZYNQ7000</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/anaconda/">anaconda</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/arm-liunx-gcc/">arm-liunx-gcc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/">c</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cmake/">cmake</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/conda/">conda</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cython/">cython</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deep-learning/">deep learning</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gluon/">gluon</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/human-visual-system/">human visual system</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jupyter/">jupyter</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/keras/">keras</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k邻近算法/">k邻近算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/matplotlib/">matplotlib</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mxnet/">mxnet</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/numpy/">numpy</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openCV/">openCV</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opencv/">opencv</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phpMyAdmin/">phpMyAdmin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pip/">pip</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pyassimp/">pyassimp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pyinstaller/">pyinstaller</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pyqt/">pyqt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">22</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scrapy/">scrapy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime/">sublime</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swig/">swig</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tensorflow/">tensorflow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web-spider/">web spider</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xpath/">xpath</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/优化算法/">优化算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/决策树/">决策树</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/博客/">博客</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/双目视觉/">双目视觉</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/图像处理/">图像处理</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/图像特征点/">图像特征点</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/基础矩阵/">基础矩阵</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多线程/">多线程</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/学习总结/">学习总结</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/对极几何/">对极几何</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/嵌入式/">嵌入式</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/张氏标定/">张氏标定</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搜索算法/">搜索算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/摄像头/">摄像头</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最大公约数/">最大公约数</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最短路径/">最短路径</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/本质矩阵/">本质矩阵</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/机器学习/">机器学习</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/机器视觉/">机器视觉</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树莓派/">树莓派</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/梯度下降/">梯度下降</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/梯度下降算法/">梯度下降算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/概率论/">概率论</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/欧几里德算法/">欧几里德算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/深度学习/">深度学习</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/渲染pipeline/">渲染pipeline</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/游戏/">游戏</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/物体检测/">物体检测</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/直方图/">直方图</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/相机标定/">相机标定</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/相机模型/">相机模型</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/神经网络/">神经网络</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/空间变换/">空间变换</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/纹理/">纹理</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/蒙特卡洛算法/">蒙特卡洛算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/虚拟机/">虚拟机</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/语义分割/">语义分割</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/调试/">调试</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/软件设计/">软件设计</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/链式求导/">链式求导</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/驱动开发/">驱动开发</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高斯混合模型/">高斯混合模型</a><span class="tag-list-count">2</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/3D深度传感器/" style="font-size: 10px;">3D深度传感器</a> <a href="/tags/AI/" style="font-size: 10px;">AI</a> <a href="/tags/AR/" style="font-size: 10px;">AR</a> <a href="/tags/Adam/" style="font-size: 10px;">Adam</a> <a href="/tags/Assimp/" style="font-size: 11.43px;">Assimp</a> <a href="/tags/BP算法/" style="font-size: 10px;">BP算法</a> <a href="/tags/C/" style="font-size: 11.43px;">C#</a> <a href="/tags/C/" style="font-size: 15.71px;">C++</a> <a href="/tags/CNN/" style="font-size: 11.43px;">CNN</a> <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/EMA/" style="font-size: 10px;">EMA</a> <a href="/tags/EM算法/" style="font-size: 11.43px;">EM算法</a> <a href="/tags/FCN/" style="font-size: 10px;">FCN</a> <a href="/tags/GLAD/" style="font-size: 10px;">GLAD</a> <a href="/tags/GLFW/" style="font-size: 10px;">GLFW</a> <a href="/tags/GLUT/" style="font-size: 10px;">GLUT</a> <a href="/tags/GMM/" style="font-size: 11.43px;">GMM</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/InnoDB/" style="font-size: 10px;">InnoDB</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/MIZ702N/" style="font-size: 12.86px;">MIZ702N</a> <a href="/tags/MOOC/" style="font-size: 18.57px;">MOOC</a> <a href="/tags/Minecraft/" style="font-size: 10px;">Minecraft</a> <a href="/tags/Momentum/" style="font-size: 10px;">Momentum</a> <a href="/tags/MySQL/" style="font-size: 15.71px;">MySQL</a> <a href="/tags/OpenCV/" style="font-size: 10px;">OpenCV</a> <a href="/tags/OpenGL/" style="font-size: 14.29px;">OpenGL</a> <a href="/tags/OpenNI/" style="font-size: 10px;">OpenNI</a> <a href="/tags/PIL/" style="font-size: 11.43px;">PIL</a> <a href="/tags/PyQt/" style="font-size: 11.43px;">PyQt</a> <a href="/tags/Qt/" style="font-size: 17.14px;">Qt</a> <a href="/tags/Qt-Designer/" style="font-size: 10px;">Qt Designer</a> <a href="/tags/R-CNN/" style="font-size: 10px;">R-CNN</a> <a href="/tags/RMSprop/" style="font-size: 10px;">RMSprop</a> <a href="/tags/SGD/" style="font-size: 10px;">SGD</a> <a href="/tags/SLAM/" style="font-size: 11.43px;">SLAM</a> <a href="/tags/STN/" style="font-size: 10px;">STN</a> <a href="/tags/Shader/" style="font-size: 12.86px;">Shader</a> <a href="/tags/Spatial-Transformer-Network/" style="font-size: 10px;">Spatial Transformer Network</a> <a href="/tags/Unity3D/" style="font-size: 11.43px;">Unity3D</a> <a href="/tags/VR/" style="font-size: 10px;">VR</a> <a href="/tags/VS/" style="font-size: 11.43px;">VS</a> <a href="/tags/WPF/" style="font-size: 11.43px;">WPF</a> <a href="/tags/XAMPP/" style="font-size: 10px;">XAMPP</a> <a href="/tags/ZYNQ7000/" style="font-size: 12.86px;">ZYNQ7000</a> <a href="/tags/anaconda/" style="font-size: 10px;">anaconda</a> <a href="/tags/arm-liunx-gcc/" style="font-size: 10px;">arm-liunx-gcc</a> <a href="/tags/c/" style="font-size: 10px;">c</a> <a href="/tags/cmake/" style="font-size: 10px;">cmake</a> <a href="/tags/conda/" style="font-size: 10px;">conda</a> <a href="/tags/cython/" style="font-size: 10px;">cython</a> <a href="/tags/deep-learning/" style="font-size: 15.71px;">deep learning</a> <a href="/tags/gluon/" style="font-size: 10px;">gluon</a> <a href="/tags/hexo/" style="font-size: 12.86px;">hexo</a> <a href="/tags/human-visual-system/" style="font-size: 10px;">human visual system</a> <a href="/tags/jupyter/" style="font-size: 12.86px;">jupyter</a> <a href="/tags/keras/" style="font-size: 10px;">keras</a> <a href="/tags/k邻近算法/" style="font-size: 10px;">k邻近算法</a> <a href="/tags/markdown/" style="font-size: 11.43px;">markdown</a> <a href="/tags/matplotlib/" style="font-size: 11.43px;">matplotlib</a> <a href="/tags/mxnet/" style="font-size: 11.43px;">mxnet</a> <a href="/tags/numpy/" style="font-size: 14.29px;">numpy</a> <a href="/tags/openCV/" style="font-size: 12.86px;">openCV</a> <a href="/tags/opencv/" style="font-size: 10px;">opencv</a> <a href="/tags/phpMyAdmin/" style="font-size: 10px;">phpMyAdmin</a> <a href="/tags/pip/" style="font-size: 10px;">pip</a> <a href="/tags/pyassimp/" style="font-size: 10px;">pyassimp</a> <a href="/tags/pyinstaller/" style="font-size: 10px;">pyinstaller</a> <a href="/tags/pyqt/" style="font-size: 10px;">pyqt</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/scrapy/" style="font-size: 10px;">scrapy</a> <a href="/tags/sublime/" style="font-size: 10px;">sublime</a> <a href="/tags/swig/" style="font-size: 10px;">swig</a> <a href="/tags/tensorflow/" style="font-size: 10px;">tensorflow</a> <a href="/tags/web-spider/" style="font-size: 11.43px;">web spider</a> <a href="/tags/xpath/" style="font-size: 10px;">xpath</a> <a href="/tags/优化算法/" style="font-size: 10px;">优化算法</a> <a href="/tags/决策树/" style="font-size: 10px;">决策树</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a> <a href="/tags/博客/" style="font-size: 14.29px;">博客</a> <a href="/tags/双目视觉/" style="font-size: 14.29px;">双目视觉</a> <a href="/tags/图像处理/" style="font-size: 18.57px;">图像处理</a> <a href="/tags/图像特征点/" style="font-size: 10px;">图像特征点</a> <a href="/tags/基础矩阵/" style="font-size: 10px;">基础矩阵</a> <a href="/tags/多线程/" style="font-size: 11.43px;">多线程</a> <a href="/tags/学习总结/" style="font-size: 11.43px;">学习总结</a> <a href="/tags/对极几何/" style="font-size: 10px;">对极几何</a> <a href="/tags/嵌入式/" style="font-size: 15.71px;">嵌入式</a> <a href="/tags/张氏标定/" style="font-size: 11.43px;">张氏标定</a> <a href="/tags/搜索算法/" style="font-size: 10px;">搜索算法</a> <a href="/tags/摄像头/" style="font-size: 10px;">摄像头</a> <a href="/tags/最大公约数/" style="font-size: 10px;">最大公约数</a> <a href="/tags/最短路径/" style="font-size: 10px;">最短路径</a> <a href="/tags/本质矩阵/" style="font-size: 10px;">本质矩阵</a> <a href="/tags/机器学习/" style="font-size: 14.29px;">机器学习</a> <a href="/tags/机器视觉/" style="font-size: 15.71px;">机器视觉</a> <a href="/tags/树莓派/" style="font-size: 10px;">树莓派</a> <a href="/tags/梯度下降/" style="font-size: 10px;">梯度下降</a> <a href="/tags/梯度下降算法/" style="font-size: 10px;">梯度下降算法</a> <a href="/tags/概率论/" style="font-size: 10px;">概率论</a> <a href="/tags/欧几里德算法/" style="font-size: 10px;">欧几里德算法</a> <a href="/tags/深度学习/" style="font-size: 14.29px;">深度学习</a> <a href="/tags/渲染pipeline/" style="font-size: 10px;">渲染pipeline</a> <a href="/tags/游戏/" style="font-size: 12.86px;">游戏</a> <a href="/tags/物体检测/" style="font-size: 10px;">物体检测</a> <a href="/tags/直方图/" style="font-size: 11.43px;">直方图</a> <a href="/tags/相机标定/" style="font-size: 12.86px;">相机标定</a> <a href="/tags/相机模型/" style="font-size: 10px;">相机模型</a> <a href="/tags/神经网络/" style="font-size: 11.43px;">神经网络</a> <a href="/tags/空间变换/" style="font-size: 10px;">空间变换</a> <a href="/tags/纹理/" style="font-size: 11.43px;">纹理</a> <a href="/tags/蒙特卡洛算法/" style="font-size: 10px;">蒙特卡洛算法</a> <a href="/tags/虚拟机/" style="font-size: 10px;">虚拟机</a> <a href="/tags/语义分割/" style="font-size: 10px;">语义分割</a> <a href="/tags/调试/" style="font-size: 10px;">调试</a> <a href="/tags/软件设计/" style="font-size: 10px;">软件设计</a> <a href="/tags/链式求导/" style="font-size: 10px;">链式求导</a> <a href="/tags/驱动开发/" style="font-size: 10px;">驱动开发</a> <a href="/tags/高斯混合模型/" style="font-size: 11.43px;">高斯混合模型</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2018 Harry Mei<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        


    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>